<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
           "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><head>
<meta name="description" content="Webzugriff | Compositing nach X11 – KDE Plasma auf dem Weg nach Wayland | Der Juli im Kernelrückblick | Perl-Tutorium: Teil 1 – das erste Programm | Variable Argumente in LaTeX nutzen | Kurzreview: Humble Indie Bundle 3 | Freie Webanalytik mit Piwik | Rezension: LPI 301 | Editorial | Veranstaltungen | Vorschau | Konventionen | Impressum" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="GENERATOR" content="TtH 3.89">
 <style type="text/css"> div.p { margin-top: 7pt;}</style>
 <style type="text/css"><!--
 td div.comp { margin-top: -0.6ex; margin-bottom: -1ex;}
 td div.comb { margin-top: -0.6ex; margin-bottom: -.6ex;}
 td div.hrcomp { line-height: 0.9; margin-top: -0.8ex; margin-bottom: -1ex;}
 td div.norm {line-height:normal;}
 span.roman {font-family: serif; font-style: normal; font-weight: normal;} 
 span.overacc2 {position: relative;  left: .8em; top: -1.2ex;}
 span.overacc1 {position: relative;  left: .6em; top: -1.2ex;} --></style>

                                                       
<meta http-equiv="content-type" content="text/html; charset=utf-8"><title>freiesMagazin 08/2011</title><link type="text/css" rel="stylesheet" href="freiesMagazin-2011-08-bilder-Dateien/fm_mobil_2016_05.css" />
</head>
<div id="content_idx"><body style="font: 0.85em Tahoma, sans-serif;"><font size="5"><a href="http://www.freiesmagazin.de/mobil/freiesMagazin-2011-08.html">Zur Version ohne Bilder</a></font><hr />

<div class="p"><!----></div>
<font size="+4"><b><font color="#595959">freies</font></b><font color="#FF630A">Magazin</font></font>&nbsp;&nbsp;<font color="#595959"><font size="+4"><b>August 2011</b></font></font> <font size="+2">(ISSN 1867-7991)</font><br />

<div class="p"><!----></div>
<font color="#595959"><font size="+3"><b>Topthemen dieser Ausgabe</b></font></font><br />

<div class="p"><!----></div>
    <font size="+1"><a href="freiesMagazin-2011-08-bilder.html#11_08_webzugriff">Webzugriff</a></font> <br />
    Normalerweise muss man nicht im Detail wissen, wie ein Browser auf eine Webseite zugreift. Die genaue Kenntnis der Vorgänge kann jedoch bei der Fehlersuche eine große Hilfe sein. Das Zusammenspiel von DNS, Protokollen und Proxys soll in dem Artikel exemplarisch am Zugriff auf eine Webseite gezeigt werden. Dabei ist hoffentlich alles enthalten: Zerlegen der URL, Finden des Servers, Holen der Seite und anschließende Darstellung. (<a href="freiesMagazin-2011-08-bilder.html#11_08_webzugriff">weiterlesen</a>) <br />
    <br />

<div class="p"><!----></div>

<div class="p"><!----></div>
        <font size="+1"><a href="freiesMagazin-2011-08-bilder.html#11_08_perl1">Perl-Tutorium: Teil 1 – Das erste Programm</a></font> <br />
    Nachdem im vorigen Teil die Perl-Geschichte, Perl-Philosophie und Gemeinschaft der Nutzer vorgestellt wurde, beginnt jetzt die Reise zum ersten eigenen Perl-Programm. Nachdem geprüft ist, ob alle wichtigen Werkzeuge funktionstüchtig und griffbereit verpackt sind, geht es zum ersten Etappenziel: Skalare Variablen und einfache IO. (<a href="freiesMagazin-2011-08-bilder.html#11_08_perl1">weiterlesen</a>) <br />
    <br />

<div class="p"><!----></div>
    <font size="+1"><a href="freiesMagazin-2011-08-bilder.html#11_08_humbleindiebundle3">Kurzreview: Humble Indie Bundle 3</a></font> <br />
    Das Humble Indie Bundle hat schon eine gewisse Tradition, wurde die erste Version bereits im Mai 2010 veröffentlicht. Teil des Bundles sind Spiele, die von verschiedenen Independent-Studios entwickelt wurden und auf allen großen Plattformen Linux, Mac OS X und Windows laufen. Ende Juli wurde die dritte Ausgabe veröffentlicht, auf deren Inhalt in dem Artikel ein kleiner Blick geworfen werden soll. (<a href="freiesMagazin-2011-08-bilder.html#11_08_humbleindiebundle3">weiterlesen</a>) <br />
    <br />

<div class="p"><!----></div>
<a href="freiesMagazin-2011-08-bilder.html#index">Zum Index</a><br /><hr />

<div class="p"><!----></div>
                  
<div class="p"><!----></div>
                        
<h1><font color="#595959"><a name="index">Inhalt</a><a name="index">
</a></font></h1>

<br />
<b>Linux allgemein</b><br />
<a href="freiesMagazin-2011-08-bilder.html#11_08_webzugriff">Webzugriff</a><br />
<a href="freiesMagazin-2011-08-bilder.html#11_08_compositing">Compositing nach X11 – KDE Plasma auf dem Weg nach Wayland</a><br />
<a href="freiesMagazin-2011-08-bilder.html#11_08_kernel">Der Juli im Kernelrückblick</a><br />
<br />
<b>Anleitungen</b><br />
<a href="freiesMagazin-2011-08-bilder.html#11_08_perl1">Perl-Tutorium: Teil 1 – das erste Programm</a><br />
<a href="freiesMagazin-2011-08-bilder.html#11_08_latex_optionen">Variable Argumente in LaTeX nutzen</a><br />
<br />
<b>Software</b><br />
<a href="freiesMagazin-2011-08-bilder.html#11_08_humbleindiebundle3">Kurzreview: Humble Indie Bundle 3</a><br />
<a href="freiesMagazin-2011-08-bilder.html#11_08_piwik">Freie Webanalytik mit Piwik</a><br />
<br />
<b>Community</b><br />
<a href="freiesMagazin-2011-08-bilder.html#11_08_lpi301">Rezension: LPI 301</a><br />
<br />
<b>Magazin</b><br />
<a href="freiesMagazin-2011-08-bilder.html#11_08_editorial">Editorial</a><br />
<a href="freiesMagazin-2011-08-bilder.html#11_08_veranstaltungen">Veranstaltungen</a><br />
<a href="freiesMagazin-2011-08-bilder.html#11_08_vorschau">Vorschau</a><br />
<a href="freiesMagazin-2011-08-bilder.html#11_08_konventionen">Konventionen</a><br />
<a href="freiesMagazin-2011-08-bilder.html#11_08_impressum">Impressum</a><br />



<div class="p"><!----></div>
<a href="freiesMagazin-2011-08-bilder.html#index">Zum Index</a><br /><hr />

<div class="p"><!----></div>
<h1><font color="#595959"><a name="11_08_editorial">Editorial</a><a name="11_08_editorial">
</a></font></h1>
    <font size="+2">Sommerloch?</font>

<div class="p"><!----></div>
Nein, die eigentlich an Nachrichten arme Zeit des Jahres geht spurenlos an <b><font color="#595959">freies</font></b><font color="#FF630A">Magazin</font> vorüber –
und so haben wir auch diesen Monat wieder den einen oder anderen spannenden
Artikel in petto. Darüber hinaus nutzen wir an dieser Stelle die Möglichkeit,
um in eigener Sache um etwas Aufmerksamkeit zu bitten.

<div class="p"><!----></div>

<h2>Layouter gesucht</h2>

<div class="p"><!----></div>
Wie schon im
Juli&nbsp;<a href="http://www.freiesmagazin.de/20110725-freiesmagazin-sucht-unterstuetzung">[1]</a>
angekündigt, sucht <b><font color="#595959">freies</font></b><font color="#FF630A">Magazin</font> wieder nach neuem Teamnachwuchs. 
In der Zwischenzeit haben sich auch die ersten neuen Mitstreiter eingefunden.
Darüber freuen wir uns sehr. Allerdings suchen wir nach wie vor noch Nachwuchs für
das Layout in unserem Magazin.

<div class="p"><!----></div>
Sollten Sie, liebe Leser, Interesse, Zeit und Lust mitbringen, 
um <b><font color="#595959">freies</font></b><font color="#FF630A">Magazin</font> kreativ mitzugestalten und den Artikeln das
richtige Layout zu verpassen – dann können Sie sich bei uns austoben.

<div class="p"><!----></div>
Als Werkzeug der Wahl kommt für das 
Layout das Textsatzsystem
LaTeX&nbsp;<a href="http://www.latex-project.org">[2]</a> zum
Einsatz, sodass etwas Wissen auf diesem Gebiet sicherlich nicht
schaden kann. Keine Bange, das Magazin ist aber so gehalten, dass sehr viel mit Makros gearbeitet
wird. Aus diesem Grund sind auch nicht zwingend LaTeX-Profis gefordert, um das Magazin zu
setzen. Wenn jemand Interesse hat, sich auf diesem Gebiet
einzuarbeiten, helfen wir gerne weiter.

<div class="p"><!----></div>
Daneben wäre Wissen im Umgang mit dem Versionskontrollsystem
Subversion (SVN) gut, ist aber nicht zwingend erforderlich. Die
wenigen SVN-Befehle, die dazu benötigt werden, sind schnell erlernt –
auch Dank einer hervorragenden
Dokumentation&nbsp;<a href="http://svnbook.red-bean.com">[3]</a>. Zusätzlich stehen in den
meisten Linux-Distributionen und Desktopumgebungen auch grafische
Oberflächen für die Verwaltung bereit, sodass man nicht zwingend die
Konsole bedienen muss – auch wenn es darüber manchmal schneller geht.

<div class="p"><!----></div>
Falls Sie also Lust und  Interesse haben, an der Gestaltung von <b><font color="#595959">freies</font></b><font color="#FF630A">Magazin</font>
mitzuwirken, dann schreiben Sie sich doch einfach über den üblichen
Weg an <img src="freiesMagazin-2011-08-bilder-Dateien/redaktionmail.png" alt="redaktion ETT freiesmagazin PUNKT de" height="17" width="168" align="top" />. Auf Ihr Engagement freuen wir uns! 

<div class="p"><!----></div>
Und nun wünschen wir Ihnen viel Spaß mit der neuen Ausgabe.

<div class="p"><!----></div>
Ihre <b><font color="#595959">freies</font></b><font color="#FF630A">Magazin</font>-Redaktion

<div class="p"><!----></div>
    <font color="#595959"><font size="+1">Links</font></font><br />
        
[1] <a href="http://www.freiesmagazin.de/20110725-freiesmagazin-sucht-unterstuetzung"><tt style="font-size: 1.3em;">http://www.freiesmagazin.de/20110725-freiesmagazin-sucht-unterstuetzung</tt></a><br />

<div class="p"><!----></div>
[2] <a href="http://www.latex-project.org"><tt style="font-size: 1.3em;">http://www.latex-project.org</tt></a><br />

<div class="p"><!----></div>
[3] <a href="http://svnbook.red-bean.com"><tt style="font-size: 1.3em;">http://svnbook.red-bean.com</tt></a><br />

<div class="p"><!----></div>
            <a href="http://www.freiesmagazin.de/comment/reply/236?edit[subject]=Editorial#comment-form"><i>Das Editorial kommentieren</i></a><br /><br />
    <a href="freiesMagazin-2011-08-bilder.html#index">Zum Index</a><br /><hr />

<div class="p"><!----></div>


<div class="p"><!----></div>
<h1><font color="#595959"><a name="11_08_webzugriff">Webzugriff</a><a name="11_08_webzugriff">
</a></font></h1>von Dirk Geschke

<div class="p"><!----></div>
        <b>N</b><b>ormalerweise muss man nicht im Detail wissen, wie ein Browser auf eine 
Webseite zugreift. Die genaue Kenntnis der Vorgänge kann jedoch bei der 
Fehlersuche eine große Hilfe sein.</b>

<div class="p"><!----></div>
<b>Redaktioneller Hinweis:</b> <i>Der Artikel „Webzugriff“ erschien erstmals bei 
Pro-Linux&nbsp;<a href="http://www.pro-linux.de/artikel/2/1509/webzugriff.html">[1]</a>.</i>

<div class="p"><!----></div>

<h2>Einleitung</h2>

<div class="p"><!----></div>
Das Zusammenspiel von DNS, Protokollen und Proxys soll hier exemplarisch am
Zugriff auf eine Webseite gezeigt werden. Dabei ist hoffentlich alles
enthalten: Zerlegen der URL, Finden des Servers, Holen der Seite und
anschließende Darstellung.

<div class="p"><!----></div>

<div class="p"><!----></div>
    <img border="0" src="freiesMagazin-2011-08-bilder-Dateien/webzugriff.png" /><br /><em>Der verwendete Testaufbau.</em><br />

<div class="p"><!----></div>

<h2>Zerlegen der URL</h2>

<div class="p"><!----></div>
Der erste Schritt besteht in der Analyse der URL. So wird diese in die drei
wichtigen Bestandteile Protokoll, Servername und Pfad auf dem Zielsystem
zerlegt. Beim Protokoll wird gewöhnlich HTTP verwendet. Wird kein Port
angegeben, so ist es der www-Port oder auch der http-Port. Das ist ein
Alias, wie in <b><tt style="font-size: 1.3em;">/etc/services</tt></b> definiert:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
www&nbsp;&nbsp;80/tcp&nbsp;&nbsp;http&nbsp;&nbsp;#&nbsp;WorldWideWeb&nbsp;HTTP
www&nbsp;&nbsp;80/udp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;HyperText
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Transfer&nbsp;Protocol
</pre>

<div class="p"><!----></div>
Definiert sind die Services in der Regel immer für beide Protokolle, also
TCP und UDP. Nur wird wohl keiner jemals UDP für HTTP verwenden.

<div class="p"><!----></div>
Neben HTTP wird oft noch HTTP over SSL/TLS verwendet, das wird durch https
angegeben. Dabei wird zwischen dem Transportprotokoll TCP und HTTP noch eine
Verschlüsselungsschicht eingebaut. Da gibt es oft noch FTP, hier wird ganz
normal Port 21 verwendet. Aber auch der Zugriff auf lokale Dateien ist mit
file möglich.

<div class="p"><!----></div>
Nach dem Protokoll folgt ein Doppelpunkt und zwei Slashes <b><tt style="font-size: 1.3em;">://</tt></b>. Bis zum
nächsten Slash folgt dann der Servername, gefolgt vom Pfad auf dem
Zielsystem. Also bei

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
http://www.lug-erding.de/index.html
</pre>

<div class="p"><!----></div>
ist HTTP das Protokoll, <b><tt style="font-size: 1.3em;">www.lug-erding.de</tt></b> der Servername und <b><tt style="font-size: 1.3em;">index.html</tt></b> der
Pfad zu den Daten auf dem Zielsystem. Gewöhnlich kann <b><tt style="font-size: 1.3em;">index.html</tt></b> weggelassen
werden, dann besteht der Pfad nur aus einem Schrägstrich (<b><tt style="font-size: 1.3em;">/</tt></b>). Der Webserver liefert dann
in aller Regel die Datei <b><tt style="font-size: 1.3em;">index.html</tt></b> aus, oder eine Lokalisierung wie z.&nbsp;B.
<b><tt style="font-size: 1.3em;">index.html.de</tt></b>, falls der Browser die deutsche Sprache bevorzugt.

<div class="p"><!----></div>
Wer sich schon einmal gewundert hat, warum der Browser beim Zugriff auf
lokale Dateien drei Slashes in die URL einbaut, hat nun die Antwort: Der
Servername ist leer. Anderenfalls würde er den ersten Pfadteil als
Servernamen interpretieren. Das ergibt bei file natürlich keinen Sinn.

<div class="p"><!----></div>
Die URL für den lokalen Dateizugriff könnte also so aussehen:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
file:///home/geschke/WEB/index.html
</pre>

<div class="p"><!----></div>
Auch die Protokollnamen, TCP oder UDP, also das nächst höhere Protokoll nach
IP, kann in die entsprechenden Zahlenwerte per <b><tt style="font-size: 1.3em;">/etc/protocols</tt></b> aufgelöst
werden:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
tcp&nbsp;&nbsp;&nbsp;6&nbsp;&nbsp;TCP&nbsp;&nbsp;#&nbsp;transmission
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;control&nbsp;protocol
udp&nbsp;&nbsp;17&nbsp;&nbsp;UDP&nbsp;&nbsp;#&nbsp;user&nbsp;datagram
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;protocol
</pre>

<div class="p"><!----></div>
TCP ist also das IP-Protokoll 6, UDP hat die Nummer 17. Es ist auch später
entstanden und deutlich einfacher als TCP.

<div class="p"><!----></div>

<h2>Proxy finden</h2>

<div class="p"><!----></div>
Ein Browser kann natürlich versuchen, die Seite direkt vom Server zu laden,
es ist aber auch möglich, die Seite über einen (Caching-)Webproxy zu holen.
Das kann den Vorteil haben, dass Daten dort im Cache liegen oder auch

einfach nur verschiedene Wege zu den Servern hier zentral gepflegt werden
können. Auch besteht hier die Möglichkeit, zentral den Zugriff zu
reglementieren.

<div class="p"><!----></div>
Wenn der Browser für den Gebrauch eines Proxys konfiguriert ist, so muss er
auch wissen, welchen Proxy er wann verwenden soll. Da gibt es mehrere
Möglichkeiten:

<div class="p"><!----></div>

<ol type="1">
<li> keinen Proxy verwenden
<div class="p"><!----></div>
</li>

<li> manuelle Proxy-Konfiguration, also Angabe von der Adresse und Port
<div class="p"><!----></div>
</li>

<li> automatische Proxy-Konfiguration via URL, PAC-Datei (Proxy Auto-Config)
<div class="p"><!----></div>
</li>

<li> Proxy-Einstellungen des Systems, Environment-Variablen wie
<b><tt style="font-size: 1.3em;">http_proxy</tt></b>, <b><tt style="font-size: 1.3em;">ftp_proxy</tt></b> oder <b><tt style="font-size: 1.3em;">https_proxy</tt></b>
<div class="p"><!----></div>
</li>

<li> Proxy-Einstellungen über das Netzwerk automatisch erkennen, <b><tt style="font-size: 1.3em;">wpad.dat</tt></b>

<div class="p"><!----></div>
</li>
</ol>

<div class="p"><!----></div>
Bei der PAC-Datei und <b><tt style="font-size: 1.3em;">wpad.dat</tt></b> wird ein kleines JavaScript-Programm geladen, über
dieses können verschiedene Proxys je nach Art der URL verwendet werden. Bei
der manuellen Konfiguration kann man nur einen Proxy angeben, es besteht
aber die Möglichkeit, dass man Ausnahmen definiert. Diese werden dann direkt
vom Server bezogen und nicht via Proxy.

<div class="p"><!----></div>
Die via Netzwerk automatisch erkannten Proxy-Einstellungen können über
vielfache Wege ermittelt werden, das kann das Suchen nach einem Webserver in
der eigenen Domain oder via DHCP oder DNS bedeuten. Genauer kann man es bei
Wikipedia&nbsp;<a href="https://secure.wikimedia.org/wikipedia/de/wiki/Web_Proxy_Autodiscovery_Protocol">[2]</a> nachlesen.

<div class="p"><!----></div>
Hier wird aber auch mitunter der nächste Schritt schon relevant: Die
Namensauflösung. Gerade wenn Namen und Ausnahmen für IP-Adressen verwendet
werden oder die PAC-Datei den zuständigen Proxy auf Basis von IP-Adressen
bestimmen will, so wird auch eine Namensauflösung benötigt. Hier wird DNS
notwendig. Ein Vorteil eines Proxys ist, dass man den DNS leichter konfigurieren
kann.

<div class="p"><!----></div>
Sollte man also beim Surfen immer eine Verzögerung von 5-10 Sekunden bei
Erstzugriffen merken, dann könnte es an der fehlerhaften Namensauflösung
liegen. Das ist der typische Zeitraum, wann der Resolver aufgibt und der
Browser einfach alles über den definierten Default-Proxy abwickelt.

<div class="p"><!----></div>

<h2>Namensauflösung</h2>

<div class="p"><!----></div>
Wird die Namensauflösung nicht über den Proxy geregelt oder der Proxy wird
mit Namen statt IP-Adresse angegeben, so muss der Client, also der eigene
PC, den Namen auflösen. Es gibt mehrere Verfahren, wie man vom Namen zur
IP-Adresse kommen kann. Unter Linux wird das über den hosts-Eintrag in der
Datei <b><tt style="font-size: 1.3em;">/etc/nsswitch.conf</tt></b> geregelt. Bei mir steht da z.&nbsp;B.:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
hosts:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;files&nbsp;dns
</pre>

<div class="p"><!----></div>
In diesem Fall wird der Name zuerst in der lokalen Datei <b><tt style="font-size: 1.3em;">/etc/hosts</tt></b> gesucht.
Steht hier der Name mit einer IP-Adresse, so wird die Suche abgebrochen und
die Adresse verwendet. Damit kann man z.&nbsp;B. die Adressen vom DNS-Server
„überladen“. Für Testzwecke kann das manchmal hilfreich sein, manche
verwenden es auch, um „DoubleClick“ oder „Google-Analytics“ auf 127.0.0.1
umzubiegen. Damit gibt es weniger Werbung bzw. Verfolgung der Webaufrufe.

<div class="p"><!----></div>
Kann der Name nicht aufgelöst werden, so erfolgt dann die Abfrage von
DNS-Servern. Hierfür ist die Datei <b><tt style="font-size: 1.3em;">/etc/resolv.conf</tt></b> relevant. In ihr können
bis zu drei Nameserver stehen, es kann auch eine Suchdomain angegeben
werden: Wird der direkte Name nicht gefunden, so werden nach und nach die
angegebenen Domainnamen angefügt und die Suche erneut gestartet, bis eine
IP-Adresse gefunden wird. Anderenfalls wird ein Fehler zurückgeliefert, der
Browser hängt eine Zeit lang und liefert dann eine entsprechende Fehlermeldung.

<div class="p"><!----></div>
Ferner könnten in <b><tt style="font-size: 1.3em;">nsswitch.conf</tt></b> auch noch <b><tt style="font-size: 1.3em;">nis/nisplus</tt></b> oder <b><tt style="font-size: 1.3em;">ldap</tt></b> stehen. Das
dürfte heute aber kaum noch einer für die Namensauflösung verwenden. Hat man
den Avahi-Daemon installiert, das ist ein sogenanntes „Zeroconf“-Programm wie
„Rendezvous“ oder „Bonjour“, gibt es noch ein Verfahren mehr. Mit Avahi kann
ein Netzwerk ohne eigenes Zutun, lediglich durch das Verkabeln, aufgebaut
werden. Dem einen oder anderen sind diese Adressen bestimmt schon begegnet,
sie liegen im Bereich 169.254.x.y. Warum man für so etwas ein ganzes Class-B
Netz verschwendet, ist eine andere, gute Frage. Oft wird dieser Daemon durch
die Distribution automatisch mitinstalliert. Dann gibt es noch die Option
<b><tt style="font-size: 1.3em;">mdns</tt></b>, der Eintrag in <b><tt style="font-size: 1.3em;">/etc/nsswitch.conf</tt></b> kann dann so aussehen:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
hosts:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;files&nbsp;mdns4_minimal&nbsp;[NOTFOUND=return]&nbsp;dns&nbsp;mdns4
</pre>

<div class="p"><!----></div>
Diese <b><tt style="font-size: 1.3em;">mdns</tt></b>-Einträge suchen via Multicast nach der IP-Adresse, d.&nbsp;h. sie rufen
in das Netzwerk hinein, ob jemand die IP-Adresse zu dem Namen hat. Meldet
sich hier ein System mit „Nein“, so bricht die Suche ab. Man sollte diesen
ganzen Avahi-Krempel einfach wegwerfen, er stört mehr, als er hilft. Wer von
Netzwerken keine Ahnung hat, der soll einfach die Finger davon lassen und
sich nicht auf die Magie des Betriebssystems verlassen. Aber dummerweise
installieren viele Distributionen das Teil „automagisch“ mit.

<div class="p"><!----></div>
Idealerweise sollte man also nur

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
hosts:&nbsp;files&nbsp;dns
</pre>

<div class="p"><!----></div>
in der Datei <b><tt style="font-size: 1.3em;">/etc/nsswitch.conf</tt></b> haben. Ferner sollte in <b><tt style="font-size: 1.3em;">/etc/hosts</tt></b> immer der
Name <b><tt style="font-size: 1.3em;">localhost</tt></b> enthalten sein:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
127.0.0.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;localhost
</pre>

<div class="p"><!----></div>
<b><tt style="font-size: 1.3em;">localhost</tt></b> wird von vielen lokalen Diensten verwendet, der Name sollte also
zum einen immer auflösbar sein und zum anderen auf die Loopback-Adresse
verweisen. Sonst kann man schon seltsame Effekte haben …

<div class="p"><!----></div>

<h2>Finden des DNS-Servers</h2>

<div class="p"><!----></div>
Da somit bekannt ist, wie die Namensauflösung erfolgt, kann man davon ausgehen,
dass ein DNS-Server involviert ist und nicht über <b><tt style="font-size: 1.3em;">/etc/hosts</tt></b>-Auflösungen
gesurft wird. Jetzt
    kommt der Netzwerkbereich: Wie wird der DNS-Server im
Internet gefunden?

<div class="p"><!----></div>
Zur kurzen Erinnerung an TCP/IP: Das Protokoll besteht aus mehreren
unabhängigen Schichten, jede Schicht hat ihr eigenes Protokoll und ihre
eigene Aufgabe. Oft wird dafür auch das OSI-Modell mit seinen sieben
Schichten herangezogen. TCP/IP hält sich aber nur für die ersten Schichten
daran. Relevant sind hier die ersten vier Schichten:

<div class="p"><!----></div>
    
<ol type="1">
<li> Physikalische Schicht, z.&nbsp;B. das Netzwerkkabel
<div class="p"><!----></div>
</li>

<li> Datenverbindungsschicht, oft Ethernet
<div class="p"><!----></div>
</li>

<li> Netzwerkschicht, IP
<div class="p"><!----></div>
</li>

<li> Transportschicht, oft TCP oder UDP

<div class="p"><!----></div>
</li>
</ol>

<div class="p"><!----></div>
    Die erste Schicht betrifft nur die Art der Verkabelung oder die Art des
Funks. Relevant wird es mit der zweiten Schicht, das ist in aller Regel
Ethernet. Früher war hier auch noch Token Ring verbreitet, das kommt aber
wohl nur noch selten zum Einsatz. Aber das zeigt den klaren Vorteil des
Schichtenmodells. Die höheren Schichten brauchen nicht zu wissen, ob
Ethernet, WLAN oder gar der Token Ring zum Einsatz kommen. Ebenso brauchen
TCP/UDP nicht zu wissen, ob darunter ein IPv4 oder ein IPv6 verwendet wird.
Das macht es so leicht, hier andere Protokolle zu verwenden.

<div class="p"><!----></div>
Für das Weitere wird einfach von Ethernet ausgegangen. IP ist das Protokoll,
das die Internetsysteme miteinander verbindet, das bedeutet hier die Adressierung der
Systeme an Hand der IP-Adressen. Für das lokale Netzwerk, also bis zum
direkt angeschlossenen System oder dem Router/Gateway, ist aber Ethernet
zuständig.

<div class="p"><!----></div>
Wie wird denn nun der DNS-Server gefunden? Dazu muss man wissen, wie er
erreicht werden kann. Ein Blick in die Routing-Tabelle offenbart dann, ob
der DNS-Server lokal angeschlossen ist, also im gleichen Subnetz steht, oder
ob er über einen Router erreicht werden muss.

<div class="p"><!----></div>
Die logische Adressierung erfolgt über die IP-Adresse. Der Versand zum
nächsten angeschlossenen System, also dem Server oder Router, erfolgt aber
über Ethernet. Erst einmal muss also die Ethernetadresse des Systems
gefunden werden, bekannt ist aber nur eine IP-Adresse.

<div class="p"><!----></div>
Das erfolgt nun mit dem Address-Resolution-Protocol. Dabei sendet das
suchende System, also der eigene PC, ein spezielles Ethernetpaket an alle
angeschlossenen Systeme, und fragt nach der Hardware-Adresse zu der
gewünschten IP-Adresse, also entweder der des DNS-Servers, wenn er direkt im
Subnetz steht, oder die des Routers.

<div class="p"><!----></div>
Die Hardware-Ethernet-Adresse besteht bei Ethernet aus sechs Bytes, und die
sind für alle Ethernetkarten eindeutig. Sie werden auch MAC-Adresse (Media-Access-Control) genannt.
Die ersten drei Bytes identifizieren dabei den Hersteller der Ethernetkarte,
die restlichen drei sind eine einmalige Adresse bei diesem Hersteller. Diese
Adressen werden in der Regel als Hexadezimalzahlen, getrennt durch
Doppelpunkte dargestellt, z.&nbsp;B.:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
00:1a:70:63:16:f5
</pre>

<div class="p"><!----></div>
Die ersten drei Bytes liefern dann über die offizielle
Liste&nbsp;<a href="http://standards.ieee.org/regauth/oui/oui.txt">[3]</a> den Hersteller
der Karte:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
00-1A-70&nbsp;&nbsp;&nbsp;(hex)&nbsp;&nbsp;&nbsp;&nbsp;Cisco-Linksys,&nbsp;LLC
</pre>

<div class="p"><!----></div>
Es gibt auch spezielle Adressen, wie z.&nbsp;B. die Broadcast-Adresse. Bei dieser
sind alle Bits gesetzt:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
ff:ff:ff:ff:ff:ff
</pre>

<div class="p"><!----></div>
Da die Zieladresse zuerst im Ethernet-Header steht, können alle
Ethernet-Karten leicht erkennen, ob das Paket für sie bestimmt ist, sie
kennen ja die eigene MAC-Adresse. Bei Broadcast-Adressen wissen die Karten
dann durch die spezielle Adresse auch gleich, dass sie das Paket
entgegennehmen sollen. Derartige Pakete nimmt also jede direkt
angeschlossene Ethernetkarte an und leitet diese an das Betriebssystem weiter.

<div class="p"><!----></div>
Bei einem ARP-Request steht dann in den Nutzdaten, dass das eigene System
die MAC-Adresse zu der angegebenen IP-Adresse sucht. Da alle Systeme diese
sehen, sollte das System antworten, das die IP-Adresse besitzt. Das ist der
ARP-Response. Mit anderen Worten:

<div class="p"><!----></div>

<ul>
<li> Man hat die IP-Adresse.
<div class="p"><!----></div>
</li>

<li> Die Adressierung im LAN-Segement erfolgt über Ethernetadresse.
<div class="p"><!----></div>
</li>

<li> Man ruft in die Runde: Wer hat die Ethernetadresse zu der IP-Adresse?
<div class="p"><!----></div>
</li>

<li> Das System mit der IP-Adresse antwortet und sendet die MAC-Adresse,
also die  Ethernet-Hardware-Adresse mit.

<div class="p"><!----></div>
</li>
</ul>

<div class="p"><!----></div>
Wer einen Blick auf das Bild oben wirft, der sieht nun, dass die
MAC-Adresse vom DNS-Server mit der IP-Adresse 10.0.0.2 gesucht wird. Das ist in
der Datei <b><tt style="font-size: 1.3em;">lug.pcap</tt></b>&nbsp;<a href="http://www.pro-linux.de/files/webzugriff/lug.pcap">[4]</a>
der erste Eintrag:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
00:13:77:5b:25:ad&nbsp;&#62;&nbsp;ff:ff:ff:ff:ff:ff,&nbsp;ethertype&nbsp;ARP&nbsp;(0x0806),&nbsp;length&nbsp;42:&nbsp;arp&nbsp;who-has&nbsp;10.0.0.2&nbsp;tell&nbsp;10.0.0.1
</pre>

<div class="p"><!----></div>
Das ist der Broadcast, zu erkennen an dem Ziel <b><tt style="font-size: 1.3em;">ff:ff:ff:ff:ff:ff</tt></b>. Die erste
Adresse ist die eigene MAC-Adresse für Antworten. Diese Nachricht wird an
alle Ethernetkarten gesendet, die im gleichen Segment stecken. Die Karten
nehmen dieses Paket dann entgegen und reicht es an den Kernel weiter. Dieser
antwortet dann, wenn er die IP-Adresse hat:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
00:1e:68:ef:be:63&nbsp;&#62;&nbsp;00:13:77:5b:25:ad,&nbsp;ethertype&nbsp;ARP&nbsp;(0x0806),&nbsp;length&nbsp;60:&nbsp;arp&nbsp;reply&nbsp;10.0.0.2&nbsp;is-at&nbsp;00:1e:68:ef:be:63
</pre>

<div class="p"><!----></div>
Hier sieht man noch mehr. Im ARP-Request steht neben der gesuchten Adresse
auch die eigene. Damit kann das System, das gesucht wird, sich schon einmal
die IP-Adresse und MAC-Adresse des Anfragenden merken (ARP-Cache), denn es
gibt wohl eine hohe Wahrscheinlichkeit, dass da gleich noch mehr Traffic
kommen wird.

<div class="p"><!----></div>
Die Antwort wird auch direkt an die MAC-Adresse des Fragenden gesendet, der
Absender hat die MAC-Adresse des gesuchten Systems.

<div class="p"><!----></div>
Übrigens: Bei DHCP wird in der Regel auch erst ein ARP-Request für die
frisch vergebene IP-Adresse vom System selber versendet. Damit wird
getestet, ob sie nicht schon existiert, also jemand diese zum Beispiel von Hand
konfiguriert hatte.

<div class="p"><!----></div>
Das war ein kurzer Ausflug in die Sicherungsschicht&nbsp;<a href="http://de.wikipedia.org/wiki/OSI-Modell#Schicht_2_.E2.80.93_Sicherungsschicht">[5]</a>, wer es genauer wissen will,
kann in
    diesem Vortrag zu
Netzwerkgrundlagen&nbsp;<a href="http://www.lug-erding.de/vortrag/ng.html#ARP">[6]</a>
noch mehr Infos finden.

<div class="p"><!----></div>

<h2>DNS-Namensauflösung</h2>

<div class="p"><!----></div>
Nachdem nun klar ist, wie der DNS-Server oder der Router dahin gefunden
werden, kann das IP-Paket auf die Reise geschickt werden. Im Fall von DNS ist
das in der Regel ein UDP-Paket an
    Port 53 des Servers. Hier sind
allerdings zwei zu sehen, einmal eine Anfrage für die IPv4-Adresse und einmal die für
die IPv6-Adresse:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
IP&nbsp;(tos&nbsp;0x0,&nbsp;ttl&nbsp;64,&nbsp;id&nbsp;16351,&nbsp;offset&nbsp;0,&nbsp;flags&nbsp;[DF],&nbsp;proto&nbsp;UDP&nbsp;(17),&nbsp;length&nbsp;63)&nbsp;10.0.0.1.40105&nbsp;&#62;&nbsp;10.0.0.2.53:&nbsp;30718+&nbsp;A?&nbsp;www.lug-erding.de.&nbsp;(35)
IP&nbsp;(tos&nbsp;0x0,&nbsp;ttl&nbsp;64,&nbsp;id&nbsp;16352,&nbsp;offset&nbsp;0,&nbsp;flags&nbsp;[DF],&nbsp;proto&nbsp;UDP&nbsp;(17),&nbsp;length&nbsp;63)&nbsp;10.0.0.1.40105&nbsp;&#62;&nbsp;10.0.0.2.53:&nbsp;9550+&nbsp;AAAA?&nbsp;www.lug-erding.de.&nbsp;(35)
</pre>

<div class="p"><!----></div>
Die MAC-Adressen (und Zeiten) wurden weggelassen. Man sieht dafür
diverse Werte aus dem

IP-Header. So wird kein TypeOfService verwendet, das
Feld wird heute auch eher als QoS (Quality of Service) benutzt.

<div class="p"><!----></div>
Interessant ist noch die TTL: Diese gibt an, wie lange das IP-Paket
weitergeleitet werden darf. Jeder Router verringert diesen Wert um 1. Landet
ein System bei 0, so wird das Paket verworfen und an den Absender wird ein
ICMP Time Exceeded gesendet, um ihn darüber zu informieren.

<div class="p"><!----></div>
Das Programm traceroute verwendet z.&nbsp;B. diese Option, um den Weg der Pakete
zu bestimmen. Dabei wird sukzessive der Wert von 1 hochgezählt. Bei einem
Wert von 1 antwortet der erste Router, bei 2 der zweite, etc. bis man am
Zielsystem angekommen ist. Da die Router die ICMPs mit der eigenen
IP-Adresse senden, kann man so den Weg bestimmen.

<div class="p"><!----></div>
Die <b><tt style="font-size: 1.3em;">id</tt></b> ist wohl selbsterklärend, sie spielt in Verbindung mit <b><tt style="font-size: 1.3em;">offset</tt></b> eine Rolle.
Müssen die IP-Pakete unterwegs zerlegt werden, da nur kleinere Bestandteile
weitergeleitet werden können (DSL hat z.&nbsp;B. eine MTU (Maximum Transfer Unit) von 1492, Ethernet
jedoch von 1500), so kann über die <b><tt style="font-size: 1.3em;">id</tt></b> und den <b><tt style="font-size: 1.3em;">offset</tt></b> bestimmt werden, wozu
die Daten gehören.

<div class="p"><!----></div>
Aber das DF-Flag verbietet eine Zerlegung in kleinere Pakte: „Don't Fragment.“
Das heißt, wenn
    eine Fragmentierung notwendig ist, darf man es auf Grund dieses
Flags nicht tun. Stattdessen wird das Paket verworfen und eine ICMP-Meldung
wird an den Absender geschickt. Diese besagt, dass das Paket verworfen
wurde, da es zu groß war. Gleichzeitig wird noch mitgesendet, was die
maximale Größe ist, die möglich wäre.

<div class="p"><!----></div>
Wenn man also per Ethernet an seinen DSL-Router Pakete mit 1500 Bytes Größe
sendet, so zerlegt der Router dieses Paket in zwei: Einmal 1492 Bytes und
einmal 28 Byte, 20 Byte für einen neuen IP-Header plus die fehlenden 8
Bytes. Letzteres wird noch durch Füllbytes auf eine Mindestgröße
aufgeblasen. Der Empfänger muss diese Pakete dann wieder zusammenbasteln.

<div class="p"><!----></div>
Bei gesetztem DF-Bit wird das Paket verworfen, der ICMP wird gesendet und
das sendende System erkennt nun: Mehr als 1492 geht nicht. Folglich werden
dann alle Pakete mit einer maximalen Größe von 1492 Bytes versendet, es gibt
keine Fragmentierung und auch nicht zwei statt einem Paket. Das erhöht den
Durchsatz deutlich.

<div class="p"><!----></div>
Die Werte danach besagen, dass die nächste Schicht UDP enthält, das ist
laut <b><tt style="font-size: 1.3em;">/etc/protocols</tt></b> der Wert 17:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
udp&nbsp;&nbsp;17&nbsp;&nbsp;UDP&nbsp;&nbsp;#&nbsp;user&nbsp;datagram&nbsp;protocol
</pre>

<div class="p"><!----></div>
Danach folgen die IP-Adressen und UDP-Ports. Der Client-Port ist in aller
Regel beliebig, der Zielport mit 53 (domain aus <b><tt style="font-size: 1.3em;">/etc/services</tt></b>) fest, also:

<div class="p"><!----></div>
    
<dl compact="compact">
 <dt><b><b>Ursprung</b></b></dt>
	<dd>  10.0.0.1</dd>
 <dt><b><b>Quellport</b></b></dt>
	<dd> 40105</dd>
 <dt><b><b>Ziel</b></b></dt>
	<dd>      10.0.0.2</dd>
 <dt><b><b>Zielport</b></b></dt>
	<dd>  53
</dd>
</dl>


<div class="p"><!----></div>
Anschließend kommt die Payload, also die eigentlichen Daten, die per UDP
übermittelt werden. Das ist die Frage nach dem A- und AAAA-Record, also der
IPv4- bzw. IPv6-Adresse von <b><tt style="font-size: 1.3em;">www.lug-erding.de</tt></b>. Die IPv6-Adresse existiert
nicht, es gibt aber eine IPv4-Adresse. Die Ausgabe ist wieder
etwas gekürzt:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
IP&nbsp;10.0.0.2.53&nbsp;&#62;&nbsp;10.0.0.1.40105:&nbsp;30718*&nbsp;1/1/1&nbsp;A&nbsp;192.168.1.6&nbsp;(85)
</pre>

<div class="p"><!----></div>
Und schon ist das Ziel erreicht: Die IP-Adresse des Webservers ist
gefunden. War doch ganz einfach …

<div class="p"><!----></div>
Eine Frage dürfte noch aufgetreten sein: Wie bekommt der Nameserver diese
Adresse, wenn er nicht für die Domain zuständig ist? Die Antwort ist
einfach, der Nameserver muss rekursive Namensauflösung zulassen und er
hangelt sich dann beginnend beim Root-Nameserver durch, bis er beim
Nameserver für die Domain angekommen ist. Dort erhält er die korrekte
Antwort und leitet diese weiter. Details dazu kann man im Artikel „DNS und
BIND“&nbsp;<a href="http://www.lug-erding.de/artikel/DNS+BIND.html">[7]</a> finden.

<div class="p"><!----></div>

<h2>HTTP-Anfrage senden</h2>

<div class="p"><!----></div>
Da die IP-Adresse des Servers jetzt bekannt ist, geht es fast analog zur Suche
des Nameservers weiter. Zuerst wird die Routingtabelle analysiert, um
herauszufinden, was der nächste Hop ist, also an welche MAC-Adresse das
IP-Paket gesendet werden soll.

<div class="p"><!----></div>
Die Routingtabelle wird bei Unix mit <b><tt style="font-size: 1.3em;">netstat -r</tt></b> ausgegeben, ein <b><tt style="font-size: 1.3em;">-n</tt></b> hilft
dabei, die Namensauflösung zu unterdrücken. Bei Linux kann man auch einfach
das route-Kommando verwenden, es liefert die gleiche Ausgabe.

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
$&nbsp;netstat&nbsp;-rn
Kernel&nbsp;IP&nbsp;routing&nbsp;table
Destination&nbsp;&nbsp;Gateway&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Genmask&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Flags&nbsp;&nbsp;&nbsp;MSS&nbsp;Window&nbsp;&nbsp;irtt&nbsp;Iface
10.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;255.255.255.0&nbsp;&nbsp;&nbsp;U&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;eth0
0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.0.0.3&nbsp;&nbsp;&nbsp;&nbsp;0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UG&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;eth0
</pre>

<div class="p"><!----></div>

<div class="p"><!----></div>
    Es gibt hier nur zwei Einträge. Der erste betrifft das eigene Subnetz,
d.&nbsp;h. alles, was im Bereich von 10.0.0.0 bis 10.0.0.255 liegt (der Bereich
wird durch die Netzmaske festgelegt), wird direkt über <b><tt style="font-size: 1.3em;">eth0</tt></b> zugestellt. D.&nbsp;h.
es wird ein ARP-Request direkt für das Zielsystem gesendet.

<div class="p"><!----></div>
Der zweite Eintrag betrifft die Default-Route, d.&nbsp;h. für alle Adressen, für
die es keinen Eintrag gibt, ist dieser zuständig. In unserem Fall ist der
Zielserver 192.168.1.6, d.&nbsp;h. er muss über die Default-Route erreicht werden.

<div class="p"><!----></div>
Bei Gateway steht nun der Router, der den Weg zum Ziel (hoffentlich) weiß.
Folglich wird ein ARP-Request gesendet, um die MAC-Adresse zu der IP-Adresse
10.0.0.3 zu finden:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
00:13:77:5b:25:ad&nbsp;&#62;&nbsp;ff:ff:ff:ff:ff:ff,&nbsp;ethertype&nbsp;ARP&nbsp;(0x0806),&nbsp;length&nbsp;42:&nbsp;arp&nbsp;who-has&nbsp;10.0.0.3&nbsp;tell&nbsp;10.0.0.1
00:0d:b9:1f:13:7e&nbsp;&#62;&nbsp;00:13:77:5b:25:ad,&nbsp;ethertype&nbsp;ARP&nbsp;(0x0806),&nbsp;length&nbsp;60:&nbsp;arp&nbsp;reply&nbsp;10.0.0.3&nbsp;is-at&nbsp;00:0d:b9:1f:13:7e
</pre>

<div class="p"><!----></div>
Der Rest läuft analog, nur werden die Pakete nun zum Router gesendet.
Der nimmt diese entgegen und sucht das nächste Ziel. Dann werden die
MAC-Adressen ausgetauscht, die TTL wird um eins reduziert und das Paket geht
zum nächsten Router (aka. Hop).

<div class="p"><!----></div>
    Da HTTP in der Regel via TCP erfolgt, wird ein TCP-Paket gesendet:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
00:13:77:5b:25:ad&nbsp;&#62;&nbsp;00:0d:b9:1f:13:7e,&nbsp;ethertype&nbsp;IPv4&nbsp;(0x0800),&nbsp;length&nbsp;74:&nbsp;10.0.0.1.47401&nbsp;&#62;&nbsp;192.168.1.6.80:&nbsp;S&nbsp;1287558560:1287558560(0)&nbsp;win&nbsp;5840&nbsp;&lt;mss&nbsp;1460,sackOK,timestamp&nbsp;1064977&nbsp;0,nop,wscale&nbsp;7&#62;
</pre>

<div class="p"><!----></div>
Hier sieht man die MAC-Adressen, analog zur DNS-Anfrage. Die
Ziel-MAC-Adresse ist die vom Router. Im IP-Header (oben nicht angezeigt)
steht jetzt statt UDP, dass es sich um TCP handelt. Das kann man auch an dem
<b><tt style="font-size: 1.3em;">S</tt></b> erkennen. Das ist ein SYN-Paket, der Client möchte eine Verbindung zum
Server öffnen und bittet um SYNchronisation. Es folgen eine Sequence-Nummer
und die Window-Größe, d.&nbsp;h. soviele Bytes darf einem der Server senden, bevor
der
    Empfang bestätigt werden muss. Ferner gibt es noch ein paar Optionen. Hier
besagen sie, dass SACK, selektives Bestätigen von Paketen, erlaubt ist, es
werden Zeitstempel zur Bestimmung der Laufzeiten verwendet und mit <b><tt style="font-size: 1.3em;">wscale</tt></b>
können größere Windows angegeben werden, als ursprünglich vom Protokoll
erlaubt waren.

<div class="p"><!----></div>
MSS gibt die Maximum Segement Size an, also die maximale Größe für die
Payload, die Nutzdaten im TCP. Der IP-Header ist gewöhnlich 20 Bytes groß,
der TCP-Header ebenfalls. Das macht bei Ethernet einen Wert von
1500-20-20=1460. Das ist die maximale Payload, die ein System senden darf,
sie kann sich noch einmal etwas
    verringern, wenn die Gegenstelle Optionen
von TCP verwendet, dann wird der TCP-Header größer. Das ist dann aber ein
Problem der Gegenstelle, die das berücksichtigen muss.

<div class="p"><!----></div>
    Auf das SYN folgt dann diese Antwort:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
00:0d:b9:1f:13:7e&nbsp;&#62;&nbsp;00:13:77:5b:25:ad,&nbsp;ethertype&nbsp;IPv4&nbsp;(0x0800),&nbsp;length&nbsp;74:&nbsp;192.168.1.6.80&nbsp;&#62;&nbsp;10.0.0.1.47401:&nbsp;S&nbsp;1133845053:1133845053(0)&nbsp;ack&nbsp;1287558561&nbsp;win&nbsp;5792&nbsp;&lt;mss&nbsp;1460,sackOK,timestamp&nbsp;388120&nbsp;1064977,nop,wscale&nbsp;2&#62;
</pre>

<div class="p"><!----></div>
Das sieht analog zu Obigem aus. Interessant ist hier zu sehen, dass als
Absender wieder die MAC-Adresse des Routers auftaucht, obwohl die Antwort ja
vom Webserver stammt. Der Server sendet seinerseit auch ein SYN, er will die
Verbindung in Rückrichtung auch öffnen. Gleichzeitig sendet er auch ein ACK
mit, damit bestätigt (ACKnowledge) er den Verbindungswunsch.

<div class="p"><!----></div>
Die ACK-Nummer ist dabei die Sequenznummer plus eins vom Client. Danach
kommen noch die TCP-Optionen vom Server. Dieser verwendet ebenfalls
Zeitstempel. Hier sieht man nun zusätzlich den Zeitstempel des Clients, d.&nbsp;h.
in der Antwort steckt die Uhrzeit, die der Client versendet hat. Darüber
kann nun leicht die Laufzeit bestimmt werden, man muss sich also keine
Gedanken darüber machen, ob die Zeiten synchron sind oder nicht. Es zählt
immer nur die eigene Uhr! Um genau zu sein, braucht die Uhrzeit auch nicht
genau sein, es zählt nur die Zeit, bis man diesen Wert wiedersieht.

<div class="p"><!----></div>
Was hat es nun mit den Sequenz- und Acknummern auf sich? Ganz einfach,
darüber wird geklärt, wo die Daten einzuordnen sind. Im Internet ist es zum
Beispiel nicht gewährleistet, dass die Pakete in der richtigen Reihenfolge
oder nur einmal aufschlagen.

<div class="p"><!----></div>
Der Trick ist nun, dass die Sequenznummer anzeigt, wo im Datenpaket die
folgenden Bytes liegen, es ist der Startwert. Die Acknowledge-Nummer gibt
wiederum an, welche Daten man von der Gegenstelle erhalten hat. Dabei zeigt
die ACK-Nummer auf das erste Byte, das noch fehlt, also die Seq-Nr. aus dem
SYN-Paket plus die bereits empfangenen Daten plus eins.

<div class="p"><!----></div>
<b><tt style="font-size: 1.3em;">tcpdump</tt></b> ist so freundlich und zieht diese Startzahlen bei der Darstellung
gleich ab, dann braucht man selber nicht mehr rechnen und weiß, wieviele
Bytes angekommen sind.

<div class="p"><!----></div>
Das dritte Paket sieht, etwas gekürzt, so aus:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
IP&nbsp;10.0.0.1.47401&nbsp;&#62;&nbsp;192.168.1.6.80:&nbsp;.&nbsp;ack&nbsp;1&nbsp;win&nbsp;46&nbsp;&lt;nop,nop,timestamp&nbsp;1064978&nbsp;388120&#62;
</pre>

<div class="p"><!----></div>
Hier bedeutet <b><tt style="font-size: 1.3em;">ack 1</tt></b>, dass noch gar keine Bytes empfangen wurden. Das ist
klar, in den SYN-Paketen sind auch keine Daten enthalten, das sind nur
IP-Pakete mit TCP-Header.

<div class="p"><!----></div>
Ab dieser Stelle ist der sogenannte TCP-Handshake abgeschlossen, diese
Verbindung ist nun aktiv. Um es zu wiederholen:

<div class="p"><!----></div>

<ol type="1">
<li> Client sendet SYN
<div class="p"><!----></div>
</li>

<li> Server antwortet mit SYN und ACK (für das SYN des Clients)
<div class="p"><!----></div>
</li>

<li> Client antwortet mit ACK (für das SYN des Servers)

<div class="p"><!----></div>
</li>
</ol>

<div class="p"><!----></div>
Jetzt steht die TCP-Verbindung, es sind aber noch keine Nutzdaten übertragen
worden. Das folgt im vierten Paket, hier fließen dann tatsächlich Daten:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
IP&nbsp;10.0.0.1.47401&nbsp;&#62;&nbsp;192.168.1.6.80:&nbsp;P&nbsp;1:176(175)&nbsp;ack&nbsp;1&nbsp;win&nbsp;46&nbsp;&lt;nop,nop,timestamp&nbsp;1064978&nbsp;388120&#62;
</pre>

<div class="p"><!----></div>
    Hier sieht man, dass 175 Bytes übermittelt wurden. Man sieht aber auch noch
mehr, ein Push-Flag. Das ist die Aufforderung an die Gegenstelle, dass die
Daten nicht mehr gesammelt werden sollen. Der Kernel reicht diese daraufhin
an die Anwendung weiter.

<div class="p"><!----></div>
    Man kann es sich jetzt denken: In dem Paket ist der vollständige
HTTP-Request enthalten. Mehr Daten will der Client jetzt noch nicht senden,
nun ist erst einmal der Server an der Reihe. Schaut man sich das Paket
genauer an (Option <b><tt style="font-size: 1.3em;">-X</tt></b> bei <b><tt style="font-size: 1.3em;">tcpdump</tt></b>), so sieht man den HTTP-Request im TCP-Dump:

<div class="p"><!----></div>


<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
21:31:00.912680&nbsp;IP&nbsp;10.0.0.1.47401&nbsp;&#62;&nbsp;192.168.1.6.80:&nbsp;P&nbsp;1:176(175)&nbsp;ack&nbsp;1&nbsp;win&nbsp;46&nbsp;&lt;nop,nop,timestamp&nbsp;1064978&nbsp;388120&#62;
0x0000:&nbsp;&nbsp;4500&nbsp;00e3&nbsp;d5b3&nbsp;4000&nbsp;4006&nbsp;98b2&nbsp;0a00&nbsp;0001&nbsp;&nbsp;E.....@.@.......
0x0010:&nbsp;&nbsp;c0a8&nbsp;0106&nbsp;b929&nbsp;0050&nbsp;4cbe&nbsp;95a1&nbsp;4395&nbsp;1a3e&nbsp;&nbsp;.....).PL...C..&#62;
0x0020:&nbsp;&nbsp;8018&nbsp;002e&nbsp;cc84&nbsp;0000&nbsp;0101&nbsp;080a&nbsp;0010&nbsp;4012&nbsp;&nbsp;..............@.
0x0030:&nbsp;&nbsp;0005&nbsp;ec18&nbsp;4745&nbsp;5420&nbsp;2f20&nbsp;4854&nbsp;5450&nbsp;2f31&nbsp;&nbsp;....GET./.HTTP/1
0x0040:&nbsp;&nbsp;2e31&nbsp;0d0a&nbsp;436f&nbsp;6e6e&nbsp;6563&nbsp;7469&nbsp;6f6e&nbsp;3a20&nbsp;&nbsp;.1..Connection:.
0x0050:&nbsp;&nbsp;636c&nbsp;6f73&nbsp;650d&nbsp;0a41&nbsp;6363&nbsp;6570&nbsp;742d&nbsp;4368&nbsp;&nbsp;close..Accept-Ch
0x0060:&nbsp;&nbsp;6172&nbsp;7365&nbsp;743a&nbsp;2075&nbsp;7466&nbsp;2d38&nbsp;2c2a&nbsp;3b71&nbsp;&nbsp;arset:.utf-8,*;q
0x0070:&nbsp;&nbsp;3d30&nbsp;2e38&nbsp;0d0a&nbsp;4163&nbsp;6365&nbsp;7074&nbsp;2d45&nbsp;6e63&nbsp;&nbsp;=0.8..Accept-Enc
0x0080:&nbsp;&nbsp;6f64&nbsp;696e&nbsp;673a&nbsp;2067&nbsp;7a69&nbsp;700d&nbsp;0a48&nbsp;6f73&nbsp;&nbsp;oding:.gzip..Hos
0x0090:&nbsp;&nbsp;743a&nbsp;2077&nbsp;7777&nbsp;2e6c&nbsp;7567&nbsp;2d65&nbsp;7264&nbsp;696e&nbsp;&nbsp;t:.www.lug-erdin
0x00a0:&nbsp;&nbsp;672e&nbsp;6465&nbsp;0d0a&nbsp;5265&nbsp;6665&nbsp;7265&nbsp;723a&nbsp;2068&nbsp;&nbsp;g.de..Referer:.h
0x00b0:&nbsp;&nbsp;7474&nbsp;703a&nbsp;2f2f&nbsp;7777&nbsp;772e&nbsp;6c75&nbsp;672d&nbsp;6572&nbsp;&nbsp;ttp://www.lug-er
0x00c0:&nbsp;&nbsp;6469&nbsp;6e67&nbsp;2e64&nbsp;652f&nbsp;0d0a&nbsp;5573&nbsp;6572&nbsp;2d41&nbsp;&nbsp;ding.de/..User-A
0x00d0:&nbsp;&nbsp;6765&nbsp;6e74&nbsp;3a20&nbsp;4469&nbsp;6c6c&nbsp;6f2f&nbsp;322e&nbsp;320d&nbsp;&nbsp;gent:.Dillo/2.2.
0x00e0:&nbsp;&nbsp;0a0d&nbsp;0a&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...
</pre>

<div class="p"><!----></div>
    Links ist die Byte-Nummer des Zeilenanfangs, dann kommen die Rohdaten des
IP-Paketes in Hexadezimaldarstellung und rechts findet man die
ASCII-Darstellung der Zeichen. Punkte sind dabei nicht darstellbare Zeichen
oder auch Leerzeichen. Zieht man den IP-Header und den TCP-Header ab, dann
bekommt man:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
GET&nbsp;/&nbsp;HTTP/1.1
Connection:&nbsp;close
Accept-Charset:&nbsp;utf-8,*;q=0.8
Accept-Encoding:&nbsp;gzip
Host:&nbsp;www.lug-erding.de
Referer:&nbsp;http://www.lug-erding.de/
User-Agent:&nbsp;Dillo/2.2
</pre>

<div class="p"><!----></div>
Das ist also der vollständige HTTP-Request. Wer Details dazu braucht, der wird
im Artikel „HTTP und Squid“&nbsp;<a href="http://www.lug-erding.de/artikel/HTTPundSquid.html">[8]</a>
mehr finden.

<div class="p"><!----></div>
Was man im obigen Dump auch gut sieht, ist die Sequenz <b><tt style="font-size: 1.3em;">0d0a0d0a</tt></b> ganz am
Ende. Schaut man in der ASCII-Tabelle nach (Tipp: <b><tt style="font-size: 1.3em;">man ascii</tt></b>), so findet man
dort:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
012&nbsp;&nbsp;10&nbsp;&nbsp;0A&nbsp;&nbsp;LF&nbsp;&nbsp;'\n'&nbsp;(new&nbsp;line)
015&nbsp;&nbsp;13&nbsp;&nbsp;0D&nbsp;&nbsp;CR&nbsp;&nbsp;'\r'&nbsp;(carriage&nbsp;ret)
</pre>

<div class="p"><!----></div>
Der erste Wert ist oktal, also Basis 8, dann dezimal gefolgt von
hexadezimal. Danach folgt das Zeichen: Zeilenvorlauf und Zeilenrücklauf, so
wie es bei der guten alten Schreibmaschine war. Das ganze zweimal, einmal
für den Zeilenabschluss und einmal für eine Leerzeile. Es wird hier also
    nicht, wie in Unix üblich, nur ein Newline für den Zeilenabschluss verwendet.

<div class="p"><!----></div>

<h2>HTTP-Antwort empfangen</h2>

<div class="p"><!----></div>
Nachdem der Client den Request abgesendet hat (Push-Flag, um dies dem
anderen System anzudeuten), ist der Server an der Reihe. Zuerst wird der
HTTP-Request bestätigt:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
IP&nbsp;192.168.1.6.80&nbsp;&#62;&nbsp;10.0.0.1.47401:&nbsp;.&nbsp;ack&nbsp;176&nbsp;win&nbsp;1716&nbsp;&lt;nop,nop,timestamp&nbsp;388120&nbsp;1064978&#62;
</pre>

<div class="p"><!----></div>
Das heißt der Kernel reicht nun die Daten (den HTTP-Request) an den Webserver
weiter. Dieser analysiert ihn und antwortet darauf (die
TCP-Optionen wurden weggelassen, da sie hier keine wichtigen
Informationen mehr enthalten):

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
IP&nbsp;192.168.1.6.80&nbsp;&#62;&nbsp;10.0.0.1.47401:&nbsp;.&nbsp;1:1449(1448)&nbsp;ack&nbsp;176&nbsp;win&nbsp;1716
IP&nbsp;10.0.0.1.47401&nbsp;&#62;&nbsp;192.168.1.6.80:&nbsp;.&nbsp;ack&nbsp;1449&nbsp;win&nbsp;69
IP&nbsp;192.168.1.6.80&nbsp;&#62;&nbsp;10.0.0.1.47401:&nbsp;.&nbsp;1449:2897(1448)&nbsp;ack&nbsp;176&nbsp;win&nbsp;1716
IP&nbsp;10.0.0.1.47401&nbsp;&#62;&nbsp;192.168.1.6.80:&nbsp;.&nbsp;ack&nbsp;2897&nbsp;win&nbsp;91
IP&nbsp;192.168.1.6.80&nbsp;&#62;&nbsp;10.0.0.1.47401:&nbsp;.&nbsp;2897:4345(1448)&nbsp;ack&nbsp;176&nbsp;win&nbsp;1716
IP&nbsp;10.0.0.1.47401&nbsp;&#62;&nbsp;192.168.1.6.80:&nbsp;.&nbsp;ack&nbsp;4345&nbsp;win&nbsp;114
IP&nbsp;192.168.1.6.80&nbsp;&#62;&nbsp;10.0.0.1.47401:&nbsp;FP&nbsp;4345:4604(259)&nbsp;ack&nbsp;176&nbsp;win&nbsp;1716
IP&nbsp;10.0.0.1.47402&nbsp;&#62;&nbsp;192.168.1.6.80:&nbsp;S&nbsp;1285270109:1285270109(0)&nbsp;win&nbsp;5840
IP&nbsp;192.168.1.6.80&nbsp;&#62;&nbsp;10.0.0.1.47402:&nbsp;S&nbsp;1135847585:1135847585(0)&nbsp;ack&nbsp;1285270110&nbsp;win&nbsp;5792
IP&nbsp;10.0.0.1.47402&nbsp;&#62;&nbsp;192.168.1.6.80:&nbsp;.&nbsp;ack&nbsp;1&nbsp;win&nbsp;46
IP&nbsp;10.0.0.1.47403&nbsp;&#62;&nbsp;192.168.1.6.80:&nbsp;S&nbsp;1290686861:1290686861(0)&nbsp;win&nbsp;5840
IP&nbsp;192.168.1.6.80&nbsp;&#62;&nbsp;10.0.0.1.47403:&nbsp;S&nbsp;1138145597:1138145597(0)&nbsp;ack&nbsp;1290686862&nbsp;win&nbsp;5792
IP&nbsp;10.0.0.1.47403&nbsp;&#62;&nbsp;192.168.1.6.80:&nbsp;.&nbsp;ack&nbsp;1&nbsp;win&nbsp;46
IP&nbsp;10.0.0.1.47401&nbsp;&#62;&nbsp;192.168.1.6.80:&nbsp;F&nbsp;176:176(0)&nbsp;ack&nbsp;4605&nbsp;win&nbsp;137
IP&nbsp;10.0.0.1.47402&nbsp;&#62;&nbsp;192.168.1.6.80:&nbsp;P&nbsp;1:188(187)&nbsp;ack&nbsp;1&nbsp;win&nbsp;46
...
</pre>

<div class="p"><!----></div>
Hier kann man noch etwas beobachten: Erst werden die Daten gesendet und auch
bestätigt. Dann schließt der Webserver die Verbindung mit einem FP, aber der
Client macht gleich darauf noch zwei Verbindungen auf, einmal mit dem
Source-Port 47402 und einmal mit 47403.

<div class="p"><!----></div>
    Warum macht er das? Ganz einfach: Nachdem die <b><tt style="font-size: 1.3em;">index.html</tt></b>-Datei übertragen
worden war, hat der Client diese analysiert und gesehen, dass da noch mehr
Elemente nachgeladen werden müssen. Dafür öffnet er dann mehrere
Verbindungen, um die Daten parallel zu laden. Das könnten auch andere Server
sein, dann wäre es vermutlich deutlich schneller.

<div class="p"><!----></div>
    Mit <b><tt style="font-size: 1.3em;">tcpdump</tt></b> kann man aber auch gezielt eine Verbindung heraussuchen, z.&nbsp;B.
durch Angabe des Source-Ports:

<div class="p"><!----></div>

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
$&nbsp;tcpdump&nbsp;-n&nbsp;-r&nbsp;lug.pcap&nbsp;port&nbsp;47401
</pre>

<div class="p"><!----></div>

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
IP&nbsp;10.0.0.1.47401&nbsp;&#62;&nbsp;192.168.1.6.80:&nbsp;S&nbsp;1287558560:1287558560(0)&nbsp;win&nbsp;5840
IP&nbsp;192.168.1.6.80&nbsp;&#62;&nbsp;10.0.0.1.47401:&nbsp;S&nbsp;1133845053:1133845053(0)&nbsp;ack&nbsp;1287558561&nbsp;win&nbsp;5792
IP&nbsp;10.0.0.1.47401&nbsp;&#62;&nbsp;192.168.1.6.80:&nbsp;.&nbsp;ack&nbsp;1&nbsp;win&nbsp;46
IP&nbsp;10.0.0.1.47401&nbsp;&#62;&nbsp;192.168.1.6.80:&nbsp;P&nbsp;1:176(175)&nbsp;ack&nbsp;1&nbsp;win&nbsp;46
IP&nbsp;192.168.1.6.80&nbsp;&#62;&nbsp;10.0.0.1.47401:&nbsp;.&nbsp;ack&nbsp;176&nbsp;win&nbsp;1716
IP&nbsp;192.168.1.6.80&nbsp;&#62;&nbsp;10.0.0.1.47401:&nbsp;.&nbsp;1:1449(1448)&nbsp;ack&nbsp;176&nbsp;win&nbsp;1716
IP&nbsp;10.0.0.1.47401&nbsp;&#62;&nbsp;192.168.1.6.80:&nbsp;.&nbsp;ack&nbsp;1449&nbsp;win&nbsp;69
IP&nbsp;192.168.1.6.80&nbsp;&#62;&nbsp;10.0.0.1.47401:&nbsp;.&nbsp;1449:2897(1448)&nbsp;ack&nbsp;176&nbsp;win&nbsp;1716
IP&nbsp;10.0.0.1.47401&nbsp;&#62;&nbsp;192.168.1.6.80:&nbsp;.&nbsp;ack&nbsp;2897&nbsp;win&nbsp;91
IP&nbsp;192.168.1.6.80&nbsp;&#62;&nbsp;10.0.0.1.47401:&nbsp;.&nbsp;2897:4345(1448)&nbsp;ack&nbsp;176&nbsp;win&nbsp;1716
IP&nbsp;10.0.0.1.47401&nbsp;&#62;&nbsp;192.168.1.6.80:&nbsp;.&nbsp;ack&nbsp;4345&nbsp;win&nbsp;114
IP&nbsp;192.168.1.6.80&nbsp;&#62;&nbsp;10.0.0.1.47401:&nbsp;FP&nbsp;4345:4604(259)&nbsp;ack&nbsp;176&nbsp;win&nbsp;1716
IP&nbsp;10.0.0.1.47401&nbsp;&#62;&nbsp;192.168.1.6.80:&nbsp;F&nbsp;176:176(0)&nbsp;ack&nbsp;4605&nbsp;win&nbsp;137
IP&nbsp;192.168.1.6.80&nbsp;&#62;&nbsp;10.0.0.1.47401:&nbsp;.&nbsp;ack&nbsp;177&nbsp;win&nbsp;1716
</pre>

<div class="p"><!----></div>
Jetzt sieht man auch, wie die Verbindung abgebaut wird. Es können zwischen
drei und vier Pakete sein:

<div class="p"><!----></div>
    
<ol type="1">
<li> FIN + ACK, hier noch mit Push-Flag
<div class="p"><!----></div>
</li>

<li> ACK des FINs -&#62; half-closed Verbindung
<div class="p"><!----></div>
</li>

<li> FIN + ACK von der Gegenstelle
<div class="p"><!----></div>
</li>

<li> ACK, letztes FIN bestätigen, Verbindung ist zu

<div class="p"><!----></div>
</li>
</ol>

<div class="p"><!----></div>
    Im obigen Fall erfolgt 2. und 3. in einem Paket. Es ist aber auch möglich,
eine Verbindung halboffen zu halten, dann kann nur noch eine Seite senden
Die Payload enthält den HTTP-Header der Antwort des Servers:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
HTTP/1.1&nbsp;200&nbsp;OK
Vary:&nbsp;Accept-Encoding
Content-Encoding:&nbsp;gzip
Last-Modified:&nbsp;Thu,&nbsp;30&nbsp;Dec&nbsp;2010&nbsp;15:09:38&nbsp;GMT
ETag:&nbsp;"1886677020"
Content-Type:&nbsp;text/html
Accept-Ranges:&nbsp;bytes
Content-Length:&nbsp;4321
Connection:&nbsp;close
Date:&nbsp;Thu,&nbsp;01&nbsp;Jan&nbsp;1970&nbsp;01:09:41&nbsp;GMT
Server:&nbsp;lighttpd/1.4.28
</pre>

<div class="p"><!----></div>
    Danach folgt eine Leerzeile und Binärdaten. Der Server hat den Inhalt der
Webseite mit gzip (Content-Encoding: gzip) gesendet. Wer sich an den Request
erinnert, da stand u.&nbsp;a.:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
Accept-Encoding:&nbsp;gzip
</pre>

<div class="p"><!----></div>
    
<div class="p"><!----></div>
Daher wurde hier alles gepackt verschickt. Dabei ginge es auch anders, das
deutet der Server mit

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
Vary:&nbsp;Accept-Encoding
</pre>

<div class="p"><!----></div>
    an. Er könnte die Daten auch anders ausliefern, vermutlich nicht-gepackt.

<div class="p"><!----></div>
    Aus diesem Grund wurde auch noch
<b><tt style="font-size: 1.3em;">lug2.pcap</tt></b>&nbsp;<a href="http://www.pro-linux.de/files/webzugriff/lug2.pcap">[9]</a> erstellt,
da sieht man dann die Daten vom Server in der Antwort ungepackt.

<div class="p"><!----></div>
    Wer sich über das Datum wundert: Der 1.1.1970 ist der Start der Unix-Zeit,
er entspricht 0 Sekunden. Von dieser Zeit an wird die Zeit in Sekunden
gezählt. Der Webserver hier war aber mein DockStar. Scheinbar kann der sich
die Uhrzeit nicht merken und fängt dadurch beim Einschalten bei 0, also beim
1.1.1970 an.

<div class="p"><!----></div>

<h2>Weiteres Vorgehen im Browser</h2>

<div class="p"><!----></div>
Der Browser analysiert die erhaltenen Daten. Dabei gibt der Content-Type
Auskunft darüber, um was für Daten es sich handelt. Bei reinen HTML-Dateien
steht da z.&nbsp;B.:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
Content-Type:&nbsp;text/html
</pre>

<div class="p"><!----></div>
Der Browser kann diese Daten direkt darstellen. Dazu analysiert er aber erst
die Datei, ob da noch weitere Elemente vorliegen, so wie verwendete
CSS-Dateien, eingebettete Links, Bilder, etc. Wenn alle Elemente vorliegen,
fängt der Browser an zu rendern, d.&nbsp;h. er versucht die Elemente in der
angegebenen Weise zu arrangieren, so dass sie darstellbar werden. Da hat
dann z.&nbsp;B. die aktuelle Browsergröße einen Einfluss. Hier wird auch oft die
meiste Zeit beim Surfen gewartet: Oft hilft deswegen auch keine schnellere
Leitung.

<div class="p"><!----></div>
Was passiert, wenn es sich um nicht-HTML-Dateien handelt? Dann schaut der
Browser anhand des Content-Types nach, ob er ein Plug-in zur Darstellung hat.
(<b><tt style="font-size: 1.3em;">about:plugins</tt></b> in der URL-Zeile des Firefox gibt hier Auskunft oder auch
„<em>Bearbeiten&nbsp;-&#62;&nbsp;Einstellungen&nbsp;-&#62;&nbsp;Anwendungen</em>“.)

<div class="p"><!----></div>
Ist das nicht der Fall, so wird in <b><tt style="font-size: 1.3em;">/etc/mailcap</tt></b> oder <b><tt style="font-size: 1.3em;">~/.mailcap</tt></b> nachgesehen,
ob hier steht, welches Programm die Daten anzeigen kann. Firefox fragt dann
aber in aller Regel nach, ob er das Programm auch verwenden soll, eine
Alternative dazu, oder ob die Daten nur gespeichert werden sollen.

<div class="p"><!----></div>
In <b><tt style="font-size: 1.3em;">mailcap</tt></b> steht z.&nbsp;B.:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
application/pdf;&nbsp;/usr/bin/gv&nbsp;'%s'&nbsp;...
</pre>

<div class="p"><!----></div>
D.&nbsp;h. bei PDF-Dateien würde er hier das Programm gv starten, um die Daten
anzeigen zu lassen. Oft gibt es aber mehrere Varianten, z.&nbsp;B. auch xpdf oder
Evince. Normalerweise wird die erste genommen, manche Programme schlagen das
auch vor, bieten aber die Option, ein anderes auszuwählen.

<div class="p"><!----></div>

<h2>Fehlersuche</h2>

<div class="p"><!----></div>
Das praktische Vorgehen ist meistens ein Abwarten der Fehlermeldung im
Browser. Hat man eine, so ist der Rest schon fast selbsterklärend. Oft sind
es DNS-Probleme, d.&nbsp;h. der Name konnte nicht aufgelöst werden. Gelegentlich
gibt es auch Routing-Probleme: Der Zielserver ist über das Routing nicht zu
erreichen.

<div class="p"><!----></div>
DNS kann am einfachsten mit dig getestet werden, z.&nbsp;B.:

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
$&nbsp;dig&nbsp;www.lug-erding.de
</pre>

<div class="p"><!----></div>

<div class="p"><!----></div>
Führt dies nicht zur IP-Adresse, so sollte man einmal versuchen, den ganzen
DNS-Baum durchzuhangeln. D.&nbsp;h. man befragt die Root-Nameserver für den
zuständigen <b><tt style="font-size: 1.3em;">de</tt></b>-Nameserver, den befragt man für den für <b><tt style="font-size: 1.3em;">lug-erding.de</tt></b>
zuständigen Nameserver und diesen wiederum nach der IP-Adresse für den Namen
<b><tt style="font-size: 1.3em;">www.lug-erding.de</tt></b>. Einzelne Nameserver können bei <b><tt style="font-size: 1.3em;">dig</tt></b> mit dem @-Zeichen
angegeben werden, z.&nbsp;B.:

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
$&nbsp;dig&nbsp;www.lug-erding.de&nbsp;@ns9.nameserverservice.de
</pre>

<div class="p"><!----></div>

<div class="p"><!----></div>
oder gleich mit der IP-Adresse:

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
$&nbsp;dig&nbsp;www.lug-eding.de&nbsp;@85.25.128.54
</pre>

<div class="p"><!----></div>
 
<div class="p"><!----></div>
Das Durchhangeln kann dig aber mit der Option <b><tt style="font-size: 1.3em;">+trace</tt></b> selbständig machen:

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
$&nbsp;dig&nbsp;+trace&nbsp;www.lug-erding.de
</pre>

<div class="p"><!----></div>

<div class="p"><!----></div>
Wenn die IP-Adresse bekannt ist, kann man z.&nbsp;B. mit telnet testen, ob der
Server einen offenen Port hat und reagiert, z.&nbsp;B.:

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
$&nbsp;telnet&nbsp;www.lug-erding.de&nbsp;80
</pre>

<div class="p"><!----></div>

<div class="p"><!----></div>
Gibt es die Meldung

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
telnet:&nbsp;Unable&nbsp;to&nbsp;connect&nbsp;to&nbsp;remote&nbsp;host:&nbsp;Connection&nbsp;refused
</pre>

<div class="p"><!----></div>
so ist der Webserver nicht am Laufen. Da kann man dann wenig machen, es sei
denn, es ist der eigene Webserver …

<div class="p"><!----></div>
Um festzustellen, ob es sich um ein Routing-Problem handelt, bietet sich das
Programm traceroute an. Per Default sendet das Programm UDP-Pakete an das
Zielsystem. Normalerweise sind es drei Pakete an die fortlaufenden Ports ab
33434.

<div class="p"><!----></div>
Wie funktioniert das Auffinden der Router zum Ziel? – Ganz einfach über das TTL-Feld im IP-Header: Jeder Router reduziert diesen Wert um eins,
bis das Paket am Ziel ist oder der Wert Null erreicht wird. Das soll
verhindern, dass Pakete ewig im Kreis laufen. Bei einem Wert von Null
passieren in der Regel zwei Dinge:

<div class="p"><!----></div>

<ol type="1">
<li> Das Paket wird verworfen.
<div class="p"><!----></div>
</li>

<li> Ein ICMP Time Exceeded wird an den Absender des Paketes gesendet, die
Absende-IP-Adresse ist die des Routers, der das ICMP generiert.

<div class="p"><!----></div>
</li>
</ol>

<div class="p"><!----></div>
traceroute spielt mit dieser TTL. Beim ersten Paket ist
die TTL auf 1 gesetzt. D.&nbsp;h. der erste Router muss das Paket schon verwerfen
und ein ICMP senden. Damit hat man schon den ersten hop. Danach wird die TTL
nach und nach erhöht, bis man am Ziel angekommen ist oder wo auch immer die
Pakete verloren gehen.

<div class="p"><!----></div>
Das funktioniert recht gut, allerdings spielen nicht alle Router mit, nicht
jeder generiert ein ICMP Time Exceeded-Paket. Dann werden nur Sterne (*)
statt der Router-IP-Adresse angezeigt.

<div class="p"><!----></div>
Für den ersten Test des Routings sollte man die Option <b><tt style="font-size: 1.3em;">-n</tt></b> verwenden. Dadurch
werden die IP-Adressen angezeigt und es wird nicht versucht, den Namen per
DNS zu ermitteln. Hat man einen problematischen Router gefunden, dann hilft
der DNS-Name oft herauszufinden, wo er stehen mag. Eine whois-Abfrage kann
auch den Provider liefern. Ob dieser dann aber überhaupt auf Beschwerden
reagiert, ist eine andere Frage …

<div class="p"><!----></div>
traceroute kann statt UDP-Pakete auch ICMP-Pakete, wie sie ping verwendet,
benutzen. Dazu ist die Option <b><tt style="font-size: 1.3em;">-I</tt></b> da. Die lokale Routingtabelle kann unter
Unix einheitlich mit <b><tt style="font-size: 1.3em;">netstat -r</tt></b> ausgelesen werden. Bei Linux geht auch
einfach das <b><tt style="font-size: 1.3em;">route</tt></b>-Kommando. Hilfreich ist auch hier oft die Option <b><tt style="font-size: 1.3em;">-n</tt></b>, sie
schaltet wieder die Namensauflösung ab.

<div class="p"><!----></div>
Den ARP-Cache kann man mit <b><tt style="font-size: 1.3em;">arp -a</tt></b> auflisten. Die Einträge werden aber in der
Regel, sofern kein Datenverkehr mit der Adresse besteht, nach 15-45 Sekunden
gelöscht, man muss schon schnell schauen. Auch hier kann die Option <b><tt style="font-size: 1.3em;">-n</tt></b> mit
dem gleichen Effekt verwendet werden.

<div class="p"><!----></div>
Wenn alle Stricke reißen, dann kann <b><tt style="font-size: 1.3em;">tcpdump</tt></b> eine gute Wahl sein. Da sind
Fehler aber nur mit geübtem Auge zu erkennen und oft sieht man vor lauter
Wald die Bäume nicht. Während tcpdump sich in der Regel bei den unteren
Protokollen gut auskennt, können die höheren Protokolle mit dem Programm
wireshark gut analysiert werden. Dafür empfiehlt es sich aber, die Daten mit
tcpdump in eine Datei zu schreiben und als normaler Benutzer diese in
wireshark einzulesen.

<div class="p"><!----></div>
Der Grund dafür ist einfach: wireshark ist sehr mächtig und analysiert sehr
viele Protokolle. Da ist es eigentlich normal, dass dort noch viele Bugs
enthalten sind, die vielleicht durch speziell konfigurierte Pakete
ausgenutzt werden könnten. Da ist es dann nicht klug, diese live als
Benutzer root analysieren zu lassen. Zeitversetztes Einlesen der Datei in
wireshark als normaler Benutzer entschärft das dann deutlich.

<div class="p"><!----></div>

<h2>Fazit</h2>

<div class="p"><!----></div>
Oben wurde gezeigt, was hinter einem einzelnen Mausklick im Browser alles
passiert, welche Prozesse involviert sind – bis hinunter zur Paketebene.

<div class="p"><!----></div>
Gewöhnlich verschwendet man daran keinen Gedanken: Es funktioniert ja auch
in der Regel recht gut. Warum sollte man sich also dafür interessieren,
was unter der Haube passiert? Die meisten werden es in der
Regel nicht tun, geschweige denn sich einmal im Detail ansehen, was da
wirklich passiert.

<div class="p"><!----></div>
Auf der anderen Seite gibt einem das Verständnis aber ein wenig Sicherheit
im Umgang mit den Internet-Diensten. Dieser Punkt wurde allerdings noch
nicht betrachtet: Sicherheit! Da nun im
Detail bekannt ist, was abläuft, kann man sich auch relativ einfach überlegen, wo
überall etwas schief gehen kann, vor allem, wenn es einer mit Absicht
macht.

<div class="p"><!----></div>

<div class="p"><!----></div>
Wer aufgepasst hat, der weiß jetzt auch, wie sinnlos Websperren per DNS sein
können: Sie treffen nur diejenigen, die sich nicht auskennen. Sonst nimmt
man einfach einen anderen Nameserver, z.&nbsp;B. den von Google: 8.8.8.8. Wie soll
man dessen Antworten nicht nur filtern, sondern auch noch ändern?

<div class="p"><!----></div>
Oder soll mit den DNS-Sperren sämtlicher DNS-Verkehr geblockt werden, außer
zum lokalen Provider? Das dürfte extrem schwer zu rechtfertigen sein. Wobei
die T-Home das durchaus macht(e): Da war zumindest damals eine Abfrage des
Google-Nameservers geblockt.

<div class="p"><!----></div>
Warum alles fast immer so einwandfrei läuft, ist recht einfach erklärt: Das
Internet ist in den mehr als 40 Jahren, die es existiert, darin gewachsen.
Aber dennoch können immer wieder Probleme auftauchen, sie sind nur so
selten, dass es einem meist nicht auffällt. Wenn mal eine Webseite nicht
funktioniert, dann braucht man in der Regel nicht lange zu warten, bis das
repariert wird.

<div class="p"><!----></div>
Und in vielen Fällen gibt es Redundanzen. So schreibt das DeNIC sogar vor,
dass man wenigstens zwei Nameserver haben muss. Idealerweise sollten die
auch nicht auf dem gleichen System sein, sie sollten nach Möglichkeit auch
in unterschiedlichen Netzsegmenten liegen.

<div class="p"><!----></div>
Man kann man mit DNS auch noch so einiges mehr anstellen, so wie es z.&nbsp;B.
Akamai tut: Man kann die Zugriffe auf Webserver beschleunigen. Ein Verfahren
dabei ist, dass Akamai weltweit Webserver für ihre Kunden betreibt und den
Traffic auf den nächstgelegenen Webserver umleitet.

<div class="p"><!----></div>
Wie machen die das? Ein Verfahren ist nun leicht zu verstehen,
z.&nbsp;B. das von <b><tt style="font-size: 1.3em;">www.rtl2.de</tt></b>&nbsp;<a href="http://www.rtl2.de/">[10]</a>. Die Nameserveranfrage offenbart
es:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
www.rtl2.de.&nbsp;&nbsp;3600&nbsp;&nbsp;IN&nbsp;&nbsp;CNAME&nbsp;&nbsp;www.rtl2.de.edgesuite.net.
</pre>

<div class="p"><!----></div>
Das ist nicht ungewöhnlich, die Namensauflösung wird auf den rechten Namen
weitergeleitet. Das ist ein Nameserver von Akamai. Dieser sieht nun, woher
der Client kommt. Das dürfte nämlich von der IP-Adresse des ISPs kommen.

<div class="p"><!----></div>
Anhand dieser Adresse kann Akamai nun feststellen, in welcher Region der
Anfragende (vermutlich) sitzen wird. Um ihm dann den nächstgelegenen Server,
möglichst der mit der geringsten Load, zuzuordnen, gibt es einen zweiten
CNAME:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
www.rtl2.de.edgesuite.net.&nbsp;21600&nbsp;IN&nbsp;&nbsp;CNAME&nbsp;&nbsp;a1195.g.akamai.net.
</pre>

<div class="p"><!----></div>
Für diese Namensauflösung muss nun ein Nameserver von Akamai befragt werden,
der in der Nähe liegen sollte. Dieser weiß, welche Webserver die geringste
Last haben, und liefert dessen IP-Adresse aus. Damit diese schnell reagieren
können, ist die TTL des Nameserver-Eintrags recht kurz:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
a1195.g.akamai.net.&nbsp;&nbsp;20&nbsp;&nbsp;IN&nbsp;&nbsp;A&nbsp;&nbsp;95.100.249.122
a1195.g.akamai.net.&nbsp;&nbsp;20&nbsp;&nbsp;IN&nbsp;&nbsp;A&nbsp;&nbsp;95.100.249.113
</pre>

<div class="p"><!----></div>
Das sind nur 20 Sekunden, nach dieser Zeit muss die Namensauflösung erneut
angestoßen werden. Dann könnte z.&nbsp;B. die Antwort so aussehen:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
a1195.g.akamai.net.&nbsp;&nbsp;20&nbsp;&nbsp;IN&nbsp;&nbsp;A&nbsp;&nbsp;77.67.20.18
a1195.g.akamai.net.&nbsp;&nbsp;20&nbsp;&nbsp;IN&nbsp;&nbsp;A&nbsp;&nbsp;77.67.20.41
</pre>

<div class="p"><!----></div>
Und offenbar muss sich das bei der Performance rechnen: Die zusätzlichen
Namensauflösungen scheinen durch den Standortvorteil gerechtfertigt zu sein,
zumindest ist Akamai gut im Geschäft&nbsp;…

<div class="p"><!----></div>
    <font color="#595959"><font size="+1">Links</font></font><br />
        
[1] <a href="http://www.pro-linux.de/artikel/2/1509/webzugriff.html"><tt style="font-size: 1.3em;">http://www.pro-linux.de/artikel/2/1509/webzugriff.html</tt></a><br />

<div class="p"><!----></div>
[2] <a href="https://secure.wikimedia.org/wikipedia/de/wiki/Web_Proxy_Autodiscovery_Protocol"><tt style="font-size: 1.3em;">https://secure.wikimedia.org/wikipedia/de/wiki/Web_Proxy_Autodiscovery_Protocol</tt></a><br />

<div class="p"><!----></div>
[3] <a href="http://standards.ieee.org/regauth/oui/oui.txt"><tt style="font-size: 1.3em;">http://standards.ieee.org/regauth/oui/oui.txt</tt></a><br />

<div class="p"><!----></div>
[4] <a href="http://www.pro-linux.de/files/webzugriff/lug.pcap"><tt style="font-size: 1.3em;">http://www.pro-linux.de/files/webzugriff/lug.pcap</tt></a><br />

<div class="p"><!----></div>
[5] <a href="http://de.wikipedia.org/wiki/OSI-Modell#Schicht_2_.E2.80.93_Sicherungsschicht"><tt style="font-size: 1.3em;">http://de.wikipedia.org/wiki/OSI-Modell#Schicht_2_.E2.80.93_Sicherungsschicht</tt></a><br />

<div class="p"><!----></div>
[6] <a href="http://www.lug-erding.de/vortrag/ng.html#ARP"><tt style="font-size: 1.3em;">http://www.lug-erding.de/vortrag/ng.html#ARP</tt></a><br />

<div class="p"><!----></div>
[7] <a href="http://www.lug-erding.de/artikel/DNS+BIND.html"><tt style="font-size: 1.3em;">http://www.lug-erding.de/artikel/DNS+BIND.html</tt></a><br />

<div class="p"><!----></div>
[8] <a href="http://www.lug-erding.de/artikel/HTTPundSquid.html"><tt style="font-size: 1.3em;">http://www.lug-erding.de/artikel/HTTPundSquid.html</tt></a><br />

<div class="p"><!----></div>
[9] <a href="http://www.pro-linux.de/files/webzugriff/lug2.pcap"><tt style="font-size: 1.3em;">http://www.pro-linux.de/files/webzugriff/lug2.pcap</tt></a><br />

<div class="p"><!----></div>
[10] <a href="http://www.rtl2.de/"><tt style="font-size: 1.3em;">http://www.rtl2.de/</tt></a><br />

<div class="p"><!----></div>
            
<table border="1">
<tr><td colspan="1" align="center"><font size="+0"><b>Autoreninformation</b></font></td></tr>
<tr><td align="left"><b>Dirk Geschke</b>&nbsp;(<a href="http://www.lug-erding.de/">Webseite</a>)
ist Gründer der Linux User Group Erding. Im Rahmen von Gesprächen
bei der LUG offenbarten sich einige Verständnislücken über die Funktion von 
Netzwerken und auch was bei einem Webzugriff tatsächlich alles passiert. 
Aus einem Vortrag zu diesem Thema ist dieser Artikel entstanden.
</td></tr>
<tr><td align="left">    </td></tr></table>



<div class="p"><!----></div>
                <a href="http://www.freiesmagazin.de/comment/reply/236?edit[subject]=Webzugriff#comment-form"><i>Diesen Artikel kommentieren</i></a><br /><br />
        <a href="freiesMagazin-2011-08-bilder.html#index">Zum Index</a><br /><hr />

<div class="p"><!----></div>
<h1><font color="#595959"><a name="11_08_compositing">Compositing nach X11 – KDE Plasma auf dem Weg nach Wayland</a><a name="11_08_compositing">
</a></font></h1>von Martin Gräßlin

<div class="p"><!----></div>
        
<div class="p"><!----></div>

<div class="p"><!----></div>

<div class="p"><!----></div>
<b>W</b><b>ayland &nbsp;<a href="http://wayland.freedesktop.org">[1]</a> gilt als möglicher Nachfolger der X11
Architektur. Die ersten Projekte, wie z.&nbsp;B. MeeGo, planen Veröffentlichungen mit
Wayland und auch die großen traditionellen Desktopumgebungen planen die 
Unterstützung dieser neuen Architektur. In diesem Artikel wird die Transition 
auf Wayland am Fallbeispiel der KDE Plasma Workspaces betrachtet. Der Inhalt 
dieses Artikels wurde auch am diesjährigen Desktop Summit in Berlin als 
Präsentation&nbsp;<a href="https://desktopsummit.org/program/sessions/compositing-after-x-kwin-road-wayland">[2]</a>
vorgestellt.</b>

<div class="p"><!----></div>

<h2>Die X11 Architektur</h2>

<div class="p"><!----></div>
In <b><font color="#595959">freies</font></b><font color="#FF630A">Magazin</font> 03/2011&nbsp;<a href="http://www.freiesmagazin.de/freiesMagazin-2011-03">[3]</a>
wurde bereits die Architektur von X11 beleuchtet und warum es für die Zukunft nur die Lösung 
eines X freien Systems geben kann. X11&nbsp;<a href="http://de.wikipedia.org/wiki/X_Window_System">[4]</a>
ist eine Technologie aus den 80er 
Jahren des letzten Jahrhunderts, lange bevor irgend jemand an Anwendungsfälle 
wie Compositing&nbsp;<a href="http://en.wikipedia.org/wiki/Compositing_manager">[5]</a> gedacht hat.

<div class="p"><!----></div>
In einer modernen X11-Architektur, wie sie heute von allen Desktopumgebungen verwendet wird (siehe Skizze rechts), ist die Funktionalität 
des X-Servers auf die eines Proxys beschränkt. Der X-Server ist nicht mehr für 
das Zeichnen der Fenster zuständig. Dies wird komplett vom Compositor und 
Fenstermanager (z.&nbsp;B. KWin) übernommen. In der X11-Architektur kann der
Compositor nicht direkt mit den X-Clients (den Fenstern) sprechen – alle Informationen 
werden durch den X-Server geleitet.

<div class="p"><!----></div>
<img border="0" src="freiesMagazin-2011-08-bilder-Dateien/x-architecture.png" /><br /><em>Moderne X11 Architektur: X-Server als Proxy zwischen Compositor und Fenstern.</em><br />

<div class="p"><!----></div>
Diese Architektur schränkt die Möglichkeiten stark ein und erschwert die 
korrekte Implementierung. So werden zum Beispiel Maus- und Tastaturereignisse 
nicht durch den Compositor geleitet. Diese als „Input Redirection“ bekannte 
Funktionalität wäre aber sinnvoll, denn eigentlich entscheidet der Compositor, 
welches Fenster die Ereignisse erhalten soll. Insbesondere sind interaktive, 
transformierte Umgebungen dadurch nicht möglich. Man denke dabei an so triviale
Anwendungsfälle wie ein Anwendungsstarter in einer Übersicht der virtuellen 
Desktops oder einem auf Lagesensor reagierenden Invertieren des Bildes bei einem 
Tablet (Beispiel-Video:&nbsp;<a href="http://www.youtube.com/watch?v=BrK4c7iFJLs">[6]</a>).

<div class="p"><!----></div>
    Generell entsteht ein Problem dadurch, dass der X-Server aus historischen
Gründen noch für viele Funktionen verantwortlich ist, die eigentlich in den 
Compositor gehören. So pflegt der X-Server eine eigene „Stacking Order“ 
(Anordnung der Fenster&nbsp;<a href="http://en.wikipedia.org/wiki/Stacking_window_manager">[7]</a>),
obwohl alleine der Compositor über diese entscheidet.
Der Compositor wäre eigentlich dafür verantwortlich,
Richtlinien umzusetzen (z.&nbsp;B. Anordnung der Fenster, welches Fenster ist aktiv),
kann dieses aber nicht, da die Funktion in X implementiert ist und jeder Client 
manuell den Zustand ändern kann. Dadurch entsteht ein dauernder Kampf zwischen
Fenstermanager und Fenster, wie das Fenster aussehen soll.
    

<div class="p"><!----></div>

<h2>Die Wayland-Architektur</h2>

<div class="p"><!----></div>
In der Wayland-Architektur ist der Proxy zwischen Anwendungen und Compositor 
entfernt. Der Compositor sitzt direkt auf der Hardware und nutzt diese zum Zeichnen 
und zum Empfangen von Eingabeereignissen. 
Es ist die Aufgabe des Compositors, die Eingabeereignisse an die Wayland-Clients 
(Fenster) weiterzuleiten. Die in der alten Architektur fehlende Input Redirection 
ist nun ein direkter Bestandteil der Architektur.

<div class="p"><!----></div>
    <img border="0" src="freiesMagazin-2011-08-bilder-Dateien/wayland-architecture.png" /><br /><em>Mit Wayland wandert der Compositor in das Zentrum.</em><br />

<div class="p"><!----></div>
Die Verbindung zwischen Clients und Compositor ist auch denkbar einfach gehalten. 
Zur Kommunikation wird ein Unix-Socket verwendet und über diesen Socket werden
Bufferinformationen ausgetauscht. Die Clients zeichnen in einen Buffer und 
informieren den Compositor über Änderungen zum vorhergehenden Buffer 
(Frame/Bild). Der Compositor wiederum informiert den Client, wenn ein Frame 
gezeichnet wurde, sodass Compositor und Clients synchron zeichnen können.

<div class="p"><!----></div>
Ansonsten ist die Interaktion zwischen Clients und Compositor (noch) sehr gering. 
Es existiert noch kein Fenstermanagement-Protokoll und es ist fraglich, ob es 
jemals eines geben wird. Mit Wayland sind die Richtlinien zum Verwalten der 
Fenster komplett in den Compositor verlagert, wodurch vieles, was X11 
ermöglichte, einfach überflüssig wird. Als Beispiel kann man den Zustand 
„minimiert“ verwenden: für den Client ist es eigentlich egal ob er minimiert 
ist, die einzige wichtige Information ist, wann er zuletzt gezeichnet wurde, was 
er sowieso erhält.

<div class="p"><!----></div>

<h2>Wayland Entwicklungsstand</h2>

<div class="p"><!----></div>
Aktuell ist die Entwicklung noch nicht so weit fortgeschritten, dass man an einen 
produktiven Einsatz auf einem Desktop denken kann. Vieles ist noch nicht 
spezifiziert oder noch nicht implementiert. Kaum ein aktuell verfügbares Toolkit 
unterstützt bereits Wayland. Die wichtigen Komponenten wie Unterstützung in den 
Grafikkartentreibern haben erst mit Mesa 7.11 (Release erfolgte im Juli) Einzug
gehalten. Ohne diese ist der Einsatz unter Wayland noch undenkbar. Unterstützung 
in Qt wird ab Version 4.8 verfügbar sein, dies erfordert aber auch, dass 
Distributionen Wayland standardmäßig paketieren (was bisher noch nicht der Fall 
ist).

<div class="p"><!----></div>
Im aktuellen Entwicklungsstand muss eine Anwendung über
OpenGL ES 2.0&nbsp;<a href="http://www.khronos.org/opengles/">[8]</a> zeichnen; „normales“
OpenGL&nbsp;<a href="http://www.opengl.org/">[9]</a> ist noch nicht vorgesehen, da dieses eine neue 
Schnittstelle ähnlich GLX&nbsp;<a href="http://de.wikipedia.org/wiki/GLX">[10]</a> benötigen würde.
Der Einsatz von GLX wird allgemein abgelehnt, da dies wieder eine X Abhängigkeit 
mit sich bringen würde. Dies bedeutet natürlich einen erheblichen Verlust an 
Funktionalität und reine OpenGL Anwendungen können nicht trivial einfach auf 
Wayland portiert werden.

<div class="p"><!----></div>
Erschwerend kommt hinzu, dass bisher nur die freien Treiber das Projekt Wayland 
in Angriff genommen haben. Ob z.&nbsp;B. NVIDIA daran arbeitet, Wayland zu unterstützen,
ist bisher nicht bekannt&nbsp;<a href="http://www.nvnews.net/vbulletin/showthread.php?p=2343452#post2343452">[11]</a>.
Nouveau&nbsp;<a href="http://nouveau.freedesktop.org/wiki/">[12]</a> ist leider kein allgemein einsetzbarer
Ersatz für den proprietären Treiber. Man denke hier an Anwendungsfälle wie 
garantierte Abwärtskompatibilität, Energieverwaltung, die 
Programmierschnittstelle CUDA&nbsp;<a href="http://de.wikipedia.org/wiki/Compute_Unified_Device_Architecture">[13]</a> und
patentierte Technologien, die nur im proprietären Treiber verfügbar sind.

<div class="p"><!----></div>
Die für die Zukunft angedachte Möglichkeit einen X-Server unter Wayland zu 
betreiben, existiert auch nur in Gedanken. Ein kompletter Wechsel auf Wayland ist 
daher aktuell nur möglich, wenn man in Kauf nimmt, dass keine X-Anwendung mehr 
funktioniert. Dies ist ein akzeptabler Preis für mobile Einsatzgebiete wie  
MeeGo&nbsp;<a href="https://meego.com/">[14]</a> oder KDE Plasma Active&nbsp;<a href="http://community.kde.org/Plasma/Active">[15]</a>.

<div class="p"><!----></div>

<h2>X-Server bleibt erhalten</h2>

<div class="p"><!----></div>
Auf den Plattformen Desktop und Netbook kann von einem reinen Wayland-System daher 
auf absehbare Zeit keine Rede sein. Es gibt zu viele Anwendungen, die auf 
Legacy-Unterstützung angewiesen sind und bei denen auch keine Portierung auf Wayland zu 
erwarten ist.

<div class="p"><!----></div>
Gerade auch die Tatsache, dass Wayland nicht auf allen Plattformen funktioniert 
(siehe NVIDIA Treiber) macht deutlich, dass für die großen Desktopumgebungen 
wie die KDE Plasma Workspaces&nbsp;<a href="http://kde.org/workspaces/">[16]</a> vorerst X11 die erste
Wahl bleiben muss. Eine zu frühe Umstellung auf Wayland würde Regressionen mit 
sich bringen und für die KDE Plasma Entwickler ist es das höchste Gebot, den 
Desktop nicht zu zerstören.

<div class="p"><!----></div>
Auch nach einer erfolgten Umstellung auf Wayland muss die X11 Unterstützung 
erhalten bleiben. Auch wenn die meisten Anwender Wayland verwenden können, wird 
es auf lange Zeit noch Anwendungsfälle geben, die einen X-Server erfordern. Die 
Desktopumgebungen müssen daher in ihrer Entwicklung die Kompatibilität mit X 
berücksichtigen. Wird die Abwärtskompatibilität nicht berücksichtigt, so 
könnte im schlimmsten Fall Wayland von den Nutzern abgelehnt werden und sie 
bleiben bei X11.

<div class="p"><!----></div>

<h2>Umstellung auf Wayland</h2>

<div class="p"><!----></div>
Für die KDE Plasma Entwickler gibt es mehrere Möglichkeiten wie man Wayland 
angehen könnte. Diese sind:

<div class="p"><!----></div>

<ul>
<li> das Ignorieren von Wayland;
<div class="p"><!----></div>
</li>

<li> das Ignorieren von X11;
<div class="p"><!----></div>
</li>

<li> einen neuen, auf Wayland basierten Compositor und eine Desktop Shell parallel entwickeln;
<div class="p"><!----></div>
</li>

<li> die schrittweise Migration auf Wayland.

<div class="p"><!----></div>
</li>
</ul>

<div class="p"><!----></div>
Offensichtlich sind die ersten zwei Optionen nicht praktikabel. Wie in der 
Einleitung gezeigt, bietet Wayland eine verbesserte Architektur, von der die KDE 
Plasma Workspaces auch profitieren sollen. Die zweite Option ist nicht möglich, 
da wie im letzten Abschnitt gezeigt, der X-Server uns auf absehbare Zeit erhalten 
bleibt. Eine Einstellung der Entwicklung für X11 würde zu großen 
Akzeptanzproblemen unter den Nutzern führen.

<div class="p"><!----></div>
Auch die dritte Option ist nur schwer umzusetzen. Natürlich mag es verlockend 
klingen, eine alte Codebasis, zugeschnitten für ein nun obsoletes Fenstersystem, zu 
verwerfen. Jedoch stecken in KWin mehr als 12 Jahre Entwicklung und 
Fenstermanagement-Expertise. Durch Wayland ändert sich das grundlegende 
Verhalten jedoch nicht: ein Fenster ist immer noch ein Fenster. Zieht man noch 
die verfügbaren Entwicklerresourcen hinzu, wird offensichtlich, dass es nicht 
möglich ist, gleichzeitig an den X11 Workspaces zu entwickeln und nebenher noch 
einen neuen Wayland Workspace zu entwickeln.

<div class="p"><!----></div>
    Die zweite und dritte Option kommen auch mit dem großen Problem, dass es einen 
Tag X gibt an dem die allgemeine Umstellung von X11 auf Wayland erfolgen würde. 
Dies hätte vermutlich ähnliche Auswirkungen wie die Umstellung von KDE 3.5 auf 
KDE Plasma Workspaces. Vieles wäre unfertig und schlecht getestet, die Akzeptanz 
der Nutzer vermutlich eher schlecht. Nutzer würden lieber auf X11 bleiben, womit 
nichts gewonnen wäre.

<div class="p"><!----></div>

<h2>Die Umstellung der KDE Plasma Workspaces</h2>

<div class="p"><!----></div>
Wie aus dem letzten Abschnitt ersichtlicht werden durfte, planen die KDE Plasma 
Entwickler keine direkte Umstellung auf Wayland. Die Portierung wird in drei 
Phasen erfolgen:

<div class="p"><!----></div>

<ul>
<li> Unterstützung von Wayland Clients unter X11;

<div class="p"><!----></div>
</li>
</ul>

<div class="p"><!----></div>
        
<ul>
<li> Wayland Clients unter Wayland;
<div class="p"><!----></div>
</li>

<li> X11 Clients unter Wayland.

<div class="p"><!----></div>
</li>
</ul>

<div class="p"><!----></div>
Aktuell arbeiten die Entwickler an der ersten Phase. Der Compositor und Fenstermanager KWin wurde um erste  Wayland-Unterstützung 
erweitert&nbsp;<a href="http://blog.martin-graesslin.com/blog/2011/06/discovering-a-new-world/">[17]</a>. Der
Compositor kann im OpenGL ES 2.0/EGL-Backend Wayland Clients verwalten und in den 
Scenegraph integrieren. Jedoch hat jeder Wayland Client noch eine X11-Abhängigkeit. Jeder 
Client muss mit einer X11-Fensterdekoration versehen werden, um Eingabeereignisse 
im Compositor abfangen zu können (zur Erinnerung: X11 bietet keine Input
    Redirection) und an den Client weiterzuleiten.

<div class="p"><!----></div>
<img border="0" src="freiesMagazin-2011-08-bilder-Dateien/x-architecture-wayland.png" /><br /><em>Wayland Clients unter einem X11 Compositor.</em><br />

<div class="p"><!----></div>
<img border="0" src="freiesMagazin-2011-08-bilder-Dateien/present-windows-x-wayland.jpg" /><br /><em>Wayland Fenster (Zahnräder) wie ein normales X11 Fenster in den Compositor integriert.</em><br />

<div class="p"><!----></div>
Aber nicht nur der Compositor muss Unterstützung erhalten. Auch der Plasma 
Desktop muss initialen Support erhalten, um z.&nbsp;B. Wayland Clients im Tasks Applet
anzeigen zu können. Viele dieser Funktionen sind X11 spezifisch und müssen nun 
in generische Funktionen umgewandelt werden: die X11 Funktionalität muss in ein 
Backend ausgelagert werden.

<div class="p"><!----></div>
Hierbei ist es wichtig zu wissen, dass im Gegensatz zu den KDE-Anwendungen 
(welche auch auf Microsoft Windows und Mac OS X portiert sind) der Workspace nie 
dazu vorgesehen war, unter einem anderen Fenstersystem als X11 zu funktionieren. Dank 
einer guten Abstraktionsschicht ist es jedoch gelungen, den Plasma-Desktop auch 
auf Microsoft Windows zu portieren und die ersten Ergebnisse der KWin-Portierung 
zeigen, dass auch dieses Projekt machbar ist. Hierbei wird das Verwalten der 
Fenster abstrahiert und die eigentliche Interaktion mit den Fenstern in 
Fenstersystem-spezifische Backends verlagert, ähnlich der bereits verwendeten 
Backend-Architektur im Compositing-Bereich&nbsp;<a href="http://blog.martin-graesslin.com/blog/2011/05/the-compositing-modes-of-kde-plasma-workspaces-explained/">[18]</a> (KWin unterstützt XRender, OpenGL 1.x/GLX, OpenGL
2.x/GLX und OpenGL ES 2.0/EGL als Backends).

<div class="p"><!----></div>
Bei der zweiten Phase geht es darum, einen Workspace ohne X11 
Laufzeitabhängigkeit zu erstellen. Dieser würde dann ausschließlich Wayland 
Clients verwalten können. Dieser Entwicklungsschritt baut teilweise auf der 
ersten Phase auf.
Voraussetzung hierfür ist, dass
Wayland-Fenster bereits verwaltet und gezeichnet werden
können. Nun ist es erforderlich, direkt auf der Hardware zum Rendern aufzusetzen
und Inputereignisse weiterzuleiten, ohne den X-Server dazwischen zu haben.

<div class="p"><!----></div>
Die Entwicklung der Phase 1 und 2 werden teilweise parallel erfolgen 
können. Auch hier hat bereits die Arbeit begonnen: mit Hilfe eines Google Summer 
of Code Projekts&nbsp;<a href="http://www.google-melange.com/gsoc/project/google/gsoc2011/aarlt/12001">[19]</a> wird der
KWin Quellcode abstrahiert und die X11 Interaktion in ein Backend verlagert mit 
dem Ziel, Wayland Clients ohne X11 Abhängigkeit zu verwalten. 
<div class="p"><!----></div>
Die dritte Ausbaustufe ist erst von Interesse, wenn Phase eins und zwei umgesetzt 
sind. Hierbei geht es im Prinzip um ein „Umdrehen“ der ersten Phase. Anstatt 
Wayland-Clients unter X11, sollen nun X11-Clients unter Wayland verwaltet werden. 
Wie dieses umgesetzt werden kann,
    
ist noch nicht klar. Am wahrscheinlichsten 
sind die Optionen, das X11-Protokoll im Compositor umzusetzen oder 
einen „root-less“ X-Server zu starten.

<div class="p"><!----></div>
<img border="0" src="freiesMagazin-2011-08-bilder-Dateien/wayland-architecture-rootless-x.png" /><br /><em>X-Server unter einem Wayland Compositor.</em><br />

<div class="p"><!----></div>
Ziel der gesamten Entwicklung ist es, dass der Anwender niemals weiß, ob er 
unter X11 oder Wayland arbeitet und ob ein Fenster nun ein X11 oder Wayland 
Fenster ist. Von der Benutzung her sollen sich die Systeme nicht unterscheiden. 
Erst nach Abschluss der zweiten Phase kann man beginnen, neue, nur 
Wayland-spezifische, Erweiterungen einzubauen.

<div class="p"><!----></div>

<h2>Ausblick</h2>

<div class="p"><!----></div>
An dieser Stelle ist es nun angebracht, einen Ausblick zu liefern, wann die 
Anwender mit Wayland arbeiten werden können. Dies ist natürlich sehr schwierig. 
Wayland ist immer noch eine sehr junge Technologie und mögliche Probleme, welche 
die Entwicklung behindern könnten, sind noch nicht abzusehen.

<div class="p"><!----></div>
Grundsätzlich plant die KDE Plasma Community, wie am Desktop Summit in Berlin 
vorgestellt, im Winterrelease 2012 die Phase eins bereits als Entwicklervorschau 
zu integrieren. Das Ziel ist es, Anwendungs- und Workspaceentwicklern etwas in die 
Hand zu geben, um ihre Anwendung unter Wayland zu testen. Natürlich ist das auch 
für interessierte Anwender eine Option, um sich früh mit den neuen 
Möglichkeiten vertraut zu machen, jedoch wird vom produktiven Einsatz von 
Wayland Clients zu diesem frühen Zeitpunkt abgeraten und die Entwickler werden 
noch keine Bugreports dafür annehmen.

<div class="p"><!----></div>

<div class="p"><!----></div>
Die zweite Ausbaustufe wird parallel gestartet und zielt auf die KDE Plasma 
Active Initative. Hierzu hatten die Entwickler bei ihrem Tokamak V
Sprint&nbsp;<a href="http://vizzzion.org/blog/2011/04/tokamak-in-nijmegen/">[20]</a> bereits Ende April sich  
als Ziel gesetzt, das zweite Release auf Wayland aufzubauen. Als mobile Plattform 
ist genauso wie für MeeGo der Verlust von, unter X11 bekannter, Funktionalität 
kein Problem und dieser Formfaktor profitiert am meisten durch ein Ausschalten 
des X-Servers.

<div class="p"><!----></div>

<div class="p"><!----></div>
Somit wird nach aktueller Planung das Sommerrelease 2012 es ermöglichen, einen 
X-freien Workspace zu betreiben. Jedoch wird dieser auf dem Desktop kaum einsetzbar 
sein, da noch zu viel fehlen wird. Wie lange es tatsächlich dauern wird, bis ein 
komplett einsetzbarer Wayland Desktop zur Verfügung steht, ist aktuell noch 
nicht absehbar.

<div class="p"><!----></div>

<div class="p"><!----></div>
    <font color="#595959"><font size="+1">Links</font></font><br />
        
[1] <a href="http://wayland.freedesktop.org"><tt style="font-size: 1.3em;">http://wayland.freedesktop.org</tt></a><br />

<div class="p"><!----></div>
[2] <a href="https://desktopsummit.org/program/sessions/compositing-after-x-kwin-road-wayland"><tt style="font-size: 1.3em;">https://desktopsummit.org/program/sessions/compositing-after-x-kwin-road-wayland</tt></a><br />

<div class="p"><!----></div>
[3] <a href="http://www.freiesmagazin.de/freiesMagazin-2011-03"><tt style="font-size: 1.3em;">http://www.freiesmagazin.de/freiesMagazin-2011-03</tt></a><br />

<div class="p"><!----></div>
[4] <a href="http://de.wikipedia.org/wiki/X_Window_System"><tt style="font-size: 1.3em;">http://de.wikipedia.org/wiki/X_Window_System</tt></a><br />

<div class="p"><!----></div>
[5] <a href="http://en.wikipedia.org/wiki/Compositing_manager"><tt style="font-size: 1.3em;">http://en.wikipedia.org/wiki/Compositing_manager</tt></a><br />

<div class="p"><!----></div>
[6] <a href="http://www.youtube.com/watch?v=BrK4c7iFJLs"><tt style="font-size: 1.3em;">http://www.youtube.com/watch?v=BrK4c7iFJLs</tt></a><br />

<div class="p"><!----></div>
[7] <a href="http://en.wikipedia.org/wiki/Stacking_window_manager"><tt style="font-size: 1.3em;">http://en.wikipedia.org/wiki/Stacking_window_manager</tt></a><br />

<div class="p"><!----></div>
[8] <a href="http://www.khronos.org/opengles/"><tt style="font-size: 1.3em;">http://www.khronos.org/opengles/</tt></a><br />

<div class="p"><!----></div>
[9] <a href="http://www.opengl.org/"><tt style="font-size: 1.3em;">http://www.opengl.org/</tt></a><br />

<div class="p"><!----></div>
[10] <a href="http://de.wikipedia.org/wiki/GLX"><tt style="font-size: 1.3em;">http://de.wikipedia.org/wiki/GLX</tt></a><br />

<div class="p"><!----></div>
[11] <a href="http://www.nvnews.net/vbulletin/showthread.php?p=2343452#post2343452"><tt style="font-size: 1.3em;">http://www.nvnews.net/vbulletin/showthread.php?p=2343452#post2343452</tt></a><br />

<div class="p"><!----></div>
[12] <a href="http://nouveau.freedesktop.org/wiki/"><tt style="font-size: 1.3em;">http://nouveau.freedesktop.org/wiki/</tt></a><br />

<div class="p"><!----></div>
[13] <a href="http://de.wikipedia.org/wiki/Compute_Unified_Device_Architecture"><tt style="font-size: 1.3em;">http://de.wikipedia.org/wiki/Compute_Unified_Device_Architecture</tt></a><br />

<div class="p"><!----></div>
[14] <a href="https://meego.com/"><tt style="font-size: 1.3em;">https://meego.com/</tt></a><br />

<div class="p"><!----></div>
[15] <a href="http://community.kde.org/Plasma/Active"><tt style="font-size: 1.3em;">http://community.kde.org/Plasma/Active</tt></a><br />

<div class="p"><!----></div>
[16] <a href="http://kde.org/workspaces/"><tt style="font-size: 1.3em;">http://kde.org/workspaces/</tt></a><br />

<div class="p"><!----></div>
[17] <a href="http://blog.martin-graesslin.com/blog/2011/06/discovering-a-new-world/"><tt style="font-size: 1.3em;">http://blog.martin-graesslin.com/blog/2011/06/discovering-a-new-world/</tt></a><br />

<div class="p"><!----></div>
[18] <a href="http://blog.martin-graesslin.com/blog/2011/05/the-compositing-modes-of-kde-plasma-workspaces-explained/"><tt style="font-size: 1.3em;">http://blog.martin-graesslin.com/blog/2011/05/the-compositing-modes-of-kde-plasma-workspaces-explained/</tt></a><br />

<div class="p"><!----></div>
[19] <a href="http://www.google-melange.com/gsoc/project/google/gsoc2011/aarlt/12001"><tt style="font-size: 1.3em;">http://www.google-melange.com/gsoc/project/google/gsoc2011/aarlt/12001</tt></a><br />

<div class="p"><!----></div>
[20] <a href="http://vizzzion.org/blog/2011/04/tokamak-in-nijmegen/"><tt style="font-size: 1.3em;">http://vizzzion.org/blog/2011/04/tokamak-in-nijmegen/</tt></a><br />

<div class="p"><!----></div>
            
<table border="1">
<tr><td colspan="1" align="center"><font size="+0"><b>Autoreninformation</b></font></td></tr>
<tr><td align="left"><b>Martin Gräßlin</b>&nbsp;(<a href="http://blog.martin-graesslin.com/blog/">Webseite</a>)
arbeitet als KWin Maintainer aktiv an der Portierung von KWin
nach Wayland und hielt auf dem Desktop Summit 2011 einen Vortrag zu diesem Thema.
</td></tr>
<tr><td align="left">    </td></tr></table>



<div class="p"><!----></div>

<div class="p"><!----></div>
            <a href="http://www.freiesmagazin.de/comment/reply/236?edit[subject]=Compositing nach X11#comment-form"><i>Diesen Artikel kommentieren</i></a><br /><br />
        <a href="freiesMagazin-2011-08-bilder.html#index">Zum Index</a><br /><hr />

<div class="p"><!----></div>
<h1><font color="#595959"><a name="11_08_kernel">Der Juli im Kernelrückblick</a><a name="11_08_kernel">
</a></font></h1>von Mathias Menzer

<div class="p"><!----></div>
        <b>B</b><b>asis aller Distributionen ist der Linux-Kernel, der fortwährend weiterentwickelt wird. Welche Geräte in einem halben Jahr unterstützt werden und welche Funktionen neu hinzukommen, erfährt man, wenn man den aktuellen Entwickler-Kernel im Auge behält.</b>

<div class="p"><!----></div>

<div class="p"><!----></div>
Als weiter Wegpunkt auf dem Weg zu Kernel 3.0 wurde Anfang Juli -rc6&nbsp;<a href="https://lkml.org/lkml/2011/7/4/320">[1]</a> veröffentlicht. Ein großer Anteil der enthaltenen Änderungen betrafen den neuen Treiber isci für Intels C600 Chipsatz, der im Zusammenspiel mit Xeon-Prozessoren zum Einsatz kommt. Torvalds rechnete nicht damit, dass dieser Treiber Probleme machen sollte und dachte auch schon darüber nach, das Release folgen zu lassen. Dazu kam es dann jedoch erst einmal nicht, denn mit -rc7&nbsp;<a href="https://lkml.org/lkml/2011/7/11/427">[2]</a> folgte eine weitere Vorabversion, da die Änderungen an RCU (Read-Copy-Update), das gleichzeitige Zugriffe auf Speicherbereiche regeln soll, immer noch Probleme im Zusammenspiel mit dem Scheduler aufwiesen. Diese konnten (hoffentlich) beseitigt werden, sodass Torvalds schließlich den Kernel 3.0&nbsp;<a href="https://lkml.org/lkml/2011/7/21/455">[3]</a> freigab.

<div class="p"><!----></div>

<h2>Linux 3.0</h2>
Während der Entwicklungsphase hat Torvalds es oft genug erwähnt, nun ist es offensichtlich: Linux 3.0 sticht nicht durch irgendwelche besonderen Funktionen heraus, auch wurde diesmal nicht mit alten Konzepten gebrochen, wenn man von der dreistelligen Versionsnummer einmal absieht. Den Vergleich mit 2.6.38 samt dessen Wunder-Patch oder  mit 2.6.37, der erstmals ohne den Big Kernel Lock auskam, oder mit 2.6.29, bei dem erstmals Kernel Modesetting eingeführt wurde, kann der neue Kernel nicht standhalten, dafür verlief die Entwicklung jedoch recht ruhig, was auf einen guten Kernel mit wenig Ausbesserungen im Nachgang hoffen lässt. Daneben hat 3.0 auch einen neuen Namen erhalten: „Sneaky Weasel“, also gewieftes – oder auch hinterlistiges – Wiesel.

<div class="p"><!----></div>
Ein paar Neuerungen hat jedoch auch auch Linux 3.0 parat: So defragmentiert Btrfs nun seine Partitionen automatisch. Dies ist notwendig, da Btrfs als Copy-on-Write-Dateisystem Daten nicht an die alte Stelle der Partition zurück- und damit überschreibt, sondern auf einem freien oder zumindest nicht mehr genutzten Teil ablegt. Die dadurch entstehende Verteilung eigentlich zusammengehöriger Daten, Fragmentierung genannt, wirkt sich auf die Geschwindigkeit beim Lesen des Datenträgers negativ aus, wogegen die Defragmentierung hilft. Dies kann manuell angestartet werden oder Mittels der Option <b><tt style="font-size: 1.3em;">autodefrag</tt></b> beim Einbinden der Partition während der Nutzung automatisch erfolgen. Weitere Verbesserungen bei Btrfs sind die Integritätsprüfung des Dateisystems mittels Scrubbing und schnelleres Löschen und Anlegen von Dateien. Netzwerkkommunikation kann mittels des neuen Syscalls <b><tt style="font-size: 1.3em;">sendmmsg()</tt></b> beschleunigt werden. Dabei reicht der eine Aufruf aus, um eine Menge an Daten zu versenden, für die ansonsten mehrere Aufrufe von <b><tt style="font-size: 1.3em;">sendmsg()</tt></b> notwendig wären. Das Konzept folgt <b><tt style="font-size: 1.3em;">recvmmsg()</tt></b>, das bereit in Kernel 2.6.33 eingeführt wurde.

<div class="p"><!----></div>
Eine lange Geschichte hat der Paravirtualisierer Xen&nbsp;<a href="https://secure.wikimedia.org/wikipedia/de/wiki/Xen">[4]</a> aufzuweisen. Nachdem bereits seit Jahren Distributoren ihre Kernel entsprechend modifizieren oder angepasste Kernel in ihren Quellen anbieten, kann Linux nun auch von Haus aus als Host-System arbeiten, die Unterstützung für die  privilegierte Domäne, im Xen-Jargon dom0 genannt, ist nun endlich in den Linux-Kernel eingezogen. 

<div class="p"><!----></div>
Fehlersuche im Netzwerk erfordert oftmals Zugriff auf Netzwerkpakete auf unterster Ebene im System, direkt bevor Bits und Bytes in elektrische Signale auf dem Netzwerkkabel gewandelt werden. Hierzu dient BPF (Berkeley Packet Filter&nbsp;<a href="https://secure.wikimedia.org/wikipedia/de/wiki/Berkeley_Filter">[5]</a>), der das heraussuchen der gewünschten Netzwerkpakete übernimmt, als Schnittstelle für entsprechende anwenderseitige Werkzeuge wie tcpdump. Dabei erhält BPF Anweisungen zum Filtern in einer eigenen Syntax. BPF hat nun einen Compiler erhalten, der die an BPF übergebenen Anweisungen beim Aufruf in Maschinen-Code (bislang nur für die x86-64-Architektur) umsetzt, welcher vom System schneller abgearbeitet werden kann als der bisherige BPF-Code und so speziell auf netzwerkseitig gut ausgelasteten Systemen eine Verbesserung der Leistung bringt.

<div class="p"><!----></div>
Eine weitere kleine Neuerung ist Wake-on-WLAN, womit der PC aus dem Ruhezustand aus der Ferne geweckt werden kann. Hierbei bleibt der WLAN-Adapter aktiv und lauscht weiterhin auf eingehende Pakete. Das Ping-Kommando, mittels dem die Netzwerkverbindung zu einem anderen Rechner geprüft werden kann, kann nun auch ohne root-Rechte genutzt werden. Hierfür wurde ein neues Protokoll für Sockets eingeführt, das nur ICMP-Nachrichten verarbeiten kann. Natürlich muss das Ping-Kommando entsprechend angepasst sein, um Nutzen aus dieser Änderung ziehen zu können.

<div class="p"><!----></div>
Wie immer sind die Änderungen auf Kernel Newbies in englischer Sprache übersichtlich aufgeführt&nbsp;<a href="http://kernelnewbies.org/LinuxChanges">[6]</a>.

<div class="p"><!----></div>

<div class="p"><!----></div>

<div class="p"><!----></div>
    <font color="#595959"><font size="+1">Links</font></font><br />
        
[1] <a href="https://lkml.org/lkml/2011/7/4/320"><tt style="font-size: 1.3em;">https://lkml.org/lkml/2011/7/4/320</tt></a><br />

<div class="p"><!----></div>
[2] <a href="https://lkml.org/lkml/2011/7/11/427"><tt style="font-size: 1.3em;">https://lkml.org/lkml/2011/7/11/427</tt></a><br />

<div class="p"><!----></div>
[3] <a href="https://lkml.org/lkml/2011/7/21/455"><tt style="font-size: 1.3em;">https://lkml.org/lkml/2011/7/21/455</tt></a><br />

<div class="p"><!----></div>
[4] <a href="https://secure.wikimedia.org/wikipedia/de/wiki/Xen"><tt style="font-size: 1.3em;">https://secure.wikimedia.org/wikipedia/de/wiki/Xen</tt></a><br />

<div class="p"><!----></div>
[5] <a href="https://secure.wikimedia.org/wikipedia/de/wiki/Berkeley_Filter"><tt style="font-size: 1.3em;">https://secure.wikimedia.org/wikipedia/de/wiki/Berkeley_Filter</tt></a><br />

<div class="p"><!----></div>
[6] <a href="http://kernelnewbies.org/LinuxChanges"><tt style="font-size: 1.3em;">http://kernelnewbies.org/LinuxChanges</tt></a><br />

<div class="p"><!----></div>
    
<div class="p"><!----></div>
        
<table border="1">
<tr><td colspan="1" align="center"><font size="+0"><b>Autoreninformation</b></font></td></tr>
<tr><td align="left"><b>Mathias Menzer</b>&nbsp;(<a href="http://www.menzer.net/">Webseite</a>)
hält einen Blick auf die Entwicklung des Linux-Kernels. Dafür erfährt er frühzeitig Details über neue Treiber und interessante Funktionen.
</td></tr>
<tr><td align="left">    </td></tr></table>



<div class="p"><!----></div>
                <a href="http://www.freiesmagazin.de/comment/reply/236?edit[subject]=Der Juli im Kernelr%C3%BCckblick#comment-form"><i>Diesen Artikel kommentieren</i></a><br /><br />
        <a href="freiesMagazin-2011-08-bilder.html#index">Zum Index</a><br /><hr />

<div class="p"><!----></div>
                    

<div class="p"><!----></div>
<h1><font color="#595959"><a name="11_08_perl1">Perl-Tutorium: Teil 1 – Das erste Programm</a><a name="11_08_perl1">
</a></font></h1>von Herbert Breunung

<div class="p"><!----></div>
        
<div class="p"><!----></div>
<b>N</b><b>achdem im vorigen Teil (<b><font color="#595959">freies</font></b><font color="#FF630A">Magazin</font> 07/2011&nbsp;<a href="http://www.freiesmagazin.de/freiesMagazin-2011-07">[1]</a>)
die Perl-Geschichte, Perl-Philosophie und
Gemeinschaft der Nutzer vorgestellt wurde, beginnt jetzt die Reise 
zum ersten eigenen Perl-Programm.
Nachdem geprüft ist, ob alle 
wichtigen Werkzeuge funktionstüchtig und griffbereit verpackt sind, 
geht es zum ersten Etappenziel: Skalare Variablen und einfache IO. 
Die weitere Route darf durch die Kommentarfunktion am Ende des 
Artikels mitbestimmt werden.</b>

<div class="p"><!----></div>

<h2>Wir brauchen Perl und ein Ziel</h2>

<div class="p"><!----></div>
Wer dieses Magazin liest, tut das wohl vor seinem Bildschirm, der 
vom Linux seiner Wahl mit Pixeln versorgt wird. Selbst Mac-Nutzer 
haben wenigstens ein Unix unter der Haube und somit Perl bereits 
installiert. Wen das launige Schicksal jedoch ins Fensterland 
verschlug, bekommt mit Strawberry Perl&nbsp;<a href="http://strawberryperl.com/">[2]</a>
nach wenigen Klicks eine Arbeitsumgebung mit Perl, Make und 
C-Compiler, die es ihm erlaubt, diesem Tutorium vollständig zu 
folgen. Denn hier wird für die echte Praxis geübt, nicht für 
geschönte Realitätsausschnitte. Dieses Tutorium wird Folge für 
Folge ein brauchbares Programm aufbauen und dabei jeden Schritt 
dokumentieren, damit die Leser gut vorbereitet sind und in jeder 
digitalen Wildnis Ideen umsetzen können.

<div class="p"><!----></div>
Außerdem macht es wesentlich mehr Spaß, ein Programm nach eigenen 
Wünschen anzupassen, als beinah sinnlose Codeschnipsel abzutippen. 
Das geplante Programm ist ein Notizbuch, weil es eine kleine, 
praktische Sache ist, die jeder ab und an gut gebrauchen kann und 
das Linux eigene Programm Note auf externe Editoren zurückgreift und 
nicht immer einfach zu bedienen ist. Je nach zugesandten Anregungen 
wird es am Ende zwitschern können oder es erlauben, dass Notizen
von mehreren Nutzern in Echtzeit bearbeitet werden.

<div class="p"><!----></div>

<h3>Der Anfang</h3>

<div class="p"><!----></div>
Der Anfang ist jedoch ganz einfach, lediglich ein Rechner und etwas 
logisches Denkvermögen werden vorausgesetzt. Und natürlich ein 
aktuelles Perl, mindestens Version 5.12. Ein kurzes

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
$&nbsp;perl&nbsp;-v
</pre>

<div class="p"><!----></div>

<div class="p"><!----></div>
in der Kommandozeile (auch Shell oder Terminal) gibt Auskunft, was 
installiert ist. Wer jetzt 5.10 liest, wird an einigen Stellen 
kleinere Abstriche machen müssen. Aber spätestens mit einem 5.8.x 
sollte man über eine Aktualisierung nachdenken und die 
Paketverwaltung bemühen. Wer das nicht darf oder es nicht riskieren 
möchte, weil wichtige Programme oder eigene Projekte von Perl 
abhängig sind und er nicht wieder alle Module neu aufspielen will, 
sollte sich das Modul Perlbrew&nbsp;<a href="http://www.perlbrew.pl/">[3]</a>
installieren (lassen). Auch Menschen, welche die vielen Module, die 
während dieses Tutoriums vorgestellt werden, nur testweise 
installieren möchten oder die es nicht mögen, hinter dem Rücken der 
hauseigenen Paketverwaltung zu installieren, sollten den folgenden 
Abschnitt sorgfältig lesen, alle anderen dürfen ihn ignorieren.

<div class="p"><!----></div>

<h3>Perl und Module installieren</h3>

<div class="p"><!----></div>
Um Module zu installieren wird hier
CPANMINUS&nbsp;<a href="http://metacpan.org/module/App::cpanminus">[4]</a>
empfohlen, weil es nicht konfiguriert werden muss, sehr einfach zu 
bedienen ist und keine Ausgaben macht, die Anfänger verwirren 
könnten. Wer es nicht hat, wird noch einmal auf den Standardclient 
CPAN zurückgreifen müssen und kann sehen was mit „verwirrenden 
Ausgaben“ gemeint war:

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
#&nbsp;cpan&nbsp;App::cpanminus
</pre>

<div class="p"><!----></div>
Wenn die letzte Zeile der Ausgabe

<div class="p"><!----></div>

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
/usr/bin/make&nbsp;install&nbsp;--&nbsp;OK
</pre>

<div class="p"><!----></div>
lautet, weiß man, dass alles gut ging. Nun folgt im Terminal mit 
Root-Rechten:

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
#&nbsp;cpanm&nbsp;App::perlbrew
</pre>

<div class="p"><!----></div>
Jetzt kann man sich überzeugen, dass die darauf folgende Ausgabe 
wesentlich kompakter und verständlicher ist. Sie endet hoffentlich 
mit:

<div class="p"><!----></div>

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
Successfully&nbsp;installed&nbsp;App-perlbrew-0.27
1&nbsp;distribution&nbsp;installed
</pre>

<div class="p"><!----></div>
Wer unter Unix rechtlich davon ausgeschlossen ist, außerhalb seines 
Homeverzeichnisses etwas zu tun oder das Tutorium als Experiment sieht, welches 
er jederzeit nach <b><tt style="font-size: 1.3em;">/dev/null</tt></b> schicken kann, installiert Perlbrew
lokal mit:

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
$&nbsp;curl&nbsp;-L&nbsp;http://xrl.us/perlbrewinstall&nbsp;|&nbsp;bash
</pre>

<div class="p"><!----></div>

<div class="p"><!----></div>
Dies lädt das Skript <b><tt style="font-size: 1.3em;">perlbrewinstall</tt></b> herunter und leitet es an
die Bash weiter, die es dann ausführt und damit Perlbrew installiert.

<div class="p"><!----></div>
Damit die Brauerei ihren Betrieb aufnehmen kann, muss noch die 
<b><tt style="font-size: 1.3em;">~/.bashrc</tt></b> (oder die jeweilige Konfigurationsdatei der aktiven
Shell) um Folgendes erweitert werden:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
PATH="$HOME/perl5/perlbrew/bin:$PATH"
source&nbsp;perl5/perlbrew/etc/bashrc
</pre>

<div class="p"><!----></div>
Nutzer der C-Shell setzen <b><tt style="font-size: 1.3em;">$PATH</tt></b> mit <b><tt style="font-size: 1.3em;">setenv</tt></b> und setzen in die
zweite Zeile ein <b><tt style="font-size: 1.3em;">cshrc</tt></b> statt dem <b><tt style="font-size: 1.3em;">bashrc</tt></b>.

<div class="p"><!----></div>
Die letzten Schritte der Einrichtung sind sehr einfach und werden 
auch erklärt, wenn man nur <b><tt style="font-size: 1.3em;">perlbrew</tt></b> eingibt. Ähnlich zu <b><tt style="font-size: 1.3em;">hg</tt></b> oder
<b><tt style="font-size: 1.3em;">git</tt></b> (zwei Versionsverwaltungsprogrammen) braucht es zuerst ein

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
$&nbsp;perlbrew&nbsp;init
</pre>

<div class="p"><!----></div>

<div class="p"><!----></div>
Das Verzeichnis, in dem man dies tut, ist nicht wichtig. Mit

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
$&nbsp;perlbrew&nbsp;available
</pre>

<div class="p"><!----></div>

<div class="p"><!----></div>
kann man sich auflisten lassen, was derzeit aktuell ist. Im Sommer 2011 wird dies auf ein

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
$&nbsp;perlbrew&nbsp;install&nbsp;perl-5.14.1
</pre>

<div class="p"><!----></div>

<div class="p"><!----></div>
hinauslaufen. Nun ist etwas Geduld gefragt, weil es einige Minuten 
dauert, Perl und seine Kernmodule zu laden, zu kompilieren und zu 
testen und Perlbrew dabei einfach nur schweigt.

<div class="p"><!----></div>
Nach einem Neuaufruf der Shell mit <b><tt style="font-size: 1.3em;">exec</tt></b> oder einem neuen
Terminalfenster und einem einmaligen

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
$&nbsp;perlbrew&nbsp;switch&nbsp;5.14.1
</pre>

<div class="p"><!----></div>

<div class="p"><!----></div>
ist das aktuelle Perl endlich aktiv und wird immer gerufen, wenn man 
<b><tt style="font-size: 1.3em;">perl</tt></b> eingibt. (Der Interpreter wird klein geschrieben, die
Sprache groß und PERL schreibt nur, wer es auf einen unfreundlichen 
Besuch aus der Perlgemeinde ankommen lassen will.)

<div class="p"><!----></div>
Um zum System-Perl zu wechseln, genügt ein

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
$&nbsp;perlbrew&nbsp;off
</pre>

<div class="p"><!----></div>

<div class="p"><!----></div>
was sich jederzeit mit dem obigen <b><tt style="font-size: 1.3em;">switch</tt></b> wieder rückgängig machen lässt.

<div class="p"><!----></div>
Dabei sollte man beachten, dass alles, was der Nutzer, der sich 
Perlbrew installierte, in der Shell tut, sich immer auf das aktive 
Perl bezieht, egal ob man Module installiert, Dokumentation liest 
oder Werkzeuge benutzt, welche mit Perl geliefert werden. Jedes 
nach dem <b><tt style="font-size: 1.3em;">switch</tt></b> geöffnete Terminal bezieht sich auf die lokale
Installation (in <b><tt style="font-size: 1.3em;">~/perl5/perlbrew/perls/perl-5.14.1</tt></b>), auch nach
einer Neuanmeldung oder Neustart des Systems.

<div class="p"><!----></div>

<h2>Mein erstes Programm</h2>

<div class="p"><!----></div>
Andere Einsteigertutorien nehmen sich mehr Zeit, das allererste 
Programm zu bejubeln. Klar, es ist es ein großartiges Gefühl mit 
einem simplen <b><tt style="font-size: 1.3em;">print "Hallo ihr da draussen"</tt></b> ein richtiges
Programm geschrieben zu haben, wo man doch bisher Programmieren für 
eine schwarze Kunst gehalten hat. Diesen Moment der Begeisterung 
sollte jeder einmal genossen haben. Und wenn man dabei nicht 
nachdenken muss, was <b><tt style="font-size: 1.3em;">#include &lt;stdio.h&#62;</tt></b> oder
<b><tt style="font-size: 1.3em;">class HelloWorldApp</tt></b> bedeutet, umso besser. Aber irgendwann meldet sich
das Gehirn: „Und wozu ist das jetzt gut? Alle Perlmodule im 
Verzeichnis auszugeben hätte wenigstens noch einen praktischen 
Nutzen.“

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
$&nbsp;perl&nbsp;-e&nbsp;'print&nbsp;"tschuess\n"'
$&nbsp;perl&nbsp;-E&nbsp;'say&nbsp;&lt;*.pm&#62;'
</pre>

<div class="p"><!----></div>
<b><tt style="font-size: 1.3em;">print</tt></b> kennt man vielleicht aus Ruby, Python, Java oder PHP. Es
gibt den ihm folgenden Wert, hier ein mit (doppelten) 
Anführungszeichen markierter Text, auf der Standardausgabe aus, was 
meist die aktive Shell ist, von der aus <b><tt style="font-size: 1.3em;">perl</tt></b> gestartet wurde. Die
zweite Zeile gibt alle auf <b><tt style="font-size: 1.3em;">.pm</tt></b> endenden Dateien im aktuellen
Verzeichnis aus, was meist Perl-Module sind. Jeder, der nicht zum 
ersten mal ein Terminal öffnet, kann das verstehen, aber kaum eine 
Sprache ermöglicht das so kompakt ohne zwei, drei andere Befehle aus 
dem Werkzeugkasten zu holen, die mit dem Problem nichts zu tun 
haben und vom Neuling auch erst einmal begriffen werden müssen.

<div class="p"><!----></div>
Mit der Option <b><tt style="font-size: 1.3em;">-e</tt></b> oder <b><tt style="font-size: 1.3em;">-E</tt></b> führt <b><tt style="font-size: 1.3em;">perl</tt></b> sofort das in (hier in
einfache) Anführungszeichen gestellte als Programm aus. Die großen 
Perl-Magier geben so direkt ihre Zaubersprüche ab, ohne Stab und 
Editor. Im Folgenden wird jedoch ein Editor benutzt, denn das 
Programm wird stark wachsen.

<div class="p"><!----></div>
Die meisten Leser haben sicherlich bereits eine feste Meinung, 
welcher Editor der beste ist und die besseren bieten alles, was 
während dieses Tutoriums gebraucht wird. Unentschlossene könnten 
Padre&nbsp;<a href="http://padre.perlide.org/">[5]</a> oder
Kephra&nbsp;<a href="http://kephra.sourceforge.net/site/de">[6]</a> probieren, welche beide in 
Perl geschrieben sind, also per <b><tt style="font-size: 1.3em;">cpanm</tt></b> beziehbar sind. Padre
bietet mehr IDE-artige Funktionen, wohingegen Kephra eher auf 
Konsistenz und das schnelle Bearbeiten von Text ausgerichtet ist.

<div class="p"><!----></div>

<h3>Das Projekt vorbereiten</h3>

<div class="p"><!----></div>
Das neue Projekt bekommt am besten ein eigenes Verzeichnis und einen 
<b><tt style="font-size: 1.3em;">alias</tt></b> in der <b><tt style="font-size: 1.3em;">.bashrc</tt></b>:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
alias&nbsp;bn='perl&nbsp;$HOME/code/perl/betternote/bn.pl'
</pre>

<div class="p"><!----></div>

<div class="p"><!----></div>
So kann es jederzeit einfach verwendet werden. Denn nur, wer öfters 
benutzt, was er entwickelt, merkt auch, was noch verbessert werden 
kann. Ebenso wird sich der Stolz auf das eigene Programm nur so 
voll zeigen. Datei- und Verzeichnisnamen sind dabei nur Vorschläge. 
Wichtig ist nur zu wissen, dass Perlskripte meist mit <b><tt style="font-size: 1.3em;">perl
Dateiname</tt></b> aufgerufen werden:

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
$&nbsp;perl&nbsp;~/perl/script.pl
$&nbsp;~/perl/script.pl
</pre>

<div class="p"><!----></div>
Die zweite Variante kann aber nur gewählt werden, wenn mit <b><tt style="font-size: 1.3em;">chmod</tt></b>
oder über den Dateibrowser (Rechtsklick auf die Datei und dann 
„<em>Eigenschaften&nbsp;-&#62;&nbsp;Zugriffsrechte</em>“) die Rechte der Datei auf
ausführbar gesetzt wurden und die erste Zeile der Datei die 
sogenannte Shebang

<div class="p"><!----></div>
    
<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
#!/usr/bin/perl
</pre>

<div class="p"><!----></div>
    enthält (siehe auch „Shebang – All der Kram“, <b><font color="#595959">freies</font></b><font color="#FF630A">Magazin</font>
11/2009&nbsp;<a href="http://www.freiesmagazin.de/freiesMagazin-2009-11">[7]</a>).

<div class="p"><!----></div>
Dies ist natürlich nur unter Unix sinnvoll und auch nur, wenn nicht 
Perlbrew verwendet wird. Deshalb verwendet der vorgeschlagene 
<b><tt style="font-size: 1.3em;">alias</tt></b> die erste Variante. Windows-Nutzer legen sich statt des
Alias eine Verknüpfung der <b><tt style="font-size: 1.3em;">.pl</tt></b>-Datei auf den Desktop. Einfach die
Datei auswählen (einfacher Linksklick), mit der rechten Maustaste 
das Kontextmenü aufklappen und eine Verknüpfung erstellen, die dann 
auf den Desktop ziehbar ist.

<div class="p"><!----></div>

<h3>Perls Format</h3>

<div class="p"><!----></div>
Bevor es endlich wirklich losgeht, noch ein paar allgemeine Regeln, 
die zu kennen alles sehr viel einfacher macht.

<div class="p"><!----></div>

<div class="p"><!----></div>
<b>Regel 1:</b> Leerzeichen spielen (fast) keine Rolle. Solange man sich
nicht innerhalb der vielen Arten von Anführungszeichen befindet 
oder <b><tt style="font-size: 1.3em;">print</tt></b> als <b><tt style="font-size: 1.3em;">pri nt</tt></b> schreibt, ist es vollkommen gleich, wo
und wie viele Leerzeichen oder Zeilenanfänge stehen.

<div class="p"><!----></div>
    
<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print

'huhu'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;
</pre>

<div class="p"><!----></div>
<b>Regel 2:</b> Semikolons trennen die Befehle. Solange andere Befehle
nicht eingreifen, arbeitet <b><tt style="font-size: 1.3em;">perl</tt></b> das Programm Befehl für Befehl
von oben nach unten und links nach rechts ab. Da Zeilenenden nicht 
anzeigen können, wo ein Befehl aufhört, macht es das Semikolon. 
Auch wenn man nach dem letzten Befehl eines Programms oder 
Teilprogramms kein Semikolon setzen muss, empfiehlt Perl-Guru 
Damian Conway es trotzdem zu tun. Das beugt späteren Problemen vor, 
wenn man einen Befehl schnell mal in ein anderes Programm kopieren 
möchte. Sein Buch „Perl Best Practices“ enthält viele solcher 
nützlichen Hinweise und hat deshalb einen hohen Stellenwert bei 
vielen Perl-Programmierern.

<div class="p"><!----></div>
<b>Regel 3:</b> Die Raute (<b><tt style="font-size: 1.3em;">#</tt></b>) leitet Kommentare ein. Wenn man etwas in
das Programm schreiben möchte, das der Interpreter ignorieren soll, 
fügt man eine Raute ein und alles von diesem Zeichen bis zum 
nächsten Zeilenende gehört nicht zum ausgeführten Programm. Für 
längere Kommentare nimmt man <b><tt style="font-size: 1.3em;">POD</tt></b>, das später vorgestellt wird und
ein <b><tt style="font-size: 1.3em;">__END__</tt></b> oder <b><tt style="font-size: 1.3em;">__DATA__</tt></b> markiert das Ende eines Programms.

<div class="p"><!----></div>
    
<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
say&nbsp;'yes';&nbsp;#&nbsp;und&nbsp;ich&nbsp;dachte&nbsp;Perl
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;sei&nbsp;schwer
say&nbsp;'pound&nbsp;sign:&nbsp;#';&nbsp;#&nbsp;ab&nbsp;hier&nbsp;ist
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Kommentar
</pre>

<div class="p"><!----></div>
    
<h3>Sag es einfach</h3>

<div class="p"><!----></div>
Was macht eigentlich dieses <b><tt style="font-size: 1.3em;">say</tt></b>, was man hier schon zweimal sehen
konnte? Es ist eigentlich nicht viel mehr als ein <b><tt style="font-size: 1.3em;">print</tt></b>, das noch
ein

Steuerzeichen anfügt, welches die Zeile beendet. Die nächste
Ausgabe beginnt dann in einer neuen. In Ruby und C nennt sich das 
<b><tt style="font-size: 1.3em;">puts</tt></b>, in Python funktioniert das <b><tt style="font-size: 1.3em;">print</tt></b> auf diese Art.

<div class="p"><!----></div>
Das <b><tt style="font-size: 1.3em;">say</tt></b> ist sehr praktisch, denn es lässt sich sehr leicht tippen.
Die Buchstaben s, a und y liegen auf der normalen QWERTZ-Tastatur 
nebeneinander. Außerdem ist es kürzer, spart bis zu sechs 
Anschläge und tut letztlich genau das, was man in den meisten 
Fällen mit <b><tt style="font-size: 1.3em;">print</tt></b> machen will. Es wurde allerdings erst mit
Perl-Version 5.10 eingeführt und muss einzeln oder mit allen 
anderen Neuerungen angemeldet werden, mit denen ältere Programme 
vermeidbare Probleme haben könnten.

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
use&nbsp;feature&nbsp;'say';
#&nbsp;oder
use&nbsp;v5.10;
</pre>

<div class="p"><!----></div>

<h3>Benutz es einfach</h3>

<div class="p"><!----></div>
Neue Projekte sollten aber darauf nicht verzichten. Deshalb wird die 
erste Zeile des Notizprogramms nach der Shebang

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
use&nbsp;v5.12;
</pre>

<div class="p"><!----></div>
sein. Somit hat das Programm nicht nur Zugang zu allen neuen und 
interessanten Funktionen, es spart auch eine Zeile, die zuvor allen 
Anfängern in Perl-Foren eingebläut wurde und
die man endlich nicht mehr so oft erwähnen muss, weil sie mit
<b><tt style="font-size: 1.3em;">use v5.12;</tt></b> aufgerufen wird:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
use&nbsp;strict;
</pre>

<div class="p"><!----></div>
Was dieser Befehl genau macht, erklärt der nächste Abschnitt. 
Einfach gesagt findet er für den Programmierer viele seiner 
Tippfehler.

<div class="p"><!----></div>
Dass <b><tt style="font-size: 1.3em;">use</tt></b> „benutze“ heißt, weiß man vielleicht noch aus dem
Englischunterricht. Aber in Perl kann es dreierlei bedeuten: Wenn 
eine Zahl folgt, prüft es die Version des laufenden <b><tt style="font-size: 1.3em;">perl</tt></b>. Ist es
älter, wird sofort abgebrochen. Ab Version 5.10 aktiviert es, wie 
bereits beschrieben, alle neuen Funktionen bis zur angegebenen 
Version. Der vorhin verwendete Kommandozeilenparameter <b><tt style="font-size: 1.3em;">-E</tt></b> lädt
alle verfügbaren neue Funktionen.

<div class="p"><!----></div>
Folgt dem <b><tt style="font-size: 1.3em;">use</tt></b> ein Name, sucht <b><tt style="font-size: 1.3em;">perl</tt></b> nach einer gleichnamigen
Datei die auf <b><tt style="font-size: 1.3em;">.pm</tt></b> endet und lädt sie als Modul. Manche sagen auch
Bibliothek dazu. Da daher 95% der Macht aller Programme kommt, 
sollte der Befehl eigentlich noch vor <b><tt style="font-size: 1.3em;">print</tt></b> gelehrt werden.

<div class="p"><!----></div>
Durch Gewohnheitsrecht hat sich durchgesetzt, dass Modulnamen in 
„CamelCase“&nbsp;<a href="https://secure.wikimedia.org/wikipedia/de/wiki/Camelcase">[8]</a>
also wie <b><tt style="font-size: 1.3em;">SuperModul</tt></b> geschrieben werden, aber mindestens mit einem
Großbuchstaben beginnen. Steht nach <b><tt style="font-size: 1.3em;">use</tt></b> etwas Kleingeschriebenes,
ist es kein Modul sondern ein „Pragma“, d.&nbsp;h. ein Befehl an Perl, 
sich anders zu verhalten. Nach <b><tt style="font-size: 1.3em;">strict</tt></b> ist das zweitnützlichste
Pragma <b><tt style="font-size: 1.3em;">warnings</tt></b>, was <b><tt style="font-size: 1.3em;">perl</tt></b> veranlasst, ausführlichere
Fehlermeldungen zu geben. Wer sich sich gerne belehren lässt, kann 
sogar <b><tt style="font-size: 1.3em;">diagnostics</tt></b> aktivieren. Dann werden zu den Warnungen die
Erklärungen aus perldiag (eine Seite der Perl-Dokumentation) 
angezeigt. 

<div class="p"><!----></div>

<h3>Skalarvariablen</h3>

<div class="p"><!----></div>
Selbst wer noch nie programmiert hat, kennt Variablen wohl vom 
Mathematikunterricht. Da sind es Buchstaben, die für eine Zahl stehen, 
die zu berechnen ist. Für Programmierer sieht das aber etwas anders 
aus. Hier sind Variablen eine Art Kiste (Speicherplatz), in die man 
jederzeit einen anderen Wert hineintun kann. (Außer in streng 
funktionalen Sprachen wie Haskell natürlich.) Die Namen der Kiste 
darf man in Perl beliebig wählen, solange sie mit einem Buchstaben 
anfangen. Bei Verwendung des Pragmas <b><tt style="font-size: 1.3em;">utf8</tt></b> kann man sogar Umlaute
oder japanische Katagana für Variablen und andere eigene Konstrukte 
verwenden.

<div class="p"><!----></div>
In vielen anderen Programmiersprachen gibt man den Kartons neben dem 
Namensschild noch eine Inhaltsbeschreibung und zeigt so an, ob man 
Zahlen oder doch lieber Kartoffeln in der Kiste abzulegen gedenkt. 
Bei Perl steckt diese Inhaltsangabe in einem Sonderzeichen, das vor 
dem Variablennamen steht: <b><tt style="font-size: 1.3em;">$</tt></b>, <b><tt style="font-size: 1.3em;">@</tt></b> oder <b><tt style="font-size: 1.3em;">%</tt></b>, wobei es in diesem
Teil des Tutoriums nur um die einfachen gehen soll, die mit <b><tt style="font-size: 1.3em;">$</tt></b>
beginnen. Das <b><tt style="font-size: 1.3em;">$</tt></b> sieht aus wie ein S und erinnert den Benutzer,
dass es ein Skalar, also ein einfacher Wert, ist. Andere Sprachen 
unterscheiden da auch noch zwischen ganzen Zahlen, gebrochenen 
Zahlen, Buchstaben, Text und vielem mehr. Aber Perl ist das alles 
erst einmal egal.

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
$n&nbsp;=&nbsp;'5';
say&nbsp;$n&nbsp;+&nbsp;3;
</pre>

<div class="p"><!----></div>
Damit wird ein kleiner Text (alles was in Anführungszeichen steht!) 
in die Kiste namens <b><tt style="font-size: 1.3em;">$n</tt></b> getan. <b><tt style="font-size: 1.3em;">=</tt></b> weist das Ergebnis der rechten
Seite der linken zu. Eine Zeile später wird damit gerechnet. Da 
Perl weiß, was gemeint ist, lautet das Ergebnis natürlich 8. Manche 
Programmierer würden sich bei sowas die Haare raufen, weil das jede 
Computerlogik verletzt. Larry Wall versucht es aber „normalen“ 
Menschen einfach zu machen, in deren Alltag <b><tt style="font-size: 1.3em;">+</tt></b> sich auf Zahlen
bezieht, nicht auf Schriftzeichen. Dann muss halt <b><tt style="font-size: 1.3em;">perl</tt></b> den
Mehraufwand betreiben und prüfen, ob ein Wert auch als Zahl 
verstanden werden kann, nicht der Programmierer. Ein Text wird aber 
nur als Zahl deutbar, wenn er auch mit einer Ziffer beginnt. Ist 
die Zeichenkette leer (<b><tt style="font-size: 1.3em;">"</tt></b>), entspricht das einer <b><tt style="font-size: 1.3em;">0</tt></b>.

<div class="p"><!----></div>
Wurde der Variablen beim ersten Erwähnen kein Wert gegeben, ist sie 
nicht leer, sondern hat keinen definierten Inhalt, was <b><tt style="font-size: 1.3em;">$var = undef;</tt></b>
oder <b><tt style="font-size: 1.3em;">undef $var;</tt></b> entspricht. Bei ja/nein-Entscheidungen
ist <b><tt style="font-size: 1.3em;">"</tt></b>, <b><tt style="font-size: 1.3em;">0</tt></b> oder <b><tt style="font-size: 1.3em;">undef</tt></b> negativ, alles andere positiv.

<div class="p"><!----></div>

<h3>Strikte Regeln</h3>

<div class="p"><!----></div>
So wie das letzte Beispiel dort steht, würde es einen Fehler 
hervorrufen. Wenn man eine Variable zum ersten Mal erwähnt, muss 
man dazuschreiben, in welchem Bereich sie bekannt ist. In der 
Informatik sagt man Gültigkeitsbereich. Das wären für den Anfang 
die Befehle <b><tt style="font-size: 1.3em;">my</tt></b> oder <b><tt style="font-size: 1.3em;">our</tt></b>:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
my&nbsp;$notiz&nbsp;=&nbsp;'Ich&nbsp;wollt&nbsp;nur&nbsp;mal&nbsp;Tach&nbsp;sagen.';
our&nbsp;$gruss&nbsp;=&nbsp;'Tach!';
</pre>

<div class="p"><!----></div>
<b><tt style="font-size: 1.3em;">$notiz</tt></b> „lebt“ nur bis zur nächsten schließenden, geschweiften
Klammer (nur im aktuellen Block), <b><tt style="font-size: 1.3em;">$gruss</tt></b> dagegen im ganzen
„Modul“. (Das war etwas gemogelt, reicht aber als erste 
Vereinfachung.) Wäre kein <b><tt style="font-size: 1.3em;">my</tt></b> oder <b><tt style="font-size: 1.3em;">our</tt></b> angegeben, gäbe es diese
Variable im ganzen Programm. Vor 20 Jahren, als Perlskripte klein 
waren, spielte das keine Rolle, aber heute wäre es wie das Fahren 
ohne Gurt. Man bräuchte nur ein Modul benutzen, dass ein Modul 
benutzt, in dem es auch eine Variable <b><tt style="font-size: 1.3em;">$notiz</tt></b> gibt, die während
eines selbst ausgelösten Befehls verändert wird. Es könnten Wochen 
vergehen, bis so eine Problemursache überhaupt gefunden wird. 
Deshalb schränkt man den Geltungsbereich von Variablen möglichst 
stark ein und beide <b><tt style="font-size: 1.3em;">$notiz</tt></b> können koexistieren ohne voneinander
Notiz zu nehmen. Genau dafür wurde <b><tt style="font-size: 1.3em;">use strict;</tt></b> erfunden. Es
zwingt, immer einen Geltungsbereich zu bestimmen, was man sonst 
nicht müsste und verbietet damit globale Variablen (überall 
bekannte). Der angenehme Nebeneffekt davon ist, sollte man sich 
verschreiben (<b><tt style="font-size: 1.3em;">$notitz</tt></b>), gibt es einen harten Fehler (compile
error) und das Programm bricht ab, bevor es ausgeführt wurde, 
weil vor dem <b><tt style="font-size: 1.3em;">$notitz</tt></b> kein <b><tt style="font-size: 1.3em;">my</tt></b> stand. Dabei gibt Perl die
Zeilennummer samt Inhalt der schlimmen Stelle an und ein Fehler 
weniger konnte sich einschleichen.

<div class="p"><!----></div>

<h3>IO „von Hand“</h3>

<div class="p"><!----></div>
Bis jetzt ist das Programm sehr klein:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
#!/usr/bin/perl
use&nbsp;v5.12;
use&nbsp;warnings;
#&nbsp;use&nbsp;diagnostics;&nbsp;#&nbsp;nur&nbsp;wer&nbsp;mag

print&nbsp;"Notiz:&nbsp;";
my&nbsp;$notiz&nbsp;=&nbsp;readline&nbsp;STDIN;
</pre>

<div class="p"><!----></div>

<div class="p"><!----></div>
Die letzte Programmzeile liest vom Benutzer ein, was immer er in die 
Shell tippt und mit <i>„Enter“</i> absegnet. Weil die Entertaste aber ein
Zeichen abgibt, das die Zeile abschließt (das gleiche unsichtbare 
Zeichen, dass den Unterschied zwischen <b><tt style="font-size: 1.3em;">print</tt></b> und <b><tt style="font-size: 1.3em;">say</tt></b> ausmacht),
kommt auch die ganze Zeile Text in <b><tt style="font-size: 1.3em;">$notiz</tt></b> an. <b><tt style="font-size: 1.3em;">readline</tt></b>
(englisch für „lese Zeile“), tut dies auch und <b><tt style="font-size: 1.3em;">STDIN</tt></b> sagt von wo
(der Standardeingabe, das in den meisten Betriebsystemen das 
Terminal ist, aber auch auf eine Braillezeile oder anderes 
umgeleitet sein kann). Perl wäre nicht Perl wenn das nicht auch 
kürzer ginge. Statt <b><tt style="font-size: 1.3em;">readline</tt></b> lässt sich auch der am Anfang
gezeigte Diamantoperator <b><tt style="font-size: 1.3em;">&lt;&#62;</tt></b> nehmen. Nur wenn er ein Muster
bekommt, sucht er damit die Dateinamen im aktuellen Verzeichnis ab. 
Und solange das Skript keine Parameter bekommt, ließe sich sogar 
<b><tt style="font-size: 1.3em;">STDIN</tt></b> weglassen:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
my&nbsp;$notiz&nbsp;=&nbsp;&lt;&#62;;
chomp&nbsp;$notiz;
</pre>

<div class="p"><!----></div>
Da das Zeilenendzeichen in <b><tt style="font-size: 1.3em;">$notiz</tt></b> nicht wirklich gebraucht wird,
schneidet man es mit <b><tt style="font-size: 1.3em;">chomp</tt></b> ab. Manche schreiben lieber beides in
einer einzigen Zeile, was Geschmackssache ist:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
chomp(&nbsp;my&nbsp;$notiz&nbsp;=&nbsp;&lt;&#62;&nbsp;);
</pre>

<div class="p"><!----></div>

<div class="p"><!----></div>
Bereits die äußerlich sehr 
unterschiedlichen Arten eine Zeile einzulesen, zeigt die 
Wahlmöglichkeiten, für die Perl geliebt und abgelehnt wird und die 
im vorigen Teil angesprochen wurden.

<div class="p"><!----></div>
Doch wohin mit der Notiz? Sie sollte bis zum nächsten Programmstart 
erhalten bleiben, was Variablen niemals leisten können. Dateien schon, 
da diese sicher auf der Festplatte lagern, zumindest solange 
kein großes Magnetfeld zu Besuch kommt.

<div class="p"><!----></div>
Um eine Datei zu öffnen, verwendet man den Befehl <b><tt style="font-size: 1.3em;">open</tt></b>. Dieser
bekommt drei mit Komma getrennte Information dahinter, die auch 
Parameter genannt werden: erstens das Handle, zweitens den Modus 
und drittens den Dateinamen. Dateinamen sind erst einmal normaler 
Text. Die möglichen Modi sind lesen (<b><tt style="font-size: 1.3em;">&lt;</tt></b>), schreiben (<b><tt style="font-size: 1.3em;">&#62;</tt></b>), anfügen
(<b><tt style="font-size: 1.3em;">&#62;&#62;</tt></b>). Für Lese- und Schreibzugriffe stellt man ein <b><tt style="font-size: 1.3em;">+</tt></b> davor
(<b><tt style="font-size: 1.3em;">+&lt;</tt></b>). Aus den Pfeilzeichen lässt sich mehr Sinn ableiten, wenn
man sich merkt, dass wenn die Spitze in den Dateinamen zeigt, 
damit schreiben gemeint ist und umgekehrt. Es lassen sich Modus und 
Dateiname auch als ein Text angeben, dies ist aber nicht empfohlen.

<div class="p"><!----></div>
Wie Handle funktionieren, ist dem Leser schon bekannt, denn <b><tt style="font-size: 1.3em;">STDIN</tt></b>
ist so eines. Diese Schreibweise (ohne <b><tt style="font-size: 1.3em;">$</tt></b>) zu verwenden, wird aber
auch nicht empfohlen, weil es globale Variablen sind, die <b><tt style="font-size: 1.3em;">use strict;</tt></b>
nicht verbieten kann. Deshalb sollte man Skalare nehmen,
in denen die Handle gespeichert werden und die genau wie ein Handle 
verwendet werden. Sobald die Lebensdauer des Skalars erreicht ist, 
wird die Datei freigegeben, was auch jederzeit mit <b><tt style="font-size: 1.3em;">close</tt></b>
geschehen kann. Um die Datei für einen Schreibzugriff 
vorzubereiten, muss Folgendes eingetippt werden:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
open&nbsp;my&nbsp;$FH,&nbsp;'&#62;',&nbsp;'notizblock.txt';
print&nbsp;$FH&nbsp;$notiz;
close&nbsp;$FH;
</pre>

<div class="p"><!----></div>

<div class="p"><!----></div>
<b><tt style="font-size: 1.3em;">print</tt></b> oder <b><tt style="font-size: 1.3em;">say</tt></b> sind eigentlich Universalwerkzeuge, um Text
irgendwohin zu verschicken. Was bisher geschah war insgeheim ein:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
print&nbsp;STDOUT&nbsp;$notiz;
</pre>

<div class="p"><!----></div>

<div class="p"><!----></div>
<b><tt style="font-size: 1.3em;">STDOUT</tt></b> ist das Handle für die Standardausgabe, was auch meist nur
das Terminal ist. Wichtig ist: Zwischen Handle und Text sollte man 
kein Komma setzen. Da <b><tt style="font-size: 1.3em;">print</tt></b> seine Nachricht auch in mehreren,
durch Komma getrennten Happen erhalten kann, braucht es einen Weg, 
das Handle unterscheiden zu können. Die Nachricht wird wie folgt 
aus der Datei gelesen:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
open&nbsp;my&nbsp;$FH,&nbsp;'&lt;',&nbsp;'notizblock.txt';
$notiz&nbsp;=&nbsp;&lt;$FH&#62;;
close&nbsp;$FH;
</pre>

<div class="p"><!----></div>

<div class="p"><!----></div>
Statt <b><tt style="font-size: 1.3em;">readline</tt></b> (a.k.a. <b><tt style="font-size: 1.3em;">&lt;&#62;</tt></b>) geht auch <b><tt style="font-size: 1.3em;">read</tt></b>, um eine genau
bestimmte Anzahl von Bytes zu lesen:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
read(&nbsp;$FH,&nbsp;$notiz,&nbsp;1);
</pre>

<div class="p"><!----></div>

<div class="p"><!----></div>
Bei einem Zeichen wäre allerdings <b><tt style="font-size: 1.3em;">getc</tt></b> („get character“, zu deutsch „bekomme ein Zeichen“)
kürzer, was vor allem für Abfragen wie <b><tt style="font-size: 1.3em;">[J/N]</tt></b> effektiv ist und das <b><tt style="font-size: 1.3em;">chomp</tt></b> spart:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
$notiz&nbsp;=&nbsp;getc&nbsp;$FH;
</pre>

<div class="p"><!----></div>

<div class="p"><!----></div>
Das Ergebnis vom <b><tt style="font-size: 1.3em;">read</tt></b> ist die Anzahl der Zeichen, die tatsächlich
gelesen werden konnten und <b><tt style="font-size: 1.3em;">eof $FH</tt></b> kann melden, ob man schon am
Ende der Datei angekommen ist (eof ist kurz für „end of file“).

<div class="p"><!----></div>

<h2>Aufgabe</h2>

<div class="p"><!----></div>

<div class="p"><!----></div>
Aus allem Vorgestellten ein vollständiges Programm zu machen, soll 
die Hausaufgabe für das nächste Mal sein. Dafür fehlt allerdings 
noch eine Information. Mit dem obigen Aufruf übernimmt das Skript 
das aktuelle Arbeitsverzeichnis (<b><tt style="font-size: 1.3em;">$CWD</tt></b>) der Shell. Startet also
jemand <b><tt style="font-size: 1.3em;">perl projekte/note/bn.pl</tt></b> von <b><tt style="font-size: 1.3em;">E:\Perl</tt></b> aus und im Code
wird ein <b><tt style="font-size: 1.3em;">open $FH, '&lt;', 'notizblock.txt';</tt></b> ausgeführt, sucht Perl
<b><tt style="font-size: 1.3em;">E:\Perl\notizblock.txt</tt></b>. Die Textdatei sollte aber im
Projektverzeichnis liegen und das Skript muss auch dort nachsehen, 
egal von wo aus gestartet. Dafür bring Perl das Kernmodul (ist 
immer dabei) <b><tt style="font-size: 1.3em;">FindBin</tt></b> mit, welches das ermöglicht:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
use&nbsp;FindBin;
chdir&nbsp;$FindBin::Bin;
</pre>

<div class="p"><!----></div>
<b><tt style="font-size: 1.3em;">chdir</tt></b> wechselt das Arbeitsverzeichnis (wie <b><tt style="font-size: 1.3em;">cd</tt></b> in der Shell unter
Linux und Windows) und <b><tt style="font-size: 1.3em;">$FindBin::Bin</tt></b> ist einfach eine mit <b><tt style="font-size: 1.3em;">our</tt></b>
angemeldete Variable des Moduls, in der das gewünschte Verzeichnis 
gespeichert ist. Ansonsten bitte keines der jetzt gezeigten Module 
benutzen. 

<div class="p"><!----></div>

<h3>IO-Module</h3>

<div class="p"><!----></div>
Auf die gezeigte Art können Dateien nur in Portionen (meist Zeilen) 
gelesen und geschrieben werden. Es sei denn, man kennt den Trick mit

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
my&nbsp;$notiz&nbsp;=&nbsp;do&nbsp;{&nbsp;local&nbsp;$/;&nbsp;&lt;$FH&#62;&nbsp;};
</pre>

<div class="p"><!----></div>

<div class="p"><!----></div>
wodurch der ganze Dateinhalt in <b><tt style="font-size: 1.3em;">$notiz</tt></b> landet. Das ist aber auch
nicht die perfekte Lösung. Zum Glück hat Uri Guttman bereits vor 
Jahren <b><tt style="font-size: 1.3em;">File::Slurp</tt></b> geschrieben. Dadurch geht alles sauber, knapp,
in einem Befehl und ohne Handle:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
use&nbsp;File::Slurp;

my&nbsp;$notiz&nbsp;=&nbsp;read_file(&nbsp;'notizblock.txt'&nbsp;);&nbsp;#&nbsp;lesen
write_file(&nbsp;'notizblock.txt',&nbsp;$notiz&nbsp;);&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;schreiben
append_file(&nbsp;'notizblock.txt',&nbsp;$notiz&nbsp;);&nbsp;&nbsp;&nbsp;#&nbsp;anhaengen
</pre>

<div class="p"><!----></div>

<div class="p"><!----></div>
Da Golf (das kürzeste Programm gewinnt) der Sport der echten 
Perlprogrammierer ist, gibt es noch eine kürzere Lösung, dank des 
ebenfalls legendären Brian Ingerson. Sein <b><tt style="font-size: 1.3em;">IO::All</tt></b> kann alles, das
irgendwie mit Ein- oder Ausgabe zu tun hat. Damit lässt sich sogar 
ein Uhrzeitserver mit einer Zeile Perl schreiben. Doch in diesem 
Teil interessiert nur lesen und schreiben von Dateien:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
use&nbsp;IO::All;

$notiz&nbsp;&lt;&nbsp;io('notizblock.txt');&nbsp;&nbsp;#&nbsp;lesen
io('notizblock.txt')&nbsp;&#62;&nbsp;$notiz;&nbsp;&nbsp;#&nbsp;auch&nbsp;lesen
$notiz&nbsp;&#62;&nbsp;io('notizblock.txt');&nbsp;&nbsp;#&nbsp;schreiben
$notiz&nbsp;&#62;&#62;&nbsp;io('notizblock.txt');&nbsp;#&nbsp;anhaengen

$notiz&nbsp;&lt;&nbsp;io('-');&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;STDIN&nbsp;lesen
</pre>

<div class="p"><!----></div>

<div class="p"><!----></div>

<h2>Die offizielle Dokumentation</h2>

<div class="p"><!----></div>
Mit Perl kommt eine Dokumentation, die recht gut ist und an der ab 
Version 5.14 wieder stärker gearbeitet wird. Eine erste Übersicht 
über die dort enthaltenen Themen listet

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
$&nbsp;perldoc&nbsp;perl
</pre>

<div class="p"><!----></div>

<div class="p"><!----></div>
auf. Die Hilfe zu <b><tt style="font-size: 1.3em;">perldoc</tt></b> selber liefert

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
$&nbsp;perldoc&nbsp;perldoc
$&nbsp;man&nbsp;perldoc
</pre>

<div class="p"><!----></div>

<div class="p"><!----></div>
    
<div class="p"><!----></div>

<div class="p"><!----></div>
Die gleiche Dokumentation kann auch auf
perldoc.org&nbsp;<a href="http://perldoc.org/">[9]</a> nachgeschlagen werden.

<div class="p"><!----></div>
Einen kleinen Teil der perldoc gibt es auch übersetzt im Wiki der
perlcommunity.de&nbsp;<a href="http://wiki.perl-community.de/foswiki/bin/view/Perldoc/WebHome">[10]</a>.
Eine Liste mit fast sämtlichen anderen Perl-Ressourcen ist dort auch
verlinkt&nbsp;<a href="http://wiki.perl-community.de/foswiki/bin/view/Wissensbasis/PerlWebSites">[11]</a>.

<div class="p"><!----></div>

<h2>Ausblick</h2>

<div class="p"><!----></div>
Sobald man mehr als einen Wert hat, sollte man die Variablen kennen, 
die mit <b><tt style="font-size: 1.3em;">@</tt></b> beginnen. Die nächste Folge wird genau das
behandeln, denn
    
der Notizblock soll eine Liste an Notizen verwalten 
können. Auch die verschiedenen Formate, in denen sich Werte 
(Literale) deklarieren lassen, werden voraussichtlich erklärt.

<div class="p"><!----></div>
Zusätzlich sei noch einmal daran erinnert, dass über die 
Kommentarfunktion am Ende des Artikels auch Wünsche
zum weiteren Verlauf des Tutoriums
geäußert werden 
können.
<div class="p"><!----></div>
    <font color="#595959"><font size="+1">Links</font></font><br />
        
[1] <a href="http://www.freiesmagazin.de/freiesMagazin-2011-07"><tt style="font-size: 1.3em;">http://www.freiesmagazin.de/freiesMagazin-2011-07</tt></a><br />

<div class="p"><!----></div>
[2] <a href="http://strawberryperl.com/"><tt style="font-size: 1.3em;">http://strawberryperl.com/</tt></a><br />

<div class="p"><!----></div>
[3] <a href="http://www.perlbrew.pl/"><tt style="font-size: 1.3em;">http://www.perlbrew.pl/</tt></a><br />

<div class="p"><!----></div>
[4] <a href="http://metacpan.org/module/App::cpanminus"><tt style="font-size: 1.3em;">http://metacpan.org/module/App::cpanminus</tt></a><br />

<div class="p"><!----></div>
[5] <a href="http://padre.perlide.org/"><tt style="font-size: 1.3em;">http://padre.perlide.org/</tt></a><br />

<div class="p"><!----></div>
[6] <a href="http://kephra.sourceforge.net/site/de"><tt style="font-size: 1.3em;">http://kephra.sourceforge.net/site/de</tt></a><br />

<div class="p"><!----></div>
[7] <a href="http://www.freiesmagazin.de/freiesMagazin-2009-11"><tt style="font-size: 1.3em;">http://www.freiesmagazin.de/freiesMagazin-2009-11</tt></a><br />

<div class="p"><!----></div>
[8] <a href="https://secure.wikimedia.org/wikipedia/de/wiki/Camelcase"><tt style="font-size: 1.3em;">https://secure.wikimedia.org/wikipedia/de/wiki/Camelcase</tt></a><br />

<div class="p"><!----></div>
[9] <a href="http://perldoc.org/"><tt style="font-size: 1.3em;">http://perldoc.org/</tt></a><br />

<div class="p"><!----></div>
[10] <a href="http://wiki.perl-community.de/foswiki/bin/view/Perldoc/WebHome"><tt style="font-size: 1.3em;">http://wiki.perl-community.de/foswiki/bin/view/Perldoc/WebHome</tt></a><br />

<div class="p"><!----></div>
[11] <a href="http://wiki.perl-community.de/foswiki/bin/view/Wissensbasis/PerlWebSites"><tt style="font-size: 1.3em;">http://wiki.perl-community.de/foswiki/bin/view/Wissensbasis/PerlWebSites</tt></a><br />

<div class="p"><!----></div>
            
<table border="1">
<tr><td colspan="1" align="center"><font size="+0"><b>Autoreninformation</b></font></td></tr>
<tr><td align="left"><b>Herbert Breunung</b>&nbsp;(<a href="http://kephra-lk.livejournal.com/">Webseite</a>)
ist seit sieben Jahren mit Antworten, Vorträgen, Wiki- und 
Zeitungsartikeln in der Perlgemeinschaft aktiv.
Dies begann mit dem 
von ihm entworfenen Editor <a href="http://kephra.sourceforge.net/site/de/home_news.shtml">Kephra</a>.
</td></tr>
<tr><td align="left">    </td></tr></table>



<div class="p"><!----></div>
            <a href="http://www.freiesmagazin.de/comment/reply/236?edit[subject]=Perl-Tutorium: Teil 1#comment-form"><i>Diesen Artikel kommentieren</i></a><br /><br />
        <a href="freiesMagazin-2011-08-bilder.html#index">Zum Index</a><br /><hr />

<div class="p"><!----></div>
<h1><font color="#595959"><a name="11_08_latex_optionen">Variable Argumente in LaTeX nutzen</a><a name="11_08_latex_optionen">
</a></font></h1>von Dominik Wagenführ

<div class="p"><!----></div>
        <b>D</b><b>adurch, dass man in LaTeX eigene Befehle definieren kann, lassen
sich wiederkehrende Aufgaben bzw. Formatierungen leicht umsetzen,
ohne unnötig LaTeX-Code mehrfach schreiben zu müssen. Ein zweiter
Vorteil bei einem eigenen Befehl besteht darin, dass man bei einer gewünschten
Änderung nur eine Textstelle bearbeiten muss und nicht mehrere separate
Stellen im Dokument. Der Artikel soll zeigen, wie man mithilfe des
Paketes <b>xkeyval</b>&nbsp;<a href="http://tug.ctan.org/pkg/xkeyval">[1]</a>
optionale Argumente bei selbstdefinierten LaTeX-Befehlen nutzen 
kann, ohne den Überblick zu verlieren.</b>

<div class="p"><!----></div>
Das Paket <b>xkeyval</b> ist dabei eine Erweiterung des Paketes
<b>keyval</b>&nbsp;<a href="http://tug.ctan.org/pkg/keyval">[2]</a>,
mit welchem man einen Großteil der Beispiele des Artikels auch 
nachvollziehen kann. Daneben gibt es noch
<b>pgfkeys</b>&nbsp;<a href="http://tug.ctan.org/pkg/pgfkeys">[3]</a> und 
<b>kvoptions</b>/<b>kvsetkeys</b>&nbsp;<a href="http://tug.ctan.org/pkg/kvoptions">[4]</a>&nbsp;<a href="http://tug.ctan.org/pkg/kvsetkeys">[5]</a>,
die mit einer Schlüsselbehandlung bei Optionen umgehen können.

<div class="p"><!----></div>

<h2>Befehlsdefinition</h2>

<div class="p"><!----></div>
Eigene Befehle definiert man durch das Kommando <b><tt style="font-size: 1.3em;">\newcommand</tt></b>.
Das folgende Minimalbeispiel wird im Laufe des Artikels um neue
Befehlsdefinitionen erweitert:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
\documentclass[parskip=half-]{%
scrartcl}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}

%&nbsp;Blindtext&nbsp;zum&nbsp;Testen
\newcommand*\lorem{%
Lorem&nbsp;ipsum&nbsp;dolor&nbsp;sit&nbsp;amet,
consetetur&nbsp;sadipscing&nbsp;elitr,&nbsp;sed
diam&nbsp;nonumy&nbsp;eirmod&nbsp;tempor&nbsp;invidunt
ut&nbsp;labore&nbsp;et&nbsp;dolore&nbsp;magna&nbsp;aliquyam
erat,&nbsp;sed&nbsp;diam&nbsp;voluptua.&nbsp;At&nbsp;vero
eos&nbsp;et&nbsp;accusam&nbsp;et&nbsp;justo&nbsp;duo&nbsp;dolores
et&nbsp;ea&nbsp;rebum.}

\newcommand\framedtextA[1]{%
\fbox{#1}}

\begin{document}
\framedtextA{\lorem}
\end{document}
</pre>

<div class="p"><!----></div>
<i>Listing: <a href="http://www.freiesmagazin.de/mobil/2011-08-listings/framedtextA.tex">framedtextA.tex</a></i>

<div class="p"><!----></div>
Hier wird der Befehl <b><tt style="font-size: 1.3em;">\framedtextA</tt></b> definiert, der genau ein
Argument erwartet (<b><tt style="font-size: 1.3em;">[1]</tt></b>) und dieses dann in einer simplen Box umrahmt
darstellt. Mittels <b><tt style="font-size: 1.3em;">#1</tt></b> kann man dann auf das Argument zugreifen.

<div class="p"><!----></div>
<b>Hinweis:</b> Damit man irgendetwas zum Darstellen hat, wird ein
Blindtext über das Kommando <b><tt style="font-size: 1.3em;">\lorem</tt></b> definiert.

<div class="p"><!----></div>
In der aktuellen Definition hat dies natürlich den Nachteil, dass
<b><tt style="font-size: 1.3em;">\fbox</tt></b> die Zeilen nicht automatisch umbricht, sodass man den Inhalt
besser in eine Minipage setzt und <b><tt style="font-size: 1.3em;">\framedtextA</tt></b> wie folgt korrigiert:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
\usepackage{calc}

\newcommand\framedtextA[1]{%
\fbox{%
\begin{minipage}{%
\linewidth-2\fboxsep-2\fboxrule}%
#1%
\end{minipage}}}
</pre>

<div class="p"><!----></div>
<i>Listing: <a href="http://www.freiesmagazin.de/mobil/2011-08-listings/framedtextA2.tex">framedtextA.tex (2. Version)</a></i>

<div class="p"><!----></div>
Damit die Box um die Minipage genau so breit ist, wie die
aktuelle Zeile, wird von der aktuellen Zeilenlänge <b><tt style="font-size: 1.3em;">\linewidth</tt></b>
die Rahmenstärke <b><tt style="font-size: 1.3em;">\fboxrule</tt></b> (auf beiden Seiten) sowie der
Rahmenabstand <b><tt style="font-size: 1.3em;">\fboxsep</tt></b> (ebenfalls auf beiden Seiten) abgezogen.
Damit die Rechnung funktioniert, benötigt man das LaTeX-Paket
<b>calc</b>&nbsp;<a href="http://tug.ctan.org/pkg/calc">[6]</a>.

<div class="p"><!----></div>
Als nächstes soll der Befehl erweitert werden, bis er so kompliziert
bei der Benutzung wird, dass man sich eine Alternative wünscht.

<div class="p"><!----></div>

<h3>Rahmenstärke und -abstand angeben</h3>

<div class="p"><!----></div>
Als erste Erweiterung soll man die Rahmenstärke und den Abstand
zum innenliegenden Text angeben können:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
\newcommand\framedtextB[3]{%
\begingroup%
\setlength{\fboxrule}{#1}%
\setlength{\fboxsep}{#2}%
\fbox{%
\begin{minipage}{%
\linewidth-2\fboxsep-2\fboxrule}%
#3%
\end{minipage}}%
\endgroup}
</pre>

<div class="p"><!----></div>
<i>Listing: <a href="http://www.freiesmagazin.de/mobil/2011-08-listings/framedtextB.tex">framedtextB.tex</a></i>

<div class="p"><!----></div>
Die Benutzung im Dokument wäre dann:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
\framedtextB{3pt}{10pt}{\lorem}
</pre>

<div class="p"><!----></div>
was den gleichen Text wie zuvor in einer Box darstellt, wobei der
Rahmen aber eine Breite von 3 Punkt (3pt) hat und der Abstand zum
Text 10 Punkte (10pt) beträgt.

<div class="p"><!----></div>
<b>Hinweis:</b> Für die Befehle wird <b><tt style="font-size: 1.3em;">\begingroup … \endgroup</tt></b>
genutzt, damit die Veränderung von <b><tt style="font-size: 1.3em;">\fboxrule</tt></b> oder
<b><tt style="font-size: 1.3em;">\fboxsep</tt></b> am Ende eines Befehls automatisch aufgehoben wird.

<div class="p"><!----></div>
    <img border="0" src="freiesMagazin-2011-08-bilder-Dateien/framedtextB.png" /><br /><em>Die Box mit <b><tt style="font-size: 1.3em;">\framedtextB</tt></b>.</em><br />

<div class="p"><!----></div>

<h3>Textfarbe ändern</h3>

<div class="p"><!----></div>
Etwas bunter darf es ruhig zugehen, daher soll der Text farbig
dargestellt werden. Dafür benötigt man das LaTeX-Paket
<b>xcolor</b>&nbsp;<a href="http://tug.ctan.org/pkg/xcolor">[7]</a>:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
\usepackage{xcolor}

\newcommand\framedtextC[4]{%
\begingroup%
\setlength{\fboxrule}{#1}%
\setlength{\fboxsep}{#2}%
\fbox{%
\begin{minipage}{%
\linewidth-2\fboxsep-2\fboxrule}%
\textcolor{#3}{#4}%
\end{minipage}}%
\endgroup}
</pre>

<div class="p"><!----></div>
<i>Listing: <a href="http://www.freiesmagazin.de/mobil/2011-08-listings/framedtextC.tex">framedtextC.tex</a></i>

<div class="p"><!----></div>
Die Benutzung ist:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
\framedtextC{3pt}{10pt}{red}{\lorem}
</pre>

<div class="p"><!----></div>
Das erstellt den Text in der Box in roter Farbe.

<div class="p"><!----></div>
<b>Hinweis:</b> Das Paket <b>xcolor</b> wird dem Paket <b>color</b>
vorgezogen, da es eine weitaus bessere Farbunterstützung bietet und einen
kleinen Fehler in <b><tt style="font-size: 1.3em;">\fcolorbox</tt></b> korrigiert.

<div class="p"><!----></div>
    <img border="0" src="freiesMagazin-2011-08-bilder-Dateien/framedtextC.png" /><br /><em>Die Box mit <b><tt style="font-size: 1.3em;">\framedtextC</tt></b>.</em><br />

<div class="p"><!----></div>

<h3>Rahmen- und Hintergrundfarbe ändern</h3>

<div class="p"><!----></div>
Da der Befehl <b><tt style="font-size: 1.3em;">\framedtextC</tt></b> immer noch recht überschaubar ist,
soll auch die Rahmenfarbe und die Hintergrundfarbe verändert werden
können:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
\newcommand\framedtextD[6]{%
\begingroup%
\setlength{\fboxrule}{#1}%
\setlength{\fboxsep}{#2}%
\fcolorbox{#4}{#5}{%
\begin{minipage}{%
\linewidth-2\fboxsep-2\fboxrule}%
\textcolor{#3}{#6}%
\end{minipage}}%
\endgroup}
</pre>

<div class="p"><!----></div>
<i>Listing: <a href="http://www.freiesmagazin.de/mobil/2011-08-listings/framedtextD.tex">framedtextD.tex</a></i>

<div class="p"><!----></div>
Die Benutzung ist nun:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
\framedtextD{3pt}{10pt}{white}{green}{black}{\lorem}
</pre>

<div class="p"><!----></div>
was den Text weiß auf schwarzem Hintergrund darstellt und dies
alles grün umrahmt.

<div class="p"><!----></div>
    <img border="0" src="freiesMagazin-2011-08-bilder-Dateien/framedtextD.png" /><br /><em>Die Box mit <b><tt style="font-size: 1.3em;">\framedtextD</tt></b>.</em><br />

<div class="p"><!----></div>

<h3>Textausrichtung festlegen</h3>

<div class="p"><!----></div>
Da die Darstellung im Blocksatz innerhalb der Box ziemlich
langweilig ist, soll man von außen auch auf rechtsbündigen,
linksbündigen oder zentrierten Text umschalten können.

<div class="p"><!----></div>
Der Einfachheit halber wird dabei mit einem optionalen siebten 
Argument gearbeitet, welches man in eckigen Klammern nach der 
Anzahl der Argumente angibt. Für die Entscheidung, welche 
Ausrichtung gewählt wird, wird das Paket
<b>xifthen</b>&nbsp;<a href="http://tug.ctan.org/pkg/xifthen">[8]</a> benutzt:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
\usepackage{xifthen}

\newcommand\framedtextE[7][b]{%
\begingroup%
\setlength{\fboxrule}{#2}%
\setlength{\fboxsep}{#3}%
\fcolorbox{#5}{#6}{%
\begin{minipage}{%
\linewidth-2\fboxsep-2\fboxrule}%
&nbsp;&nbsp;\ifthenelse{\equal{#1}{r}}%
&nbsp;&nbsp;&nbsp;&nbsp;{\flushright}{%
&nbsp;&nbsp;\ifthenelse{\equal{#1}{l}}%
&nbsp;&nbsp;&nbsp;&nbsp;{\flushleft}{%
&nbsp;&nbsp;\ifthenelse{\equal{#1}{c}}%
&nbsp;&nbsp;&nbsp;&nbsp;{\centering}{%
&nbsp;&nbsp;\ifthenelse{\equal{#1}{b}}%
&nbsp;&nbsp;&nbsp;&nbsp;{}%
&nbsp;&nbsp;&nbsp;&nbsp;{\error{1}}}}}%
\textcolor{#4}{#7}%&nbsp;
\end{minipage}}%
\endgroup}
</pre>

<div class="p"><!----></div>
<i>Listing: <a href="http://www.freiesmagazin.de/mobil/2011-08-listings/framedtextE.tex">framedtextE.tex</a></i>

<div class="p"><!----></div>
Jetzt schwillt der Aufruf zu folgendem Konstrukt an, wenn der Text
rechtsbündig ausgegeben werden soll:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
\framedtextE[r]{3pt}{10pt}{black}{black}{white}{\lorem}
</pre>

<div class="p"><!----></div>
    <img border="0" src="freiesMagazin-2011-08-bilder-Dateien/framedtextE.png" /><br /><em>Die Box mit <b><tt style="font-size: 1.3em;">\framedtextE</tt></b>.</em><br />

<div class="p"><!----></div>
Dies kann man jetzt noch eine Weile fortführen, spätestens beim
zehnten Argument stößt man aber auf eine natürliche Begrenzung von
LaTeX, denn man wird dezent darauf hingewiesen, dass man bereits
neun Parameter hat:

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
!&nbsp;You&nbsp;already&nbsp;have&nbsp;nine&nbsp;parameters
</pre>

<div class="p"><!----></div>
Und wer sich – ohne die Definition von <b><tt style="font-size: 1.3em;">\framedtextE</tt></b>
anzuschauen – auch noch nach einem Monat gemerkt hat, welche Angabe
die Text-, Rahmen- oder Hintergrundfarbe bzw. Rahmenstärke und
-abstand ändert, hat ein wirklich gutes Gedächtnis.

<div class="p"><!----></div>
Bei derartig vielen Parametern wäre es besser,
wenn die Benutzung etwas intuitiver vonstatten
ginge. So wäre es nicht schlecht, wenn man klare Begriffe mit
einer Farbe assozieren könnte, oder wenn die Reihenfolge der Angaben
beliebig ist. Und es ist auch nicht gerade sinnvoll, dass man
grundsätzlich diese ganzen Angaben machen muss, selbst wenn man
überall die Standardwerte nutzen möchte.

<div class="p"><!----></div>
<b>Hinweis:</b> Für neue Umgebungen mittels <b><tt style="font-size: 1.3em;">\newenvironment</tt></b> gelten im
Übrigen die gleichen Aussagen.

<div class="p"><!----></div>

<h2>Argumente mithilfe von xkeyval</h2>

<div class="p"><!----></div>
Glücklicherweise hat sich schon jemand Gedanken zu den obigen 
Wünschen gemacht. Mit dem LaTeX-Paket <b>xkeyval</b> kann man alle 
Probleme umgehen, die sich gestellt haben. Der folgende Abschnitt 
soll anhand von Beispielen die Benutzung des Paketes aufzeigen, 
sodass auch ein LaTeX-Anfänger relativ schnell zu einem Ergebnis 
kommt. Für eine ausführliche Beschreibung aller Optionen und 
Möglichkeiten sollte man sich die Dokumentation auf der Webseite 
durchlesen.

<div class="p"><!----></div>
Bei der Benutzung von <b>xkeyval</b> werden die optionalen Argumente nach 
sogenannten „Schlüssel-Wert-Paaren“ durchsucht. Zu jedem Schlüssel 
wird dann der zugehörige Wert ausgelesen und der LaTeX-Schreiber 
kann den Wert entsprechend weiterverarbeiten. Manchmal wird dieser 
direkt an ein weiteres LaTeX-Kommando weitergegeben, manchmal aber 
auch erst zwischengespeichert, um später darauf zugreifen zu können.

<div class="p"><!----></div>
Die Angabe eines Schlüssels und des zugehörigen Wertes geschieht
dabei in der Regel über die Angabe <b><tt style="font-size: 1.3em;">key=value</tt></b>.

<div class="p"><!----></div>

<h3>Farbangaben der Box ersetzen</h3>

<div class="p"><!----></div>
Als Erstes sollen die drei Farbangaben für die Text-, Rahmen- und
Hintergrundfarbe so geändert werden, dass man diese als optionales
Argument angeben kann.

<div class="p"><!----></div>
Als Basis für die Änderung wird die Version <b><tt style="font-size: 1.3em;">\framedtextD</tt></b>
von oben benutzt. Die Möglichkeit zur Ausrichtung des Textes wird
dann später wieder eingefügt.

<div class="p"><!----></div>
Zuerst sollte man sich für die drei Farben drei neue Befehle
definieren, die den Farbnamen enthalten und später überschrieben
werden:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
\newcommand*\TextColor{black}
\newcommand*\BackgroundColor{white}
\newcommand*\BorderColor{black}
</pre>

<div class="p"><!----></div>
Danach kann man auch schon mit der Definition der neuen Schlüssel
beginnen:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
\makeatletter
\define@key{TextBox}{textcolor}{%
\renewcommand*\TextColor{#1}}
\define@key{TextBox}{background}{%
\renewcommand*\BackgroundColor{#1}}
\define@key{TextBox}{bordercolor}{%
\renewcommand*\BorderColor{#1}}
\makeatother
</pre>

<div class="p"><!----></div>
Dies war es auch schon. Mittels <b><tt style="font-size: 1.3em;">\define@key</tt></b> definiert man also
einen neuen Schlüssel. Das erste Argument (<b><tt style="font-size: 1.3em;">TextBox</tt></b>) gibt dabei die
Familie an, die später für die Identifikation benutzt wird. Das
zweite Argument steht für die Schlüsselbezeichnung. Als drittes
folgt der LaTeX-Code, in dem man den Schlüssel verarbeitet, auf den
man mittels des Argumentes <b><tt style="font-size: 1.3em;">#1</tt></b> zugreifen kann. Im obigen Fall
werden die drei Werte also einfach nur in den vordefinierten
Kommandos zwischengespeichert.

<div class="p"><!----></div>
Der neue Befehl sieht dann wie folgt aus:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
\newcommand\framedtextF[4][]{%
\setkeys{TextBox}{#1}%
\setlength{\fboxrule}{#2}%
\setlength{\fboxsep}{#3}%
\fcolorbox{\BorderColor}{%
\BackgroundColor}{%
\begin{minipage}{%
\linewidth-2\fboxsep-2\fboxrule}%
\textcolor{\TextColor}{#4}%
\end{minipage}}%
}
</pre>

<div class="p"><!----></div>
<i>Listing: <a href="http://www.freiesmagazin.de/mobil/2011-08-listings/framedtextF.tex">framedtextF.tex</a></i>

<div class="p"><!----></div>
Wichtig ist die Zeile

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
\setkeys{TextBox}{#1}%
</pre>

<div class="p"><!----></div>
denn über diese gibt man alle optionalen Argumente, die im ersten
Argument (<b><tt style="font-size: 1.3em;">#1</tt></b>) stehen, an <b>xkeyval</b> zur Interpretation. Dieses sucht
dann darin nach Schlüsseln und Werten und führt den zugehörigen
Code aus. Hierbei ist es wichtig, die richtige Familie anzugeben,
da sonst die Schlüssel nicht erkannt werden.

<div class="p"><!----></div>
    Nach dem Setzen der Schlüssel kann man über die Kommandos
<b><tt style="font-size: 1.3em;">\BorderColor</tt></b>, <b><tt style="font-size: 1.3em;">\BackgroundColor</tt></b> und <b><tt style="font-size: 1.3em;">\TextColor</tt></b> auf die
Farbdefinitionen zugreifen.

<div class="p"><!----></div>
Eine Benutzung sieht dann wie folgt aus:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
\framedtextF[textcolor=white,bordercolor=green,background=black]{3pt}{10pt}{\lorem}
</pre>

<div class="p"><!----></div>
Dies ist zwar länger als zuvor, hat aber den Vorteil, dass aufgrund
der Assoziation mit einem Schlüsselwort wie <b><tt style="font-size: 1.3em;">textcolor</tt></b> sofort
klar ist, was das Argument beeinflusst. Daneben ist auch die Reihenfolge
der Angaben nicht mehr relevant:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
\framedtextF[background=black,textcolor=white,bordercolor=green]{3pt}{10pt}{\lorem}
</pre>

<div class="p"><!----></div>
erzeugt die gleiche Box.

<div class="p"><!----></div>
<img border="0" src="freiesMagazin-2011-08-bilder-Dateien/framedtextF.png" /><br /><em>Die Box mit <b><tt style="font-size: 1.3em;">\framedtextF</tt></b>.</em><br />

<div class="p"><!----></div>
Da es sich um optionale Werte handelt, kann man natürlich auch nur
einen Teil angeben, beispielsweise

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
\framedtextF[textcolor=black]{3pt}{10pt}{\lorem}
</pre>

<div class="p"><!----></div>
Das Ergebnis ist nicht wie erwartet, da der Text „verschwunden“ ist. 
Der Grund liegt darin, dass noch keine Standardwerte definiert 
wurden. Das heißt, fehlt ein optionales Argument, wird es derzeit 
nicht verändert und bei erneuter Anwendung von <b><tt style="font-size: 1.3em;">\framedTextF</tt></b> 
einfach der zuvor gesetzte Wert beibehalten. Dadurch sieht man nun
(neuen) schwarzen Text auf (altem) schwarzen Hintergrund.
(Wobei etwas getrickst und die Gruppierung entfernt wurde, um
diesen Effekt zu zeigen.)

<div class="p"><!----></div>

<h4>Fehlende Schlüssel vorbelegen</h4>

<div class="p"><!----></div>
Will man vorbelegte Standardwerte nutzen, wenn die Angabe einer Option
komplett fehlt, fügt man folgende Zeile (am besten unter der Definition
der Schlüssel) ein:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
\presetkeys{TextBox}{%
bordercolor=black,textcolor=black,%
background=white}{}%
</pre>

<div class="p"><!----></div>
Erzeugt man nun das LaTeX-Dokument mit gleichem Code wie oben,
wird der Hintergrund weiß angezeigt, sodass man den schwarzen Text wieder
sehen kann. Wer nicht glaubt, dass das funktioniert, kann auch die
Textfarbe auf Rot ändern:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
\framedtextF[textcolor=red]{3pt}{10pt}{\lorem}
</pre>

<div class="p"><!----></div>
Der Befehl <b><tt style="font-size: 1.3em;">\presetkeys</tt></b> definiert wie gesagt die Standardwerte, 
wenn eine Option nicht angegeben ist. Das erste Argument gibt 
wieder die Familie an. Das zweite und dritte Argument sind ähnlich, 
denn das zweite setzt die Standardwerte <em>bevor</em> die 
benutzerdefinierten Werte mit <b><tt style="font-size: 1.3em;">\setkeys</tt></b> gesetzt werden, das dritte 
Argumente setzt diese erst <em>danach</em>. Die Standardwerte werden dabei 
aber nur gesetzt, falls der Wert nicht als Option vom Benutzer 
angegeben wurde.

<div class="p"><!----></div>
In obigem Beispiel hat die Unterscheidung, ob man die Standardwerte
zuerst oder zuletzt setzt, keine Bedeutung. Dies ist aber
beispielsweise dann wichtig, wenn man in einer Schlüsseldefinition
auf einen anderen Schlüsselwert zugreifen will. Näheres dazu erfährt
man in der Dokumentation.

<div class="p"><!----></div>
Die Vorbelegung bleibt aktiv, bis sie mit <b><tt style="font-size: 1.3em;">\presetkeys</tt></b>
erneut überschrieben wird. Das heißt, man kann in jedem Befehl
vor <b><tt style="font-size: 1.3em;">\setkeys</tt></b> die Vorbelegung anders setzen, wenn das gewünscht ist.

<div class="p"><!----></div>
<b>Hinweis:</b> Natürlich muss man <b><tt style="font-size: 1.3em;">\presetkeys</tt></b> nicht einsetzen,
sondern kann auch selbst für eine Vorbelegung sorgen, indem man
vor dem <b><tt style="font-size: 1.3em;">\setkeys</tt></b>-Befehl alle Werte selbst mit
<b><tt style="font-size: 1.3em;">\renewcommand</tt></b> initialisiert. Alternativ kann man auch
ein zweites <b><tt style="font-size: 1.3em;">\setkeys</tt></b> aufrufen, um Werte einmalig zu setzen.

<div class="p"><!----></div>

<h3>Boxgrößen ändern</h3>

<div class="p"><!----></div>
Wie oben bei den Farben soll natürlich entsprechend mit den Größenangaben
zu Rahmenstärke und Rahmenabstand verfahren werden. Hier kann man
zuerst mit der Zwischenspeicherung der Längen wie oben beginnen:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
\newlength{\BorderWidth}
\newlength{\BorderSeparation}

\makeatletter
\define@key{TextBox}{border}{%
\setlength\BorderWidth{#1}}
\define@key{TextBox}{bordersep}{%
\setlength\BorderSeparation{#1}}
\makeatother
</pre>

<div class="p"><!----></div>
Die Vorbelegung sollte man auch nicht vergessen:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
\presetkeys{TextBox}{%
bordercolor=black,textcolor=black,%
background=white,border=0.8pt,%
bordersep=3pt}{}
</pre>

<div class="p"><!----></div>
Und natürlich benötigt man noch ein neues Kommando:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
\newcommand\framedtextG[2][]{%
\begingroup%
\setkeys{TextBox}{#1}%
\setlength{\fboxrule}{%
&nbsp;&nbsp;\BorderWidth}%
\setlength{\fboxsep}{%
&nbsp;&nbsp;\BorderSeparation}%
\fcolorbox{\BorderColor}{%
\BackgroundColor}{%
\begin{minipage}{%
\linewidth-2\fboxsep-2\fboxrule}%
\textcolor{\TextColor}{#2}%
\end{minipage}}%
\endgroup}
</pre>

<div class="p"><!----></div>
<i>Listing: <a href="http://www.freiesmagazin.de/mobil/2011-08-listings/framedtextG.tex">framedtextG.tex</a></i>

<div class="p"><!----></div>
Die Benutzung im Standardfall sieht nun ganz einfach aus:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
\framedtextG{\lorem}
</pre>

<div class="p"><!----></div>
Oder mit einem etwas dickeren und grünen Rahmen wie folgt:

<div class="p"><!----></div>
    
<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
\framedtextG[bordercolor=green,border=3pt]{\lorem}
</pre>

<div class="p"><!----></div>
<img border="0" src="freiesMagazin-2011-08-bilder-Dateien/framedtextG.png" /><br /><em>Die Box mit <b><tt style="font-size: 1.3em;">\framedtextG</tt></b>.</em><br />

<div class="p"><!----></div>
Eigentlich ist diese Lösung aber umständlich, da man die Längen für
<b><tt style="font-size: 1.3em;">\fboxrule</tt></b> und <b><tt style="font-size: 1.3em;">\fboxsep</tt></b> auch gleich ohne Umwege setzen kann.
Dafür entfernt man die beiden <b><tt style="font-size: 1.3em;">\newlength</tt></b>-Zeilen wieder und ersetzt
die Definition der Schlüssel sowie den Befehl <b><tt style="font-size: 1.3em;">\framedtextG</tt></b> durch:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
\makeatletter
\define@key{TextBox}{border}{%
&nbsp;&nbsp;\setlength\fboxrule{#1}}
\define@key{TextBox}{bordersep}{%
&nbsp;&nbsp;\setlength\fboxsep{#1}}
\makeatother
\newcommand\framedtextG[2][]{%
\begingroup%
\setkeys{TextBox}{#1}%
\fcolorbox{\BorderColor}{%
\BackgroundColor}{%
\begin{minipage}{%
\linewidth-2\fboxsep-2\fboxrule}%
\textcolor{\TextColor}{#2}%
\end{minipage}}%
\endgroup}
</pre>

<div class="p"><!----></div>
<i>Listing: <a href="http://www.freiesmagazin.de/mobil/2011-08-listings/framedtextG2.tex">framedtextG.tex (2. Version)</a></i>

<div class="p"><!----></div>
So wirkt das Ganze schon etwas übersichtlicher.

<div class="p"><!----></div>

<h4>Fehlende Schlüsselwerte vorbelegen</h4>

<div class="p"><!----></div>
Neben der Vorbelegung mit Standardwerten, wenn der Schlüssel fehlt,
gibt es auch die Besonderheit, einen Schlüssel mit einem Wert
vorzubelegen, wenn der Schlüssel angeben wird, aber kein Wert.

<div class="p"><!----></div>
Als sinnvolles Beispiel soll der Rahmen der Box standardmäßig gar
nicht angezeigt werden. Nur wenn man mindestens <b><tt style="font-size: 1.3em;">border</tt></b>
oder <b><tt style="font-size: 1.3em;">border=WERT</tt></b> als Option schreibt, soll ein Rahmen angezeigt werden.

<div class="p"><!----></div>
Dafür ändert man die Schlüsseldefinition wie folgt:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
\define@key{TextBox}{border}[0.8pt]{\setlength{\BorderWidth}{#1}}
</pre>

<div class="p"><!----></div>
und die Vorbelegung in

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
\presetkeys{TextBox}{%
bordercolor=black,textcolor=black,%
background=white,border=0pt,%
bordersep=3pt}{}
</pre>

<div class="p"><!----></div>
Das bedeutet also, dass wenn die Option <b><tt style="font-size: 1.3em;">border=WERT</tt></b> bei der Angabe von
<b><tt style="font-size: 1.3em;">\framedtextG</tt></b> fehlt, kein Rahmen angezeigt wird. Schreibt
man dageben nur <b><tt style="font-size: 1.3em;">border</tt></b>, wird der in eckigen Klammern angegebene
vordefinierte Wert bei <b><tt style="font-size: 1.3em;">\define@key</tt></b> benutzt.

<div class="p"><!----></div>
Als kleine Übung kann man den Abstand zum Rahmen ebenfalls per
Standard auf <b><tt style="font-size: 1.3em;">0pt</tt></b> setzen, bei der Angabe von <b><tt style="font-size: 1.3em;">bordersep</tt></b> aber den
Wert <b><tt style="font-size: 1.3em;">3pt</tt></b> nehmen. Fortgeschrittene LaTeX-Nutzer und <b>xkeyval</b>-Kenner
können versuchen, den Wert bei <b><tt style="font-size: 1.3em;">bordersep</tt></b> in Abhängigkeit von
<b><tt style="font-size: 1.3em;">border</tt></b> zu setzen, denn nur wenn der Rahmen überhaupt sichtbar ist,
ist auch ein Rahmenabstand sinnvoll.

<div class="p"><!----></div>

<h3>Textausrichtung einstellen</h3>

<div class="p"><!----></div>
Was jetzt noch fehlt, ist die Einstellung der Textausrichtung. Es
wäre zwar möglich, diese nach wie vor über simple Buchstaben wie
<b><tt style="font-size: 1.3em;">r</tt></b>, <b><tt style="font-size: 1.3em;">l</tt></b>, <b><tt style="font-size: 1.3em;">c</tt></b> oder <b><tt style="font-size: 1.3em;">b</tt></b> zu definieren, nur würde man dann für jede
dieser Optionen einen eigenen Schlüssel benötigen. Und die Frage ist,
was passiert, wenn jemand <b><tt style="font-size: 1.3em;">r,l</tt></b> als Option angibt.

<div class="p"><!----></div>
Aus diesem Grund ist es besser, einen Schlüssel <b><tt style="font-size: 1.3em;">align</tt></b> zu definieren,
der nur bestimmte Werte akzeptiert. Hierfür gibt es den sogenannten
<b><tt style="font-size: 1.3em;">\choicekey</tt></b>:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
\makeatletter
\define@choicekey{TextAlignment}{%
align}[\val\al]{right,left,center,%
block}
{%
&nbsp;&nbsp;\ifcase\al\relax%
&nbsp;&nbsp;&nbsp;&nbsp;\flushright%
&nbsp;&nbsp;\or%
&nbsp;&nbsp;&nbsp;&nbsp;\flushleft%
&nbsp;&nbsp;\or%
&nbsp;&nbsp;&nbsp;&nbsp;\centering%
&nbsp;&nbsp;\or%
&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;nichts&nbsp;tun
&nbsp;&nbsp;\fi}
\makeatother

\presetkeys{TextAlignment}{%
align=block}{}
</pre>

<div class="p"><!----></div>
<i>Listing: <a href="http://www.freiesmagazin.de/mobil/2011-08-listings/TextAlignment.tex">TextAlignment.tex</a></i>

<div class="p"><!----></div>
Alternativ könnte man auch die Verwendung von <b><tt style="font-size: 1.3em;">align</tt></b> so
ändern, dass der Benutzer immer den echten Befehl angeben muss, also
beispielsweise <b><tt style="font-size: 1.3em;">align=\flushright</tt></b> für rechtsbündigen Text.
Dies erfordert aber, dass der Benutzer die genauen LaTeX-Befehle
kennen muss, und würde außerdem dem Beispiel hier im Artikel die
Grundlage entziehen.

<div class="p"><!----></div>
Die Argumente von <b><tt style="font-size: 1.3em;">\define@choicekey</tt></b> sind als Erstes wieder die
Familie, danach das Schlüsselwort und als drittes, optionales Argument
die Zuweisung des Wertes (in unserem Beispiel kann man über <b><tt style="font-size: 1.3em;">al</tt></b> darauf
zugreifen). Danach folgt die Liste der erlaubten zuweisbaren Werte
und zum Schluss der LaTeX-Code, der mittels <b><tt style="font-size: 1.3em;">\ifcase</tt></b> zu den
erlaubten Werten den richtigen Code ausführt. Dabei muss die
Reihenfolge der erlaubten Werte mit den auszuführenden Befehlen
übereinstimmen.

<div class="p"><!----></div>
Man sollte bei dem Beispiel aber aufpassen, weil eine neue Familie
<b><tt style="font-size: 1.3em;">TextAlignment</tt></b> benutzt wird. Den Grund dafür zeigt die Definition des
neuen Befehls:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
\newcommand\framedtextH[2][]{%
\begingroup%
\setkeys*{TextBox}{#1}%
\fcolorbox{\BorderColor}{%
&nbsp;&nbsp;\BackgroundColor}{%
\begin{minipage}{%
\linewidth-2\fboxsep-2\fboxrule}%
\setrmkeys{TextAlignment}%
\textcolor{\TextColor}{#2}%
\end{minipage}}%
\endgroup}
</pre>

<div class="p"><!----></div>
<i>Listing: <a href="http://www.freiesmagazin.de/mobil/2011-08-listings/framedtextH.tex">framedtextH.tex</a></i>

<div class="p"><!----></div>
Die Schlüssel für die Ausrichtung (englisch „alignment“) dürfen
erst innerhalb der Minipage-Umgebung gesetzt werden, da die daraus
entstehenden Befehle wie <b><tt style="font-size: 1.3em;">\flushleft</tt></b> oder <b><tt style="font-size: 1.3em;">\centering</tt></b> außerhalb
der Umgebung nicht die richtige Wirkung zeigen würden.

<div class="p"><!----></div>
Die Familie <b><tt style="font-size: 1.3em;">TextBox</tt></b> kennt aber keinen Schlüssel
<b><tt style="font-size: 1.3em;">align</tt></b>, daher muss dieser ignoriert werden. Man könnte dies
entweder durch die Zeile

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
\setkeys{TextBox}[align]{#1}%
</pre>

<div class="p"><!----></div>
erreichen, bei dem alle unbekannten Schlüsselworte in den eckigen
Klammern ignoriert werden.

<div class="p"><!----></div>
Besser ist aber die Lösung über <b><tt style="font-size: 1.3em;">\setkeys*</tt></b> oben. Alle
in der Familie unbekannten Werte werden in einer extra Liste
gespeichert, die man dann später mittels <b><tt style="font-size: 1.3em;">\setrmkeys</tt></b>
der richtigen Familie zuweisen kann (<b><tt style="font-size: 1.3em;">rm</tt></b> steht für „remaining“).

<div class="p"><!----></div>
    <img border="0" src="freiesMagazin-2011-08-bilder-Dateien/framedtextH.png" /><br /><em>Die Box mit <b><tt style="font-size: 1.3em;">\framedtextH</tt></b>.</em><br />

<div class="p"><!----></div>
Von der unsauberen Lösung

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
\setkeys{TextBox,TextAlignment}{#1}%
</pre>

<div class="p"><!----></div>
anstelle des <b><tt style="font-size: 1.3em;">\setrmkeys</tt></b> sollte man absehen, da man im
Allgemeinen nicht sicherstellen kann, dass die Schlüsselzuweisung
von <b><tt style="font-size: 1.3em;">TextBox</tt></b> keine negativen Nebeneffekte auf den
LaTeX-Code hat.

<div class="p"><!----></div>

<h3>Text mit Umbrüchen</h3>

<div class="p"><!----></div>
Obige Definition von <b><tt style="font-size: 1.3em;">\framedtextH</tt></b> hat den Nachteil,
dass es keine Texte mit mehreren Absätzen zulässt. Als Verbesserung kann man
folgende Definition nutzen:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
\newsavebox\MyFrameBox
\newcommand\framedtextI[2][]{%
\begingroup%
\setkeys*{TextBox}{#1}%
\sbox{\MyFrameBox}{%
\begin{minipage}{%
\linewidth-2\fboxsep-2\fboxrule}%
\setrmkeys{TextAlignment}%
\color{\TextColor}%
#2%
\end{minipage}%
}%
\fcolorbox{\BorderColor}{%
\BackgroundColor}{\usebox{%
\MyFrameBox}}%
\endgroup}
</pre>

<div class="p"><!----></div>
<i>Listing: <a href="http://www.freiesmagazin.de/mobil/2011-08-listings/framedtextI.tex">framedtextI.tex</a></i>

<div class="p"><!----></div>
Dadurch wird der Inhalt im Boxregister <b><tt style="font-size: 1.3em;">\MyFrameBox</tt></b> definiert
und dieser erst danach in <b><tt style="font-size: 1.3em;">\fcolorbox</tt></b>
verwendet. Zusätzlich wurde von <b><tt style="font-size: 1.3em;">\textcolor</tt></b> auf
<b><tt style="font-size: 1.3em;">\color</tt></b> umgestellt, da dies sonst mehrere Absätze im Text
verhindern würde.

<div class="p"><!----></div>
Die Benutzung ist dann

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
\framedtextI[border]{\lorem\par\lorem}
</pre>

<div class="p"><!----></div>
    <img border="0" src="freiesMagazin-2011-08-bilder-Dateien/framedtextI.png" /><br /><em>Die Box mit <b><tt style="font-size: 1.3em;">\framedtextI</tt></b>.</em><br />

<div class="p"><!----></div>

<h3>Weitere xkeyval-Schlüssel</h3>

<div class="p"><!----></div>
Es gibt noch zwei weitere Befehle, die für den einen oder anderen Benutzer
wichtig sein könnten. Zum einen:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
\define@cmdkey{FAMILIE}{SCHLUESSEL}[STANDARDWERT]{\latex{}-CODE}
</pre>

<div class="p"><!----></div>
Dies definiert, analog zu oben, einen normalen Schlüssel.
Zusätzlich hat man innerhalb des LaTeX-Codes (letztes Argument)
über das Kommando <b><tt style="font-size: 1.3em;">\cmdKV@FAMILIE@SCHLUESSEL</tt></b> Zugriff auf den
Inhalt des definierten Schlüssels.

<div class="p"><!----></div>

<div class="p"><!----></div>
Der zweite Befehl definiert boolesche Schlüssel:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
\define@boolkey{FAMILIE}{SCHLUESSEL}[STANDARDWERT]{\latex{}-CODE}
</pre>

<div class="p"><!----></div>
Diese ähneln <b><tt style="font-size: 1.3em;">\choicekey</tt></b>, denn es sind nur die Schlüsselwerte
<b><tt style="font-size: 1.3em;">true</tt></b> und <b><tt style="font-size: 1.3em;">false</tt></b> erlaubt. Man kann sich zum Beispiel eine
neue boolesche Variable definieren

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
\newboolean{Variable}
</pre>

<div class="p"><!----></div>
und im LaTeX-Code Folgendes schreiben:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
\setboolean{Variable}{#1}
</pre>

<div class="p"><!----></div>
Danach kann man in seinem Code entsprechend des Wertes
unterschiedliche Befehle ausführen:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.3em;">
\ifthenelse{\boolean{Variable}}{%
&nbsp;&nbsp;%&nbsp;Code,&nbsp;falls&nbsp;Variable&nbsp;true&nbsp;ist
}{%
&nbsp;&nbsp;%&nbsp;Code,&nbsp;falls&nbsp;Variable&nbsp;false&nbsp;ist
}
</pre>

<div class="p"><!----></div>

<h2>Abschließende Bemerkung</h2>

<div class="p"><!----></div>
Wie oben angekündigt, geben die im Artikel vorgestellten Beispiele
nur einen kleinen Überblick über das, was man mit <b><tt style="font-size: 1.3em;">xkeyval</tt></b> machen kann.
Dennoch kann man auch als LaTeX-Anfänger sehr schnell gute Resultate
erzielen, wenn man das recht einfache Prinzip verstanden hat. Und
selbst, wenn man nur Copy&nbsp;&amp;&nbsp;Paste nutzt, kommt man womöglich zum Ziel,
auch ohne die Details zu verstehen.

<div class="p"><!----></div>
Das LaTeX-Dokument, welches alle Beispiele enthält, kann auch komplett
heruntergeladen werden: <a href="http://www.freiesmagazin.de/mobil/2011-08-listings/framedtext.tex">framedtext.tex</a>.

<div class="p"><!----></div>
    <font color="#595959"><font size="+1">Links</font></font><br />
        
[1] <a href="http://tug.ctan.org/pkg/xkeyval"><tt style="font-size: 1.3em;">http://tug.ctan.org/pkg/xkeyval</tt></a><br />

<div class="p"><!----></div>
[2] <a href="http://tug.ctan.org/pkg/keyval"><tt style="font-size: 1.3em;">http://tug.ctan.org/pkg/keyval</tt></a><br />

<div class="p"><!----></div>
[3] <a href="http://tug.ctan.org/pkg/pgfkeys"><tt style="font-size: 1.3em;">http://tug.ctan.org/pkg/pgfkeys</tt></a><br />

<div class="p"><!----></div>
[4] <a href="http://tug.ctan.org/pkg/kvoptions"><tt style="font-size: 1.3em;">http://tug.ctan.org/pkg/kvoptions</tt></a><br />

<div class="p"><!----></div>
[5] <a href="http://tug.ctan.org/pkg/kvsetkeys"><tt style="font-size: 1.3em;">http://tug.ctan.org/pkg/kvsetkeys</tt></a><br />

<div class="p"><!----></div>
[6] <a href="http://tug.ctan.org/pkg/calc"><tt style="font-size: 1.3em;">http://tug.ctan.org/pkg/calc</tt></a><br />

<div class="p"><!----></div>
[7] <a href="http://tug.ctan.org/pkg/xcolor"><tt style="font-size: 1.3em;">http://tug.ctan.org/pkg/xcolor</tt></a><br />

<div class="p"><!----></div>
[8] <a href="http://tug.ctan.org/pkg/xifthen"><tt style="font-size: 1.3em;">http://tug.ctan.org/pkg/xifthen</tt></a><br />

<div class="p"><!----></div>
            
<table border="1">
<tr><td colspan="1" align="center"><font size="+0"><b>Autoreninformation</b></font></td></tr>
<tr><td align="left"><b>Dominik Wagenführ</b>&nbsp;(<a href="http://www.deesaster.org/blog/">Webseite</a>)
ist Chefredakteur bei <b><font color="#595959">freies</font></b><font color="#FF630A">Magazin</font> und kümmert
sich dort auch um die Gestaltung der TeX-Infrastruktur. xkeyval hat
sich dabei als sehr großer Helfer herausgestellt.
</td></tr>
<tr><td align="left">    </td></tr></table>



<div class="p"><!----></div>
            <a href="http://www.freiesmagazin.de/comment/reply/236?edit[subject]=Variable Argumente in LaTeX nutzen#comment-form"><i>Diesen Artikel kommentieren</i></a><br /><br />
        <a href="freiesMagazin-2011-08-bilder.html#index">Zum Index</a><br /><hr />

<div class="p"><!----></div>
            

<div class="p"><!----></div>
<h1><font color="#595959"><a name="11_08_humbleindiebundle3">Kurzreview: Humble Indie Bundle 3</a><a name="11_08_humbleindiebundle3">
</a></font></h1>von Dominik Wagenführ

<div class="p"><!----></div>
        <b>D</b><b>as Humble Indie Bundle&nbsp;<a href="http://www.humblebundle.com/">[1]</a> hat schon 
eine gewisse Tradition, so wurde die erste Version bereits im Mai 2010 
veröffentlicht. Teil des Bundles sind Spiele, die von verschiedenen 
Independent-Studios entwickelt wurden und auf allen großen 
Plattformen Linux, Mac OS X und Windows laufen. Ende Juli wurde die 
dritte Ausgabe veröffentlicht, auf deren Inhalt in dem Artikel ein 
kleiner Blick geworfen werden soll.</b>

<div class="p"><!----></div>

<h2>Geschichte</h2>

<div class="p"><!----></div>
Das Humble Indie Bundle wurde erstmals im Mai 2010
veröffentlicht&nbsp;<a href="http://www.deesaster.org/blog/index.php?/archives/1420">[2]</a>.
Es wurde vor allem deswegen bekannt, weil jeder Käufer den Preis
selbst bestimmten konnte. Umso erstaunter waren die Anbieter,
dass nach den zwei Wochen, die das Paket erhältlich war, über
eine Million US-Dollar eingenommen werden
konnte&nbsp;<a href="http://www.deesaster.org/blog/index.php?/archives/1425">[3]</a>.
Den Kaufpreis kann man dabei auf die Spielentwickler, die Anbieter 
des Humble Indie Bundles, die Electronic Frontier
Foundation&nbsp;<a href="https://www.eff.org/">[4]</a> und die Charity-Organisation
Child's Play&nbsp;<a href="http://www.childsplaycharity.org/">[5]</a> verteilen.
Ein weiterer wichtiger Aspekt des Spielepaketes ist aber auch,
dass die Spiele DRM-frei sind und unter den drei großen Plattformen 
Linux, Mac&nbsp;OS&nbsp;X und Windows spielbar sind. 

<div class="p"><!----></div>
Aufgrund des Erfolges des ersten Paketes, welches u.a. großartige
Spiele wie World of Goo (siehe <b><font color="#595959">freies</font></b><font color="#FF630A">Magazin</font>
03/2009&nbsp;<a href="http://www.freiesmagazin.de/freiesMagazin-2009-03">[6]</a>),
Aquaria&nbsp;<a href="http://www.bit-blot.com/aquaria/">[7]</a> oder Gish (siehe
<b><font color="#595959">freies</font></b><font color="#FF630A">Magazin</font> 07/2010)&nbsp;<a href="http://www.freiesmagazin.de/freiesMagazin-2010-07">[8]</a>
enthielt, gab es im Dezember 2010 ein zweites Spielepaket zu kaufen.
Diesmal waren hervorragende Spiele wie Machinarium (siehe <b><font color="#595959">freies</font></b><font color="#FF630A">Magazin</font>
02/2010&nbsp;<a href="http://www.freiesmagazin.de/freiesMagazin-2010-02">[9]</a>) und
Osmos (siehe <b><font color="#595959">freies</font></b><font color="#FF630A">Magazin</font> 07/2010&nbsp;<a href="http://www.freiesmagazin.de/freiesMagazin-2010-07">[10]</a>)
dabei.

<div class="p"><!----></div>
Im April 2011 gab es dann eine kleine Sonderedition in Form eines
Humble Frozenbyte Bundle&nbsp;<a href="http://www.deesaster.org/blog/index.php?/archives/1647">[11]</a>,
welches nur Spiele der Spieleschmiede Frozenbyte enthielt, darunter
unter anderem Trine (siehe <b><font color="#595959">freies</font></b><font color="#FF630A">Magazin</font>
07/2011&nbsp;<a href="http://www.freiesmagazin.de/freiesMagazin-2011-07">[12]</a>).

<div class="p"><!----></div>
Das dritte Humble Indie Bundle steht seit dem 27. Juli 2011 zum Kauf 
bereit. Die Aktion läuft noch bis zum Dienstag, den 9. August 2011, 
wird aber gegebenenfalls wie die beiden Bundles zuvor etwas 
verlängert. Da das Spielepaket nach der Aktion nicht mehr 
erhältlich ist, sollte man zuschlagen, solange man noch kann.

<div class="p"><!----></div>
In den nächsten Zeilen wird etwas auf die enthaltenen Spiele 
eingegangen, welche zu einem großen Teil aus Physik- und/oder 
Denkaufgaben bestehen.

<div class="p"><!----></div>
<b>Hinweis:</b> Alle Spiele wurde unter Ubuntu 10.04 64-bit auf einem
Intel Core2 Duo mit 3 GHz, 4 GB RAM und einer NVIDIA-GTX460-Grafikkarte
getestet.

<div class="p"><!----></div>

<h2>Cogs</h2>

<div class="p"><!----></div>
Cogs&nbsp;<a href="http://www.cogsgame.com/">[13]</a> ist ein sehr einfach zu 
erlernendes Puzzlespiel. Die Aufgabe ist es, durch das Verschieben 
von Platten, auf denen Zahnräder oder Röhren befestigt sind, eine 

Maschine anzutreiben, Glocken läuten zu lassen oder ähnliches.
Die einzelnen Elemente müssen so angeordnet werden, dass sie 
ineinander greifen. Damit dies nicht zu langweilig ist, befinden 
sich die Puzzles manchmal auf mehreren Seiten eines Würfels oder auf 
der Vorder- und Rückseite einer Tafel.

<div class="p"><!----></div>
Als kleine Herausforderung erhält man Trophäen, wenn man ein Puzzle
innerhalb einer gewissenen Zeit oder mit einer geringen Anzahl von
Zügen erledigt. 

<div class="p"><!----></div>
Die Spielidee ist nicht sonderlich neu, die grafische Präsentation
ist aber recht hübsch. Entsprechend wurde Cogs auch auf dem Independent
Games Festival 2010 in der Kategorie „Excellence In Design“
nominiert&nbsp;<a href="http://www.igf.com/2010finalistswinners.html#finalists">[14]</a>.

<div class="p"><!----></div>
    <img border="0" src="freiesMagazin-2011-08-bilder-Dateien/humble3-cogs.jpg" /><br /><em>Wenn die Zahnräder richtig stehen, sieht man dieses lustige Kerlchen aus der Box springen.</em><br />

<div class="p"><!----></div>
            
<h2>VVVVVV</h2>

<div class="p"><!----></div>
VVVVVV&nbsp;<a href="http://thelettervsixtim.es/">[15]</a> ist ein Jump'n'Run-Spiel,
welches von der grafischen Präsentation stark an die Spiele der C64-Ära
erinnert. Dies tut dem Spielspaß aber keinen Abbruch, sondern
verschafft manchem sicher auch eine Art Nostalgie-Gefühl.

<div class="p"><!----></div>
Man selbst übernimmt die Rolle des Raumschiff-Captains Viridian, der
auf eine Raumanomalie stößt, welche die ganzen Crew auf dem Raumschiff
verteilt. Die Aufgabe ist es, sich durch das Raumschiff zu
kämpfen und die Crew zu suchen, wobei weitere Störungen wie
Endlosschleifen oder Portale die Suche nicht einfacher machen.

<div class="p"><!----></div>
<img border="0" src="freiesMagazin-2011-08-bilder-Dateien/humble3-vvvvvv1.png" /><br /><em>Ein einfaches Durchqueren des Raums ist nicht immer möglich.</em><br />

<div class="p"><!----></div>
Die Steuerung ist sehr simpel, da man sich nur nach rechts und links
bewegen kann. Mit der Aktionstaste kehrt man aber die Gravitation auf
dem Raumschiff um und kann dementsprechend an der Decke entlang gehen.
Dies ist auch notwendig, um alle Räume des Raumschiffes zu erreichen.

<div class="p"><!----></div>
Obwohl das Spiel so simpel ist, kann es für einige Stunden fesseln.
Dank der Übersichtskarte sieht man sogar, welche Gebiete des
Raumschiffes man noch nicht erkundet hat. Und gerade das animiert einen
dazu, doch noch den nächsten Raum aufzusuchen.

<div class="p"><!----></div>
<img border="0" src="freiesMagazin-2011-08-bilder-Dateien/humble3-vvvvvv2.png" /><br /><em>Die Räume des Raumschiffs in der Übersicht.</em><br />

<div class="p"><!----></div>

<h2>Crayon Physics Deluxe</h2>

<div class="p"><!----></div>
Crayon Physics Deluxe&nbsp;<a href="http://www.crayonphysics.com/">[16]</a> ist ein
Physik-Puzzle-Spiel, bei der man sich als Maler austoben kann. Mit
einem Wachsmalstift bewaffnet ist es die Aufgabe, in jedem Level einen
roten Ball zu einem Stern zu bringen. Dabei zeichnet man mit dem Stift
Objekte, die dann mit den vorhandenen Spielelementen physikalisch
korrekt interagieren. So kann man beispielsweise eine Schleuder bauen,
um den Ball zum Stern zu befördern. Das Prinzip erinnert dabei
an das Physik-Spiel Phun (siehe <b><font color="#595959">freies</font></b><font color="#FF630A">Magazin</font> 04/2008&nbsp;<a href="http://www.freiesmagazin.de/freiesMagazin-2008-04">[17]</a>).

<div class="p"><!----></div>
    <img border="0" src="freiesMagazin-2011-08-bilder-Dateien/humble3-crayon2.jpg" /><br /><em>Wie bekommt man den Ball zum Stern?.</em><br />

<div class="p"><!----></div>
Das Spielprinzip ist leicht erklärt, macht aber Spaß. Etwas
Experimentierfreude vorausgesetzt kann man sich sehr lange mit
Crayon Physics Deluxe beschäftigen. Schade ist, dass auf dem
Testrechner der Ton nicht so ging, sodass man sich eine eigene
musikalische Untermalung suchen musste.

<div class="p"><!----></div>
    Ebenso schade ist es, dass das Spiel nur in Englisch vorliegt. Vor 
allem für jüngere Spieler wäre es gut gewesen, auch eine deutsche
Übersetzung anzubieten, denn diese können viel Spaß beim Malen haben.
Für das gute Spielprinzip hat Crayon Physics Deluxe auch zurecht
den Seumas McNally Grand Prize auf dem Independent Games Festival
2008&nbsp;<a href="http://www.igf.com/2008finalistswinners.html">[18]</a> erhalten.

<div class="p"><!----></div>
<img border="0" src="freiesMagazin-2011-08-bilder-Dateien/humble3-crayon1.jpg" /><br /><em>Im Menü wählt man das Level aus.</em><br />

<div class="p"><!----></div>

<h2>And Yet It Moves</h2>

<div class="p"><!----></div>
Das Jump'n'Run And Yet It Moves&nbsp;<a href="http://www.andyetitmoves.net/">[19]</a>
besticht vor allem durch seine Optik, denn alle Levels sind im
Scherenschnitt gehalten. Bäume sind also beispielsweise nicht
bloß gezeichnet, sondern wirken eher wie aus mehreren Fotos
herausgerissen und zusammengeklebt.

<div class="p"><!----></div>
Das Spielprinzip setzt VVVVVV von oben fort, auch wenn man hier nicht
die Gravitation umdreht, sondern die Welt mit den Pfeiltasten
                
    

<div class="p"><!----></div>
    drehen
kann, um zum Ausgang eines Levels zu kommen. In jedem Level gibt
es sehr fair verteilt Speicherpunkte, die einem zugleich die Richtung
weisen, in denen das Level weitergeht. Das ist auch notwendig, denn
wenn man sich bzw. die Welt mehrmals gedreht hat, weiß man nicht mehr,
wo eigentlich oben und unten ist.

<div class="p"><!----></div>
<img border="0" src="freiesMagazin-2011-08-bilder-Dateien/humble3-ayim1.jpg" /><br /><em>Der Schatten weist den Weg.</em><br />

<div class="p"><!----></div>
Spannend wird das Spiel nicht nur, weil man den Ausgang suchen muss,
sondern auch, weil man aufpassen muss, nicht aus zu großer Höhe zu
fallen oder von herabfallenden Steinen erschlagen zu werden. Daneben
versperren auch fleischfressende Pflanzen oder schlafende Gorillas
den Weg.

<div class="p"><!----></div>
Erfreulich ist, dass das Spiel ins Deutsche übersetzt wurde, auch
wenn man eigentlich keine große Erklärung benötigt. Der
Schwierigkeitsgrad ist angenehm steigend und somit auch für jüngere
Spieler geeignet. Gestört haben nur die Tonstörungen, die an einigen
Stellen auftauchten.

<div class="p"><!----></div>
Auch And Yet It Moves konnte beim Independent Games Festival 2007
als Student Showcase Winner einen Preis erzielen&nbsp;<a href="http://www.igf.com/2007finalistswinners.html#and">[20]</a>.

<div class="p"><!----></div>
<img border="0" src="freiesMagazin-2011-08-bilder-Dateien/humble3-ayim2.jpg" /><br /><em>Die fleischfressende Pflanze lässt einen nicht so einfach vorbei.</em><br />

<div class="p"><!----></div>

<h2>Hammerfight</h2>

<div class="p"><!----></div>
Das aus Russland stammende Hammerfight&nbsp;<a href="http://www.koshutin.com/">[21]</a>
ist ein 2-D-Actionspiel, bei
    dem man mit einem an einer Flugmaschine
versehenen Hammer durch rhytmische Mausbewegungen diesen zum Schwingen
bringen muss, um dann damit den Gegner zu treffen.

<div class="p"><!----></div>
Das Spielprinzip klingt nicht so schlecht, auch wenn es sicher nicht 
jedermanns Geschmack ist, der Test schlug nur leider komplett fehl, 
weil die Maussteuerung so langsam reagierte, dass man das Fluggerät 
nicht kontrolliert bewegen, sondern nur hektisch mit der Maus 
fuchteln konnte. Aus dem Grund wurde im Test selbst nach mehreren 
Versuchen nicht einmal das erste Level überstanden, sodass sehr 
wenig über die Spielentwicklung gesagt werden kann.

<div class="p"><!----></div>
Grafisch präsentiert sich das Spiel ganz nett, auch wenn bei
der geringen Auflösung viele Details untergehen.

<div class="p"><!----></div>
<img border="0" src="freiesMagazin-2011-08-bilder-Dateien/humble3-hammerfight.jpg" /><br /><em>Klopperei mit Hammern.</em><br />

<div class="p"><!----></div>

<h2>Fazit</h2>

<div class="p"><!----></div>
Auch wenn (nach meiner Meinung) mit And Yet It Moves,
VVVVVV und Crayon Physics Deluxe drei sehr gute Spiele im Humble
Indie Bundle enthalten sind, sind die anderen beiden doch nur nettes
Beiwerk. Im Vergleich zu den vorherigen Bundles könnte man fast meinen,
dass die Qualität sinkt, was aber sicher nicht stimmt, denn die
Geschmäcker sind nur verschieden. 
<div class="p"><!----></div>
<b>Hinweis:</b> Nachdem der Artikel war, wurde zusätzlich noch das Spiel
Steel Storm: Burning Retribution&nbsp;<a href="http://www.steel-storm.com/">[22]</a>
zum Bundle hinzugefügt.

<div class="p"><!----></div>
Dennoch ist natürlich der Selbstbestimmungspreis unschlagbar, sodass
jeder genau das zahlen kann, was er denkt, dass die Spiele wert sind.
Zur Zeit (01.08.2011, 22 Uhr) steht der Verkaufzähler bei 200.000
verkauften Einheiten und Einnahmen in Höhe von über 940.000 US-Dollar.
Wie auch die Bundles zuvor geben die Linux-Nutzer durchschnittlich
das Dreifache eines Windows-Nutzers für den Kauf aus.

<div class="p"><!----></div>
Schade ist nur, dass die Spiele nach der Humble-Aktion wohl nicht mehr
verfügbar sein werdenPaket als auf das Spiel selbst,
denn obwohl ein Linux-Port zur
Verfügung steht, bieten die Entwickler nach der Aktion nicht immer einen
Linux-Kauf an, wie die Vergangenheit gezeigt hat. So gibt es
beispielsweise Aquaria, Gish oder Trine nicht als Download
für Linux. 
<div class="p"><!----></div>
Es sei noch darauf hingewiesen, dass die Spiele nicht Open Source sind,
was sich aber gegebenenfalls in der Zukunft ändern kann, wie das auch
beim ersten Humble Indie Bundle der Fall war.

<div class="p"><!----></div>
    <font color="#595959"><font size="+1">Links</font></font><br />
        
[1] <a href="http://www.humblebundle.com/"><tt style="font-size: 1.3em;">http://www.humblebundle.com/</tt></a><br />

<div class="p"><!----></div>
[2] <a href="http://www.deesaster.org/blog/index.php?/archives/1420"><tt style="font-size: 1.3em;">http://www.deesaster.org/blog/index.php?/archives/1420</tt></a><br />

<div class="p"><!----></div>
[3] <a href="http://www.deesaster.org/blog/index.php?/archives/1425"><tt style="font-size: 1.3em;">http://www.deesaster.org/blog/index.php?/archives/1425</tt></a><br />

<div class="p"><!----></div>
[4] <a href="https://www.eff.org/"><tt style="font-size: 1.3em;">https://www.eff.org/</tt></a><br />

<div class="p"><!----></div>
[5] <a href="http://www.childsplaycharity.org/"><tt style="font-size: 1.3em;">http://www.childsplaycharity.org/</tt></a><br />

<div class="p"><!----></div>
[6] <a href="http://www.freiesmagazin.de/freiesMagazin-2009-03"><tt style="font-size: 1.3em;">http://www.freiesmagazin.de/freiesMagazin-2009-03</tt></a><br />

<div class="p"><!----></div>
[7] <a href="http://www.bit-blot.com/aquaria/"><tt style="font-size: 1.3em;">http://www.bit-blot.com/aquaria/</tt></a><br />

<div class="p"><!----></div>
[8] <a href="http://www.freiesmagazin.de/freiesMagazin-2010-07"><tt style="font-size: 1.3em;">http://www.freiesmagazin.de/freiesMagazin-2010-07</tt></a><br />

<div class="p"><!----></div>
[9] <a href="http://www.freiesmagazin.de/freiesMagazin-2010-02"><tt style="font-size: 1.3em;">http://www.freiesmagazin.de/freiesMagazin-2010-02</tt></a><br />

<div class="p"><!----></div>
[10] <a href="http://www.freiesmagazin.de/freiesMagazin-2010-07"><tt style="font-size: 1.3em;">http://www.freiesmagazin.de/freiesMagazin-2010-07</tt></a><br />

<div class="p"><!----></div>
[11] <a href="http://www.deesaster.org/blog/index.php?/archives/1647"><tt style="font-size: 1.3em;">http://www.deesaster.org/blog/index.php?/archives/1647</tt></a><br />

<div class="p"><!----></div>
[12] <a href="http://www.freiesmagazin.de/freiesMagazin-2011-07"><tt style="font-size: 1.3em;">http://www.freiesmagazin.de/freiesMagazin-2011-07</tt></a><br />

<div class="p"><!----></div>
[13] <a href="http://www.cogsgame.com/"><tt style="font-size: 1.3em;">http://www.cogsgame.com/</tt></a><br />

<div class="p"><!----></div>
[14] <a href="http://www.igf.com/2010finalistswinners.html#finalists"><tt style="font-size: 1.3em;">http://www.igf.com/2010finalistswinners.html#finalists</tt></a><br />

<div class="p"><!----></div>
[15] <a href="http://thelettervsixtim.es/"><tt style="font-size: 1.3em;">http://thelettervsixtim.es/</tt></a><br />

<div class="p"><!----></div>
[16] <a href="http://www.crayonphysics.com/"><tt style="font-size: 1.3em;">http://www.crayonphysics.com/</tt></a><br />

<div class="p"><!----></div>
[17] <a href="http://www.freiesmagazin.de/freiesMagazin-2008-04"><tt style="font-size: 1.3em;">http://www.freiesmagazin.de/freiesMagazin-2008-04</tt></a><br />

<div class="p"><!----></div>
[18] <a href="http://www.igf.com/2008finalistswinners.html"><tt style="font-size: 1.3em;">http://www.igf.com/2008finalistswinners.html</tt></a><br />

<div class="p"><!----></div>
[19] <a href="http://www.andyetitmoves.net/"><tt style="font-size: 1.3em;">http://www.andyetitmoves.net/</tt></a><br />

<div class="p"><!----></div>
[20] <a href="http://www.igf.com/2007finalistswinners.html#and"><tt style="font-size: 1.3em;">http://www.igf.com/2007finalistswinners.html#and</tt></a><br />

<div class="p"><!----></div>
[21] <a href="http://www.koshutin.com/"><tt style="font-size: 1.3em;">http://www.koshutin.com/</tt></a><br />

<div class="p"><!----></div>
[22] <a href="http://www.steel-storm.com/"><tt style="font-size: 1.3em;">http://www.steel-storm.com/</tt></a><br />

<div class="p"><!----></div>
            
<table border="1">
<tr><td colspan="1" align="center"><font size="+0"><b>Autoreninformation</b></font></td></tr>
<tr><td align="left"><b>Dominik Wagenführ</b>&nbsp;(<a href="http://www.deesaster.org/blog/">Webseite</a>)
spielt sehr gerne unter Linux. Vor allem Geschicklichkeits- und 
Denkspiele machen ihm dabei viel Spaß. </td></tr>
<tr><td align="left">    </td></tr></table>


    

<div class="p"><!----></div>
            <a href="http://www.freiesmagazin.de/comment/reply/236?edit[subject]=Humble Indie Bundle 3#comment-form"><i>Diesen Artikel kommentieren</i></a><br /><br />
        <a href="freiesMagazin-2011-08-bilder.html#index">Zum Index</a><br /><hr />

<div class="p"><!----></div>
<h1><font color="#595959"><a name="11_08_piwik">Freie Webanalytik mit Piwik</a><a name="11_08_piwik">
</a></font></h1>von Sujeevan Vijayakumaran

<div class="p"><!----></div>
        
<div class="p"><!----></div>
<b>E</b><b>ine freie Webanalytik-Software, die in PHP geschrieben ist und 
MySQL als Datenbank nutzt, ist <i>Piwik</i>&nbsp;<a href="http://de.piwik.org/">[1]</a>. Mitte
Juni wurde <i>Piwik</i> in Version 1.5 veröffentlicht. Die Software ist
unter der GPL v3 lizenziert und soll eine freie Alternative zu 
Google Analytics&nbsp;<a href="http://www.google.de/analytics/">[2]</a> darstellen.</b>

<div class="p"><!----></div>

<h2>Allgemeines</h2>

<div class="p"><!----></div>
Eines der wichtigen Instrumente für einen Webseitenbetreiber ist die 
Webanalytik. Durch Webanalytik-Software ist es möglich, das 
Verhalten der Webseitenbesucher zu analysieren. Die Software 
zeichnet viele Statistiken eines Webseitenbesuchers auf. Neben der 
Besuchshäufigkeit und Besuchsdauer der eigenen Webseite wird auch 
die IP-Adresse und Herkunft des Benutzers gespeichert.

<div class="p"><!----></div>
Die bekannteste Webanalytik-Software kommt aus dem Hause Google. 
Google Analytics bietet die umfangreichste Webanalytik auf dem 
Markt und ist daher auch sehr weit verbreitet. Der große Nachteil 
von Google Analytics ist, dass alle Daten direkt an die 
Google-Server übermittelt und auch dort verarbeitet werden. Eine 
freie Alternativsoftware wie <i>Piwik</i> ermöglicht ebenfalls eine gute
Webanalytik.

<div class="p"><!----></div>
Einen Einblick in die Analysemöglichkeiten von <i>Piwik</i> soll dieser
Artikel geben. <i>Piwik</i> erzeugt aus den gespeicherten Daten sehr viele
Berichte, die in verschiedene Kategorien eingeordnet werden. Die 
Daten werden für jeden einzelnen Besucher erhoben, die je nach 
Statistik zusammen oder getrennt aufgelistet werden.

<div class="p"><!----></div>
<i>Piwik</i> nutzt, wie andere Webanalytik-Software auch, einen
JavaScript-Code zum Aufzeichnen des Verhaltens der 
Webseitenbesucher. Der JavaScript-Code muss auf jeder einzelnen 
Seite eines Webauftritts eingebunden sein, damit alle Daten 
ordnungsgemäß und vollständig erhoben werden können. In den meisten
Content-Management-Systemen lässt sich
                

<div class="p"><!----></div>
    dieser Code sehr einfach in 
das Template des Footer einbinden. Es wird empfohlen, den Standard 
JavaScript-Code zu verwenden, es ist jedoch auch möglich den Code 
anzupassen. So lassen sich einige Funktionen ein- bzw. ausschalten.
Eine Alternative für die Benutzer, die JavaScript im Browser 
deaktiviert haben, gibt es ebenfalls. <i>Piwik</i> realisiert dieses mit
einen Image Tracker Code, der logischerweise kein JavaScript 
verwendet. Nachteilig ist hierbei jedoch, dass einige wichtige 
Funktionen nicht aufgezeichnet werden können. Darunter fallen unter 
anderem Suchschlüsselwörter, Browser-Plug-ins und 
Bildschirmauflösungen.

<div class="p"><!----></div>

<h3>Installation und Updates</h3>

<div class="p"><!----></div>
Die Installation von <i>Piwik</i> lässt sich zügig in etwa fünf Minuten
erledigen und erfolgt ziemlich ähnlich der Installation von 
diversen Content-Management-Systemen. Verfügbare Aktualisierungen 
erscheinen im Administrationsmenü von <i>Piwik</i>. Diese lassen sich mit
wenigen Klicks direkt im Browser installieren.

<div class="p"><!----></div>

<h3>Übersicht</h3>

<div class="p"><!----></div>
<i>Piwik</i> unterteilt die Bedienoberfläche in die Seiten „<em>Besucher</em>“,
„<em>Aktionen</em>“, „<em>Verweise</em>“ und
    „<em>Ziele</em>“. Auf jeder Unterseite lassen
sich die Daten der überwachten Webseite für einen speziell 
ausgewählten Zeitraum erfassen. So kann man die Statistiken zu 
jeden einzelnen Tag, Monat, und Jahr getrennt aufrufen. Neben 
diesen vordefinierten Zeiträumen, kann man ebenfalls seinen eigenen 
Zeitraum definieren.

<div class="p"><!----></div>
Die Übersichtsseite, welche in drei Spalten gegliedert ist, in denen 
die wichtigsten Widges liegen, bildet gleichzeitig auch die 
Startseite von <i>Piwik</i>. Standardmäßig werden dort unter anderem die
Statistiken zu den letzten Besuchern, Referrer-Webseiten und die 
Besucher-Browser angezeigt. Der Administrator kann die Widgets 
komplett nach seinen eigenen Belieben anpassen. So ist es möglich, 
vorhandene Widgets zu löschen oder neue hinzufügen, außerdem lassen 
sie sich per Drag&nbsp;&amp;&nbsp;Drop frei verschieben und neu anordnen.

<div class="p"><!----></div>
<img border="0" src="freiesMagazin-2011-08-bilder-Dateien/piwik-uebersicht.png" /><br /><em>Die Start- und Übersichtsseite von <i>Piwik</i>.</em><br />

<div class="p"><!----></div>

<h3>Besucher</h3>

<div class="p"><!----></div>
<i>Piwik</i> zeichnet sehr viele Informationen zu jedem einzelnen Besucher
auf. Auf der Besucher-Übersichtsseite lässt sich die 
Benutzerentwicklung nachvollziehen, des Weiteren werden 
Zahlen zur durchschnittlichen Aufenthaltsdauer, Absprungrate der 
Benutzer oder auch die Besucheranzahl angezeigt.

<div class="p"><!----></div>
Das Besucher-Log zeigt genaue Informationen für jeden Besucher an. 
Als Beispiel (siehe Bild) dient hier ein Besucher einer Webseite, 
der die Fotogalerie aufgerufen hat. Neben der IP-Adresse, die hier 
anonymisiert gespeichert ist,
    
wird auch die sekundengenaue Uhrzeit 
angezeigt, zu der der Besucher die Seite besucht hat. Sofern sich 
aus der IP-Adresse der Provider herauslesen lässt, wird auch der 
Provider angezeigt, welches in diesem Beispiel Citykom sein soll. 
Weiterhin geht aus der Tabelle hervor, dass der Besucher aus 
Deutschland kommt, Windows als Betriebssystem verwendet und den 
Internet Explorer 9.0 als Browser nutzt. <i>Piwik</i> erkennt an Hand von
einem abgespeicherten Cookie, ob der Besucher die Webseite bereits 
besucht hat, oder ob es ein neuer Besucher ist, und markiert dies 
in den Statistiken in Form eines Symbols. Ebenso werden die 
verwendeten Browser-Plug-ins, wie Flash, PDF, Java oder Quicktime, 
erfasst und ausgewertet. Einzig die Plug-ins
    von Besuchern, die den 
Internet Explorer verwenden, werden, wie hier im Beispiel, nicht 
gespeichert. Nur die Verwendung von Java wird ausgegeben. Weitere 
Informationen etwa über die Version des Betriebssystems, der 
verwendeten Version des Browsers und der genutzten Auflösung wird 
in einem Mouse-Over über den dazugehörenden Symbolen angezeigt.

<div class="p"><!----></div>
Darüber hinaus merkt sich <i>Piwik</i> auch die Herkunft des Besuchers,
sofern die Referrer-Seite ermittelt werden konnte, ansonsten zeigt 
<i>Piwik</i> an, dass der Besucher direkt auf die Seite zugegriffen hat.
Ergänzend ist es mit <i>Piwik</i> auch möglich zu sehen, was der Besucher
genau auf der Webseite getan, welche Unterseiten er besucht, 
und wie lange er sich insgesamt auf der gesamten Webseite 
aufgehalten hat. Zudem werden Downloads, beispielsweise von
Bildern, aufgezeichnet.

<div class="p"><!----></div>
Die weiteren Unterkategorien von „<em>Besucher</em>“ fassen einzelne
Informationen thematisch zusammen. Unter „<em>Standorte und Provider</em>“
werden Graphen und Zahlen von Besuchern sortiert in Kontinente, 
Länder und Provider dargestellt. Im weiteren Punkt „<em>Einstellungen</em>“
werden die verwendeten Browser und Plug-ins aufgelistet, als auch 
die Betriebssysteme und die Bildschirmauflösungen. Das 
Datenmaterial wird teilweise in Kreisdiagrammen angezeigt, aber 
auch in Listen mit absoluten Werten und stellenweise Prozentwerten. 
Der Anwender 
kann nach eigenen Belieben zwischen den verschiedenen 
Ausgabeoptionen wie Tabellen und Diagrammen wechseln.

<div class="p"><!----></div>
Neben diesen Informationen werden, wie bereits erwähnt, auch die 
Verweilzeiten gespeichert, die ebenfalls nochmal getrennt in einem
Diagramm visualisiert sind. In der Unterkategorie „<em>Engagement</em>“
wird unter anderem die durchschnittliche Aufenthaltsdauer auf der 
Webseite dargestellt sowie die Menge der wiederkehrenden 
Besucher.

<div class="p"><!----></div>
Nützlich sind besonders die zahlreichen Exportoptionen von <i>Piwik</i>. 
Sie ermöglicht das Exportieren eines Datensatzes als CSV, TSV, XML 
als auch in Json, PHP und RSS.

<div class="p"><!----></div>
<img border="0" src="freiesMagazin-2011-08-bilder-Dateien/piwik-besucherlog.png" /><br /><em>Die gespeicherten Informationen zu einem eindeutigen Besucher.</em><br />

<div class="p"><!----></div>

<h3>Aktionen</h3>

<div class="p"><!----></div>
In die Kategorie „<em>Aktionen</em>“ fallen alle Daten über die einzelnen
Seiten. Unterteilt wird die Kategorie in „<em>Seiten</em>“,
„<em>Eingangsseiten</em>“, „<em>Ausstiegsseiten</em>“, „<em>Seitentitel</em>“, „<em>Ausgehende Verweise</em>“
und „<em>Downloads</em>“. In der Unterkategorie „<em>Seiten</em>“ wird
unter anderem dargestellt, welcher Teil der Webseite die meisten 
Seitenansichten hat, wie hoch die Absprung- und Ausstiegsrate ist, 
aber auch die durchschnittliche Verweildauer auf der Seite. In 
„<em>Eingangs- und Ausstiegsseiten</em>“ wird nun differenziert dargestellt,
welche Einzelseite die Besucher zuerst öffnen, und wiederum bei 
welcher Einzelseite sie die Webseite verlassen haben. Während bei 
„<em>Seiten</em>“ die Daten nach der Struktur und den Dateinamen einzelnen
Seiten geordnet sind, werden bei „<em>Seitentitel</em>“ die Titel der
Einzelseiten aufgezählt und mit den gleichen Fakten veranschaulicht.

<div class="p"><!----></div>
Mit den aufgezeichneten Daten unter „<em>Ausgehende Verweise</em>“ kann der
Webseitenbetreiber leicht erkennen, über welche Links die Besucher am 
häufigsten die Seite verlassen. Der letzte Unterpunkt unter 
„<em>Aktionen</em>“ ist der Bereich „<em>Downloads</em>“. Dort wird ziemlich simpel
aufgelistet, welches Datenmaterial und wie oft heruntergeladen wurde.

<div class="p"><!----></div>

<h3>Verweise</h3>

<div class="p"><!----></div>
Die Kategorie „<em>Verweise</em>“ wertet hauptsächlich die Herkunft der
Besucher aus. Unterteilt in „<em>Suchmaschinen und Suchbegriffe</em>“
sammelt <i>Piwik</i> die Anzahl der Besuche unterteilt nach den
verschiedenen Suchmaschinen. Zusätzlich wird erfasst, 
welche Suchbegriffe die Besucher verwendet haben, um auf die 
Webseite zu gelangen.

<div class="p"><!----></div>
Neben der Herkunft der Besucher von 
Suchmaschinen kommen diese ebenfalls von anderen Webseiten. Unter 
„<em>Webseiten</em>“ wird hier aufgezählt, welche Seiten in besonderem Maße
die Besucher auf die eigene Seite weiterleiten.

<div class="p"><!----></div>

<h3>Ziele</h3>

<div class="p"><!----></div>
Eigene Statistiken lassen sich unter „<em>Ziele</em>“ erstellen. Der
Webseitenbetreiber kann so beispielsweise ein Ziel für 
Registrierung von neuen Benutzern erstellen oder die Aufrufanzahl 
von „Bitte Lesen“-Posts verfolgen.

<div class="p"><!----></div>

<h3>Weiteres</h3>

<div class="p"><!----></div>
<i>Piwik</i> bietet neben dem Webauftritt auch die Möglichkeit der
E-Mail-Benachrichtigung an. Die Berichte lassen sich individuell 
gestalten und an mehrere Leute senden. Die einzelnen Datensätze 
lassen sich aktivieren und deaktivieren. So ist es möglich, nur 
Teile der Daten an weitere Personen zu senden, während der 
Administrator selbst eine E-Mail mit vollständigen Datensätzen 
bekommt.

<div class="p"><!----></div>
Eigene Funktionen lassen sich mit Hilfe der API realisieren. Die 
bereits enthaltenen Funktionen sind als Plug-ins in <i>Piwik</i> 
eingebunden. In den Plug-in-Einstellungen ist es möglich, einige der 
Funktionen ab- und anzuschalten, sodass nicht alles gespeichert 
wird.

<div class="p"><!----></div>

<h2>Datenschutz</h2>

<div class="p"><!----></div>
Ein Punkt, den man bei der Webanalytik nicht außer Acht lassen darf, 
ist der Datenschutz. Problematisch ist hierbei die Erfassung 
personenspezifischer Daten wie beispielsweise die IP-Adresse, mit der 
eine eindeutige Identifizierung (mehr oder weniger) möglich ist.
(Es ist von deutschen Gerichten aber immer noch nicht einstimmig
geklärt, ob die IP-Adresse wirklich ein personenbezogenes Datum ist
oder nicht&nbsp;<a href="http://www.internet-law.de/2011/06/datenschutz-ip-adressen-als-personenbezogene-daten.html">[3]</a>.)

<div class="p"><!----></div>
<i>Piwik</i> arbeitet aus diesem Grund mit dem Unabhängigen Landeszentrum
für Datenschutz Schleswig-Holstein (ULD)
zusammen&nbsp;<a href="http://de.piwik.org/blog/2011/03/unabhangiges-landeszentrum-datenschutz-uld-piwik-datenschutzkonform-einsetzbar/">[4]</a>.
Die angeregten Verbesserungen wurden bereits in der Version 1.2 
eingepflegt. Das ULD hat ein Dokument veröffentlicht&nbsp;<a href="https://www.datenschutzzentrum.de/tracking/piwik/">[5]</a>,
in welchem angegeben wird, wie man <i>Piwik</i> datenschutzrechtlich
einwandfrei nutzen kann. Darunter fallen unter anderem die 
Anonymisation von IP-Adressen als auch die Opt-Out-Funktion, die es 
ermöglicht, die Besucher entscheiden zu lassen, ob <i>Piwik</i> seine
Daten speichern darf oder nicht. Standardmäßig werden die Daten 
jedoch automatisch gespeichert. Der Administrator hat die 
Möglichkeit, mittels eines iframes dem Besucher die Möglichkeit zu 
geben, der Speicherung seiner Daten zu widersprechen. Durch die 
Deaktivierung seitens des Besuchers wird dann der eindeutige 
Webanalyse-Cookie deaktiviert.

<div class="p"><!----></div>

<h2>Piwik Mobile</h2>

<div class="p"><!----></div>
Eine Mobil-Seite für den Abruf der Statistiken von einem Smartphone 
oder Tablet gibt es bisher nicht. Stattdessen gibt es eine 
offizielle und kostenlose App unter dem Namen „Piwik Mobile“ für
Android&nbsp;<a href="https://market.android.com/details?id=org.piwik.mobile">[6]</a> und
iOS&nbsp;<a href="http://itunes.apple.com/us/app/piwikmobile/id385536442?mt=8">[7]</a>,
welches ebenfalls unter der GPL lizenziert ist.

<div class="p"><!----></div>
Die App bietet ziemlich den gleichen Funktionsumfang wie auch 
die eigentliche Webseite an sich. Die einzelnen 
Statistiken sind in Gruppen zusammengefasst und in einer Liste 
geordnet. Jeder Unterpunkt der gesammelten 
Informationen wird in einem Kreisdiagramm dargestellt, des Weiteren 
werden die absoluten Zahlen
    
in einer Tabelle angezeigt. In der 
oberen Leiste gibt es neben der Möglichkeit, den Zeitraum 
individuell umzustellen und somit eine veränderte Statistik 
abzurufen, auch noch die Möglichkeit, zwischen mehreren 
<i>Piwik</i>-Datenbanken zu wechseln.

<div class="p"><!----></div>
<img border="0" src="freiesMagazin-2011-08-bilder-Dateien/piwik-androidapp.png" /><br /><em>Statistik zu Bildschirmauflösungen im Android-App.</em><br />

<div class="p"><!----></div>

<h2>Geschichte von Piwik</h2>

<div class="p"><!----></div>
<i>Piwik</i> entstand auf der Grundlage von
phpMyVisites&nbsp;<a href="http://www.phpmyvisites.us/">[8]</a>. Nach der Einstellung
des Projekts phpMyVisites wurde daraus <i>Piwik</i>. Die Version 0.1 wurde im
März 2009 veröffentlicht und seitdem stetig weiterentwickelt. 
August 2010 erschien <i>Piwik</i> in Version 1.0, danach folgten zügig
weitere Veröffentlichungen. Die aktuelle Version 1.5 wurde Mitte 
Juni veröffentlicht. <i>Piwik</i> wurde mittlerweile über 675.000 mal
heruntergeladen&nbsp;<a href="http://piwik.org/download/counter/">[9]</a> und wird von
zahlreichen Webseitenbetreibern genutzt.

<div class="p"><!----></div>

<h3>Neues in Piwik 1.5</h3>

<div class="p"><!----></div>
Mit der neuen Version von <i>Piwik</i> kamen, neben Fehlerkorrekturen und
weiteren kleineren Änderungen, auch neue Funktionen. Als neue 
Funktion wurde unter anderem
E-commerce&nbsp;<a href="http://piwik.org/docs/ecommerce-analytics/">[10]</a> und
benutzerdefinierte Variablen&nbsp;<a href="http://piwik.org/docs/custom-variables/">[11]</a>
eingeführt. Des Weiteren wurde die Nutzung von Flash für die Anzeige 
von Graphen abgeschafft&nbsp;<a href="http://piwik.org/blog/2011/06/piwik-innovative-with-javascript-canvas-chart-and-contributing-by-jqplot-creator/">[12]</a>
Die Graphen werden nun mittels einer Kombination aus Canvas und 
JavaScript erzeugt. Einzig für die Weltkarte der Besucher wird noch 
Flash benötigt.

<div class="p"><!----></div>

<h2>Ausblick</h2>

<div class="p"><!----></div>
Nach der Roadmap&nbsp;<a href="http://piwik.org/roadmap/">[13]</a> ist es die Mission
von <i>Piwik</i> eine führende Open-Source-Webanalytik-Software zu
entwickeln, die den Zugang zur gesamten Funktionalität durch 
offene APIs und offenen Komponenten gewährleisten soll. Unter 
anderem ist geplant, dass man benutzerdefinierte Benachrichtigungen 
auf Aktionen erstellt, sodass der Administrator jedes Mal via 
E-Mail benachrichtigt wird, wenn dieser Fall eintritt. Des Weiteren 
soll die Länder- und Städte-Lokalisation mittels der
GeoIP-Datenbank eingebunden werden. Alle weiteren Funktionen, die
bis zur Version 2.0 eingefügt werden sollen, können in
der Roadmap nachgelesen werden.

<div class="p"><!----></div>
    <font color="#595959"><font size="+1">Links</font></font><br />
        
[1] <a href="http://de.piwik.org/"><tt style="font-size: 1.3em;">http://de.piwik.org/</tt></a><br />

<div class="p"><!----></div>
[2] <a href="http://www.google.de/analytics/"><tt style="font-size: 1.3em;">http://www.google.de/analytics/</tt></a><br />

<div class="p"><!----></div>
[3] <a href="http://www.internet-law.de/2011/06/datenschutz-ip-adressen-als-personenbezogene-daten.html"><tt style="font-size: 1.3em;">http://www.internet-law.de/2011/06/datenschutz-ip-adressen-als-personenbezogene-daten.html</tt></a><br />

<div class="p"><!----></div>
[4] <a href="http://de.piwik.org/blog/2011/03/unabhangiges-landeszentrum-datenschutz-uld-piwik-datenschutzkonform-einsetzbar/"><tt style="font-size: 1.3em;">http://de.piwik.org/blog/2011/03/unabhangiges-landeszentrum-datenschutz-uld-piwik-datenschutzkonform-einsetzbar/</tt></a><br />

<div class="p"><!----></div>
[5] <a href="https://www.datenschutzzentrum.de/tracking/piwik/"><tt style="font-size: 1.3em;">https://www.datenschutzzentrum.de/tracking/piwik/</tt></a><br />

<div class="p"><!----></div>
[6] <a href="https://market.android.com/details?id=org.piwik.mobile"><tt style="font-size: 1.3em;">https://market.android.com/details?id=org.piwik.mobile</tt></a><br />

<div class="p"><!----></div>
[7] <a href="http://itunes.apple.com/us/app/piwikmobile/id385536442?mt=8"><tt style="font-size: 1.3em;">http://itunes.apple.com/us/app/piwikmobile/id385536442?mt=8</tt></a><br />

<div class="p"><!----></div>
[8] <a href="http://www.phpmyvisites.us/"><tt style="font-size: 1.3em;">http://www.phpmyvisites.us/</tt></a><br />

<div class="p"><!----></div>
[9] <a href="http://piwik.org/download/counter/"><tt style="font-size: 1.3em;">http://piwik.org/download/counter/</tt></a><br />

<div class="p"><!----></div>
[10] <a href="http://piwik.org/docs/ecommerce-analytics/"><tt style="font-size: 1.3em;">http://piwik.org/docs/ecommerce-analytics/</tt></a><br />

<div class="p"><!----></div>
[11] <a href="http://piwik.org/docs/custom-variables/"><tt style="font-size: 1.3em;">http://piwik.org/docs/custom-variables/</tt></a><br />

<div class="p"><!----></div>
[12] <a href="http://piwik.org/blog/2011/06/piwik-innovative-with-javascript-canvas-chart-and-contributing-by-jqplot-creator/"><tt style="font-size: 1.3em;">http://piwik.org/blog/2011/06/piwik-innovative-with-javascript-canvas-chart-and-contributing-by-jqplot-creator/</tt></a><br />

<div class="p"><!----></div>
[13] <a href="http://piwik.org/roadmap/"><tt style="font-size: 1.3em;">http://piwik.org/roadmap/</tt></a><br />

<div class="p"><!----></div>
            
<table border="1">
<tr><td colspan="1" align="center"><font size="+0"><b>Autoreninformation</b></font></td></tr>
<tr><td align="left"><b>Sujeevan Vijayakumaran</b>&nbsp;(<a href="http://svij.org/">Webseite</a>)
testet gerne verschiedene Content-Management-System und setzt <i>Piwik</i> 
auch auf seiner eigenen Homepage ein.
</td></tr>
<tr><td align="left">    </td></tr></table>



<div class="p"><!----></div>
            <a href="http://www.freiesmagazin.de/comment/reply/236?edit[subject]=Freie Webanalytik mit Piwik#comment-form"><i>Diesen Artikel kommentieren</i></a><br /><br />
        <a href="freiesMagazin-2011-08-bilder.html#index">Zum Index</a><br /><hr />

<div class="p"><!----></div>
                    
<div class="p"><!----></div>

<div class="p"><!----></div>


<div class="p"><!----></div>
<h1><font color="#595959"><a name="11_08_lpi301">Rezension: LPI 301</a><a name="11_08_lpi301">
</a></font></h1>von Hans-Joachim Baader

<div class="p"><!----></div>
        
<div class="p"><!----></div>
<b>Ü</b><b>berraschenderweise ist auch vier Jahre nach dem Start der 
LPIC-3-Zertifizierung das Buchangebot dazu sehr übersichtlich. Mit 
„LPI 301“ stößt der IT-Trainer Thorsten Robers in diese Lücke vor.</b>

<div class="p"><!----></div>
<b>Redaktioneller Hinweis:</b> <i>Der Artikel „LPI 301“ erschien erstmals bei 
Pro-Linux&nbsp;<a href="http://www.pro-linux.de/artikel/2/1513/lpi-301.html">[1]</a>.</i>

<div class="p"><!----></div>

<h2>Vorwort</h2>

<div class="p"><!----></div>
Das Linux Professional Institute (LPI)&nbsp;<a href="http://www.lpi.org/">[2]</a> 
bietet umfassende Linux-Zertifizierungsprogramme in bisher drei 
Stufen an. Die Besonderheit der Zertifizierungen des LPI ist, dass 
sie in Gemeinschaftsarbeit interessierter Freiwilliger entwickelt 
werden und hersteller- sowie distributionsunabhängig sind.

<div class="p"><!----></div>
Nach den Stufen LPIC-1 („Junior Level Linux Professional“) und 
LPIC-2 („Advanced Level Linux Professional“), die jeweils zwei 
Prüfungen umfassen, bietet LPI seit 2007 auch als dritte Stufe 
LPIC-3 („Senior Level Linux Professional“) als bisher 
anspruchsvollste Zertifizierung an.
LPIC-3&nbsp;<a href="http://www.lpi.org/eng/certification/the_lpic_program/lpic_3">[3]</a>
wird anders als die ersten beiden Stufen mit nur einer einzigen 
Prüfung erworben, die wahlweise durch zusätzliche Prüfungen ergänzt 
werden kann. Die verpflichtende Prüfung 301 nennt sich „Core“. 
Inzwischen stehen als Spezialisierungs-Prüfungen „Mixed 
Environments“ (302), „Security“ (303), „Virtualization and High 
Availability“ (304, momentan Betaversion) zur Verfügung.

<div class="p"><!----></div>
Da die Stufen aufeinander aufbauen, kann man die Zertifizierung als 
LPIC-3 erst erhalten, wenn man diejenigen für LPIC-2 und LPIC-1 
absolviert hat. Die Prüfungen umfassen Multiple-Choice- und frei 
auszufüllende Fragen. LPIC-3 macht hier keine Ausnahme. Ablegen 
kann man die Prüfungen in einem Prüfungszentrum, das in der Regel 
von einem Unternehmen betrieben wird. Weltweit stehen einige 
tausend Zentren zur Verfügung.

<div class="p"><!----></div>
Trotz der über vier Jahre, die die Prüfung 301 bereits existiert, 
sind Prüfungsunterlagen kaum zu finden. „LPI 301“ ist 
das erste deutschsprachige Buch zu der Prüfung und auch 
weltweit eines der ersten, wenn nicht gar das einzige.

<div class="p"><!----></div>
Die Prüfung 301 umfasst laut Beschreibung die Themen 
Authentifikation, Problemlösung, Netzwerk-Integration und 
Kapazitätsplanung. In der Praxis bedeutet dies fast ausschließlich 
LDAP. 
<div class="p"><!----></div>

<h2>Das Buch</h2>

<div class="p"><!----></div>
Das vorliegende Buch widmet sich ausschließlich der Vorbereitung auf 
die Prüfung 301. Wie bereits erwähnt geht es in dieser Prüfung 
vorwiegend um LDAP. Es sei aber betont, dass „LPI 301“ deswegen 
trotzdem kein LDAP-Lehrbuch ist. Wenn es so wäre, hätte es wohl den 
Begriff „LDAP“ im Titel. Zur Vorbereitung auf die Prüfung 301 ist 
nicht unbedingt ein Buch über LDAP notwendig, umfassende Kenntnisse 
von OpenLDAP sind aber unerlässlich. 

Zur Not genügt hierfür aber 
auch die Online-Dokumentation von
OpenLDAP&nbsp;<a href="http://www.openldap.org/">[4]</a> einschließlich der FAQs
sowie praktisches Arbeiten an einem selbst aufgesetzten Server.

<div class="p"><!----></div>
Das Buch des erfahrenen Systemadministrators und IT-Trainers 
Thorsten Robers orientiert sich in seiner Kapitelstruktur an den 
detaillierten Lernzielen&nbsp;<a href="http://www.lpice.eu/de/lpi-zertifizierungsinhalte.html">[5]</a> der 
Prüfung 301. Nach einem kurzen Vorwort von nur drei Seiten beginnt 
sofort die Vorstellung und Behandlung der Prüfungsinhalte in sechs 
Kapiteln. Dabei werden keinerlei konkrete Prüfungsfragen 
vorgestellt. Es ist also leider nicht möglich, eine Testprüfung mit 
einigermaßen realistischen Fragen zu absolvieren. Entsprechende 
Fragen, die zwar nicht identisch, aber ähnlich zu den tatsächlich 
in der Prüfung vorkommenden Fragen sind, findet man eventuell bei 
anderen Anbietern oder im Web, allerdings ist mir derzeit keine 
konkrete Quelle bekannt. Stattdessen profitieren die Leser von der 
Erfahrung des Autors, der die Prüfung bereits kennt und daher 
Angaben machen kann, worauf man sich besonders vorbereiten muss.

<div class="p"><!----></div>
Die Kapitel sind nicht ab 1 fortlaufend nummeriert, sondern von 301 bis 306, 
was den so nummerierten Themengebieten der Prüfung entspricht. Alle sechs 
Kapitel sind in Unterkapitel gegliedert, die alle den gleichen Aufbau 
besitzen. Am Anfang steht jeweils eine kurze Übersicht mit der Gewichtung (1-5), 
Beschreibung und einem Satz, wichtigen Wissensgebieten und wichtigen 
Dateien, Begriffen und Hilfsprogrammen. Diese Information ist mehr oder 
weniger direkt den Prüfungszielen entnommen. Danach bietet jedes Kapitel 
eine umfassende Erläuterung zu den Themen und Aufgaben. Es gibt Beispiele 
zur Konfiguration und Verwendung der Programme, Hinweise auf besonders 
beachtenswerte Sachverhalte und Hinweise, was für die Prüfung relevant ist. 
An manchen Stellen finden sich darüber hinausgehende Hinweise. Jedes Kapitel 
wird mit einem kurzen Abschnitt abgeschlossen, der nochmals darauf hinweist, 
was zur Vorbereitung auf die Prüfung zu beherrschen ist.

<div class="p"><!----></div>
Kapitel 301 „Konzepte, Architektur und Design“ beschäftigt sich mit 
LDAP-Konzepten und -Architektur, dem Entwerfen eines 
LDAP-Verzeichnisbaums und Schemata. Kapitel 302 „Installation und 
Entwicklung“ besitzt nur zwei Unterkapitel, das Kompilieren und 
Installieren von OpenLDAP und die Softwareentwicklung für LDAP 
unter Perl oder C++. Letzteres kann man notfalls auch 
vernachlässigen.

<div class="p"><!----></div>
Kapitel 303 „Konfiguration“ weist Unterkapitel zu ACLs in LDAP, 
LDAP-Replikation, Absicherung des LDAP-Verzeichnisses, 
Performance-Tuning des LDAP-Servers und Konfiguration des 
OpenLDAP-Daemons auf. Das nächste Kapitel 304 „Bedienung“ 
beschreibt das Durchsuchen des Verzeichnisses, 
LDAP-Kommandozeilenwerkzeuge und Whitepages. Während man in der 
Praxis meist mit grafischen Oberflächen arbeitet, wenn es nicht 
gerade um Massenoperationen geht, ist dieser Teil für die Prüfung 
ziemlich wichtig, da sie sich auf die Kommandozeilenwerkzeuge 
beschränkt.

<div class="p"><!----></div>
Kapitel 305 „Integration und Migration“ ist das letzte Kapitel zum 
Thema LDAP. Themen sind die LDAP-Integration mit PAM und NSS, 
Migration von NIS nach LDAP, Integration von LDAP und Unix-Dienste, 
Integration von LDAP mit Samba, Integration von LDAP mit Active 
Directory und Integration von LDAP mit E-Mail-Diensten. Es folgt 
ein abschließendes Kapitel 306 „Kapazitätsplanung“, das einzige 
Thema, das nichts mit LDAP zu tun hat. Die Themen Messen des 
Ressourcenverbrauchs, Fehlerbehebung bei Ressourcenproblemen, 
Analyse der Leistungsanforderungen und Vorhersagen zukünftigen 
Ressourcenverbrauchs dürften keinem erfahrenen Linux-Administrator 
Probleme bereiten.

<div class="p"><!----></div>
Ein Anhang und ein nützliches Inhaltsverzeichnis runden das Buch ab. 
Einige Schreib- und Satzfehler erwecken den Eindruck, dass das Buch 
schnell fertiggestellt werden musste. Fachliche Fehler sind 
allerdings nicht zu entdecken.

<div class="p"><!----></div>

<h2>Fazit</h2>

<div class="p"><!----></div>
„LPI 301“ eignet sich hervorragend zum Sebststudium und ist allen zu 
empfehlen, die sich auf die Prüfung LPI 301 vorbereiten wollen. Ob 
man es unbedingt benötigt, hängt sicher von der individuellen 
Arbeitsweise ab. Die Investition ist aber wesentlich günstiger als 
eine Wiederholung der Prüfung, falls man es beim ersten Mal nicht 
schaffen sollte, da LPI 301 mit 250 US-Dollar zu Buche schlägt.

Andere professionelle Schulungsunterlagen, soweit überhaupt auf 
Deutsch verfügbar, sind deutlich teurer und eine mehrtägige 
Schulung ist noch einmal eine ganz andere Kategorie.

<div class="p"><!----></div>

<div class="p"><!----></div>
        
<table border="1">
<tr><td colspan="2" align="center"><font size="+0"><b>Buchinformationen</b></font></td></tr>
<tr><td width="43"><b>Titel</b> </td><td width="237">LPI 301 </td></tr>
<tr><td width="43"><b>Autor</b> </td><td width="237">Thorsten Robers </td></tr>
<tr><td width="43"><b>Verlag</b> </td><td width="237">Open Source Press </td></tr>
<tr><td width="43"><b>Umfang</b> </td><td width="237">343 Seiten </td></tr>
<tr><td width="43"><b>ISBN</b> </td><td width="237">978-3-941841-36-9 </td></tr>
<tr><td width="43"><b>Preis</b> </td><td width="237">34,90 EUR </td></tr>
<tr><td width="43">    </td></tr></table>



<div class="p"><!----></div>
    <font color="#595959"><font size="+1">Links</font></font><br />
        
[1] <a href="http://www.pro-linux.de/artikel/2/1513/lpi-301.html"><tt style="font-size: 1.3em;">http://www.pro-linux.de/artikel/2/1513/lpi-301.html</tt></a><br />

<div class="p"><!----></div>
[2] <a href="http://www.lpi.org/"><tt style="font-size: 1.3em;">http://www.lpi.org/</tt></a><br />

<div class="p"><!----></div>
[3] <a href="http://www.lpi.org/eng/certification/the_lpic_program/lpic_3"><tt style="font-size: 1.3em;">http://www.lpi.org/eng/certification/the_lpic_program/lpic_3</tt></a><br />

<div class="p"><!----></div>
[4] <a href="http://www.openldap.org/"><tt style="font-size: 1.3em;">http://www.openldap.org/</tt></a><br />

<div class="p"><!----></div>
[5] <a href="http://www.lpice.eu/de/lpi-zertifizierungsinhalte.html"><tt style="font-size: 1.3em;">http://www.lpice.eu/de/lpi-zertifizierungsinhalte.html</tt></a><br />

<div class="p"><!----></div>
            
<table border="1">
<tr><td colspan="1" align="center"><font size="+0"><b>Autoreninformation</b></font></td></tr>
<tr><td align="left"><b>Hans-Joachim Baader</b>&nbsp;(<a href="http://www.pro-linux.de/">Webseite</a>)
befasst sich seit 1993 mit Linux. 1994 schloss
er sein Informatikstudium erfolgreich ab, machte die
Softwareentwicklung zum Beruf und ist einer der Betreiber
von Pro-Linux.de.
</td></tr>
<tr><td align="left">    </td></tr></table>


            <a href="http://www.freiesmagazin.de/comment/reply/236?edit[subject]=Rezension: LPI 301#comment-form"><i>Diesen Artikel kommentieren</i></a><br /><br />
        <a href="freiesMagazin-2011-08-bilder.html#index">Zum Index</a><br /><hr />

<div class="p"><!----></div>
            

<div class="p"><!----></div>

<div class="p"><!----></div>
                            
<h1><font color="#595959"><a name="11_08_veranstaltungen">Veranstaltungskalender</a><a name="11_08_veranstaltungen">
</a></font></h1>

<div class="p"><!----></div>
        
<table border="1">
<tr><td colspan="5" align="center"><font size="+0"><b>Messen</b></font></td></tr>
<tr><td align="left"><b>Veranstaltung</b> </td><td width="0"><b>Ort</b> </td><td align="left"><b>Datum</b> </td><td width="0"><b>Eintritt</b> </td><td align="left"><b>Link</b> </td></tr>
<tr><td align="left">
Desktop Summit 2011 </td><td width="0">Berlin </td><td align="left">06.08.-12.08.2011 </td><td width="0">- </td><td align="left"><a href="https://www.desktopsummit.org"><tt style="font-size: 1.3em;">https://www.desktopsummit.org</tt></a> </td></tr>
<tr><td align="left">FrOSCon </td><td width="0">Sankt Augustin </td><td align="left">20.08.-21.08.2011 </td><td width="0">5 EUR </td><td align="left"><a href="http://www.froscon.de"><tt style="font-size: 1.3em;">http://www.froscon.de</tt></a> </td></tr>
<tr><td align="left">LibreOffice Hackfest </td><td width="0">München </td><td align="left">02.09.2011 </td><td width="0">- </td><td align="left"><a href="http://wiki.documentfoundation.org/Hackfest2011"><tt style="font-size: 1.3em;">http://wiki.documentfoundation.org/Hackfest2011</tt></a> </td></tr>
<tr><td align="left">openSUSE Conference </td><td width="0">Nürnberg </td><td align="left">11.09.-14.09.2011 </td><td width="0">frei </td><td align="left"><a href="http://en.opensuse.org/Portal:Conference"><tt style="font-size: 1.3em;">http://en.opensuse.org/Portal:Conference</tt></a> </td></tr>
<tr><td align="left">Software Freedom Day </td><td width="0">Weltweit </td><td align="left">17.09.2011 </td><td width="0">frei </td><td align="left"><a href="http://softwarefreedomday.org"><tt style="font-size: 1.3em;">http://softwarefreedomday.org</tt></a> </td></tr>
<tr><td align="left">Ubucon </td><td width="0">Leipzig </td><td align="left">14.10.-16.10.2011 </td><td width="0">- </td><td align="left"><a href="http://www.ubucon.de"><tt style="font-size: 1.3em;">http://www.ubucon.de</tt></a> </td></tr>
<tr><td align="left">        </td></tr></table>


    <font size=1">(Alle Angaben ohne Gewähr!)</font>

<div class="p"><!----></div>
    Sie kennen eine Linux-Messe, welche noch nicht auf der Liste zu
    finden ist? Dann schreiben Sie eine E-Mail mit den Informationen zu
    Datum und Ort an<img src="freiesMagazin-2011-08-bilder-Dateien/redaktionmail.png" alt="redaktion ETT freiesmagazin PUNKT de" height="17" width="168" align="top" />.


<div class="p"><!----></div>
<a href="freiesMagazin-2011-08-bilder.html#index">Zum Index</a><br /><hr />

<div class="p"><!----></div>
                            
<h1><font color="#595959"><a name="11_08_vorschau">Vorschau</a><a name="11_08_vorschau">
</a></font></h1>

<div class="p"><!----></div>
<b><font color="#595959">freies</font></b><font color="#FF630A">Magazin</font> erscheint immer am ersten Sonntag eines Monats. Die September-Ausgabe wird voraussichtlich am 4. September unter anderem mit folgenden Themen veröffentlicht:

<ul>
<li> Trinity – Desktop ohne Zukunft

<div class="p"><!----></div>
</li>
</ul>
Es kann leider vorkommen, dass wir aus internen Gründen angekündigte Artikel verschieben müssen. Wir bitten dafür um Verständnis.<br />
<a href="freiesMagazin-2011-08-bilder.html#index">Zum Index</a><br /><hr />

<div class="p"><!----></div>
                                    
<h1><font color="#595959"><a name="11_08_konventionen">Konventionen</a><a name="11_08_konventionen">
</a></font></h1>

<div class="p"><!----></div>
    An einigen Stellen benutzen wir Sonderzeichen mit einer bestimmten
    Bedeutung. Diese sind hier zusammengefasst:<br />
        
<table>
<tr><td width="59"><b><tt style="font-size: 1.3em;">$</tt></b>:  </td><td align="left">Shell-Prompt </td></tr>
<tr><td width="59"><b><tt style="font-size: 1.3em;">#</tt></b>:  </td><td align="left">Prompt einer Root-Shell – Ubuntu-Nutzer können
                      hier auch einfach in einer normalen Shell ein
                      <b><tt style="font-size: 1.3em;">sudo</tt></b> vor die Befehle setzen.</td></tr>
<tr><td width="59"><b><tt style="font-size: 1.3em;">~</tt></b>: </td><td align="left">Abkürzung für das eigene Benutzerverzeichnis
                      <b><tt style="font-size: 1.3em;">/home/BENUTZERNAME</tt></b> </td></tr></table>
<br />
        <a href="freiesMagazin-2011-08-bilder.html#index">Zum Index</a><br /><hr />

<div class="p"><!----></div>

<div style="background: #FFFFFF;">
    
<table>
<tr><td colspan="3" align="left">                        
<h1><font color="#595959"><a name="11_08_impressum">Impressum <font size="+1">ISSN 1867-7991</font></a><a name="11_08_impressum">
</a></font></h1></td></tr>
<tr><td colspan="3" align="left"><b><font color="#595959">freies</font></b><font color="#FF630A">Magazin</font> erscheint als PDF und HTML einmal monatlich.</td></tr>
<tr><td colspan="3" align="left"> </td></tr>
<tr><td align="left"></td></tr>
<tr><td colspan="3" align="left"><font size="+0"><b>Kontakt</b></font></td></tr>
<tr><td align="left"></td><td align="left">E-Mail </td><td align="left"><img src="freiesMagazin-2011-08-bilder-Dateien/redaktionmail.png" alt="redaktion ETT freiesmagazin PUNKT de" height="17" width="168" align="top" /> </td></tr>
<tr><td align="left"></td><td align="left">Postanschrift </td><td align="left"><b><font color="#595959">freies</font></b><font color="#FF630A">Magazin</font> </td></tr>
<tr><td align="left"></td><td align="left"></td><td align="left">c/o Dominik Wagenführ </td></tr>
<tr><td align="left"></td><td align="left"></td><td align="left">Beethovenstr. 9/1 </td></tr>
<tr><td align="left"></td><td align="left"></td><td align="left">71277 Rutesheim </td></tr>
<tr><td align="left"></td><td align="left">Webpräsenz </td><td align="left"><a href="http://www.freiesmagazin.de/">http://www.freiesmagazin.de/</a> </td></tr>
<tr><td align="left"></td><td align="left"></td><td align="left"></td></tr>
<tr><td colspan="3" align="left"><font size="+0"><b>Autoren dieser Ausgabe</b></font></td></tr>
<tr><td align="left"></td><td align="left">Hans-Joachim Baader </td><td align="left"><a href="freiesMagazin-2011-08-bilder.html#11_08_lpi301">Rezezension: LPI 301</a> </td></tr>
<tr><td align="left"></td><td align="left">Herbert Breunung </td><td align="left"><a href="freiesMagazin-2011-08-bilder.html#11_08_perl1">Perl-Tutorium: Teil 1 – Das erste Programm</a> </td></tr>
<tr><td align="left"></td><td align="left">Dirk Geschke </td><td align="left"><a href="freiesMagazin-2011-08-bilder.html#11_08_webzugriff">Webzugriff</a> </td></tr>
<tr><td align="left"></td><td align="left">Martin Gräßlin </td><td align="left"><a href="freiesMagazin-2011-08-bilder.html#11_08_compositing">Compositing nach X11 – KDE Plasma auf dem Weg nach Wayland</a> </td></tr>
<tr><td align="left"></td><td align="left">Mathias Menzer </td><td align="left"><a href="freiesMagazin-2011-08-bilder.html#11_08_kernel">Der Juli im Kernelrückblick</a> </td></tr>
<tr><td align="left"></td><td align="left">Sujeevan Vijayakumaran </td><td align="left"><a href="freiesMagazin-2011-08-bilder.html#11_08_piwik">Freie Webanalytik mit Piwik</a> </td></tr>
<tr><td align="left"></td><td align="left">Dominik Wagenführ </td><td align="left"><a href="freiesMagazin-2011-08-bilder.html#11_08_latex_optionen">Variable Argumente in LaTeX nutzen</a> </td></tr></table>


<div class="p"><!----></div>
    
<table>
<tr><td align="left"></td></tr>
<tr><td colspan="3" align="left">Erscheinungsdatum: 7. August 2011</td></tr>
<tr><td align="left"></td></tr>
<tr><td align="left"></td></tr>
<tr><td colspan="3" align="left"><font size="+0"><b>Redaktion</b></font></td></tr>
<tr><td align="left"></td><td align="left">Frank Brungräber </td><td align="left">Thorsten Schmidt </td></tr>
<tr><td align="left"></td><td colspan="2" align="left">Dominik Wagenführ (Verantwortlicher Redakteur) </td></tr>
<tr><td align="left"></td><td colspan="2" align="left"> </td></tr>
<tr><td colspan="3" align="left"><font size="+0"><b>Satz und Layout</b></font></td></tr>
<tr><td align="left"></td><td align="left">Ralf Damaschke </td><td align="left">Nico Maikowski </td></tr>
<tr><td align="left"></td><td align="left">Matthias Sitte </td><td align="left"></td></tr>
<tr><td align="left"></td><td colspan="2" align="left"> </td></tr>
<tr><td colspan="3" align="left"><font size="+0"><b>Korrektur</b></font></td></tr>
<tr><td align="left"></td><td align="left">Daniel Braun </td><td align="left">Stefan Fangmeier </td></tr>
<tr><td align="left"></td><td align="left">Mathias Menzer </td><td align="left">Karsten Schuldt </td></tr>
<tr><td align="left"></td><td align="left">Stephan Walter </td><td align="left"></td></tr>
<tr><td align="left"></td><td colspan="2" align="left"> </td></tr>
<tr><td colspan="3" align="left"><font size="+0"><b>Veranstaltungen</b></font></td></tr>
<tr><td align="left"></td><td colspan="2" align="left">Ronny Fischer </td></tr>
<tr><td align="left"></td><td colspan="2" align="left"> </td></tr>
<tr><td colspan="3" align="left"><font size="+0"><b>Logo-Design</b></font></td></tr>
<tr><td align="left"></td><td colspan="2" align="left">Arne Weinberg (<a href="http://www.gnu.org/copyleft/fdl.html">GNU FDL</a>) </td></tr>
<tr><td align="left">    </td></tr></table>


<div class="p"><!----></div>
    Dieses Magazin wurde mit LaTeX erstellt. Mit vollem Namen
    gekennzeichnete Beiträge geben nicht notwendigerweise die Meinung
    der Redaktion wieder. Wenn Sie <b><font color="#595959">freies</font></b><font color="#FF630A">Magazin</font> ausdrucken möchten, dann
    denken Sie bitte an die Umwelt und drucken Sie nur im Notfall. Die
    Bäume werden es Ihnen danken. ;-) <br />

<div class="p"><!----></div>
        Soweit nicht anders angegeben, stehen alle Artikel, Beiträge und Bilder in
    <b><font color="#595959">freies</font></b><font color="#FF630A">Magazin</font> unter der&nbsp;<a href="http://creativecommons.org/licenses/by-sa/3.0/deed.de">Creative-Commons-Lizenz CC-BY-SA 3.0 Unported</a>. Das Copyright liegt
    beim jeweiligen Autor. <b><font color="#595959">freies</font></b><font color="#FF630A">Magazin</font> unterliegt als Gesamtwerk ebenso
    der&nbsp;<a href="http://creativecommons.org/licenses/by-sa/3.0/deed.de">Creative-Commons-Lizenz CC-BY-SA 3.0 Unported</a> mit Ausnahme der
    Inhalte, die unter einer anderen Lizenz hierin veröffentlicht
    werden. Das Copyright liegt bei Dominik Wagenführ. Es wird erlaubt,
    das Werk/die Werke unter den Bestimmungen der Creative-Commons-Lizenz
    zu kopieren, zu verteilen und/oder zu modifizieren. Das <b><font color="#595959">freies</font></b><font color="#FF630A">Magazin</font>-Logo
    wurde von Arne Weinberg erstellt und unterliegt der
    <a href="http://www.gnu.org/copyleft/fdl.html">GFDL</a>.
    Die xkcd-Comics stehen separat unter der&nbsp;<a href="http://creativecommons.org/licenses/by-nc/2.5/">Creative-Commons-Lizenz CC-BY-NC 2.5 Generic</a>. Das Copyright liegt
    bei&nbsp;<a href="http://www.xkcd.com/">Randall Munroe</a>.<br />

<div class="p"><!----></div>
    <a href="freiesMagazin-2011-08-bilder.html#index">Zum Index</a><br /><hr />

<div class="p"><!----></div>
</div>
<br /><br /><hr /><small>File translated from
T<sub><font size=1">E</font></sub>X
by <a href="http://hutchinson.belmont.ma.us/tth/">
T<sub><font size=1">T</font></sub>H</a>,
version 3.89.<br />On 20 Aug 2011, 16:46.</small>
</div>
</body></html>
