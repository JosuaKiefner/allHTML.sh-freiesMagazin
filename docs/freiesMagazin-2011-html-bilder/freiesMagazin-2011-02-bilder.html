<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
           "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><head>
<meta name="description" content="VirtualBox und KVM | Kernel-Crash-Analyse unter Linux | Der Januar im Kernelrückblick | Python – Teil 5: In medias res | Bottle – Ein WSGI-Framework für Python | Sketch – 3-D-Grafikcode für LaTeX | Simutrans – Schnelles Geld zu Lande, zu Wasser und in der Luft | Rezension: Bash – kurz & gut | Rezension: Root-Server einrichten und absichern | Editorial | Leserbriefe | Veranstaltungen | Vorschau | Konventionen | Impressum" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="GENERATOR" content="TtH 3.89">
 <style type="text/css"> div.p { margin-top: 7pt;}</style>
 <style type="text/css"><!--
 td div.comp { margin-top: -0.6ex; margin-bottom: -1ex;}
 td div.comb { margin-top: -0.6ex; margin-bottom: -.6ex;}
 td div.hrcomp { line-height: 0.9; margin-top: -0.8ex; margin-bottom: -1ex;}
 td div.norm {line-height:normal;}
 span.roman {font-family: serif; font-style: normal; font-weight: normal;} 
 span.overacc2 {position: relative;  left: .8em; top: -1.2ex;}
 span.overacc1 {position: relative;  left: .6em; top: -1.2ex;} --></style>

                                                       
<title>freiesMagazin 02/2011</title><link type="text/css" rel="stylesheet" href="freiesMagazin-2011-02-bilder-Dateien/fm_mobil_2016_05.css" />
</head>
<div id="content_idx"><body style="font: 0.85em Tahoma, sans-serif;"><font size="5"><a href="http://www.freiesmagazin.de/mobil/freiesMagazin-2011-02.html">Zur Version ohne Bilder</a></font><hr />

<div class="p"><!----></div>
<font size="+4"><b><font color="#595959">freies</font></b><font color="#FF630A">Magazin</font></font>&nbsp;&nbsp;<font color="#595959"><font size="+4"><b>Februar 2011</b></font></font> <font size="+2">(ISSN 1867-7991)</font><br />

<div class="p"><!----></div>
<font color="#595959"><font size="+3"><b>Topthemen dieser Ausgabe</b></font></font><br />

<div class="p"><!----></div>
    <font size="+1"><a href="freiesMagazin-2011-02-bilder.html#11_02_kvm-vbox">VirtualBox und KVM</a></font> <br />
    Dieser Artikel stellt die Virtualisierungslösungen VirtualBox OSE (Open Source Edition) und KVM (Kernel-based Virtual Machine) in einem kleinen Projekt vor und zeigt auf, wie die gleichen Aktionen in beiden „Welten“ auf der Kommandozeile durchgeführt werden können. Auch wenn beide dasselbe Problem – Bereitstellen eines virtuellen Rechners zum Ausführen von Betriebssystemen und Applikationen – lösen, gibt es in den Details und insbesondere aus der Sicht des Nutzers einige Unterschiede. (<a href="freiesMagazin-2011-02-bilder.html#11_02_kvm-vbox">weiterlesen</a>) <br />
    <br />

<div class="p"><!----></div>
        <font size="+1"><a href="freiesMagazin-2011-02-bilder.html#11_02_python5">Python – Teil 5: In medias res</a></font> <br />
    Im vorherigen Teil dieser Einführung wurden Klassen besprochen. Mit diesem Teil soll nun ein Einstieg in die praktische Programmierung in Angriff genommen werden. Zunächst wird dazu aber noch auf die Fehlerbehandlung in Python eingegangen. (<a href="freiesMagazin-2011-02-bilder.html#11_02_python5">weiterlesen</a>) <br />
    <br />

<div class="p"><!----></div>
    <font size="+1"><a href="freiesMagazin-2011-02-bilder.html#11_02_simutrans">Simutrans – Schnelles Geld zu Lande, zu Wasser und in der Luft</a></font> <br />
    Geld ausgeben ist nicht schwer, Geld verdienen dagegen sehr. Vom Tellerwäscher zum Multimillionär ist es nicht selten ein langer Weg und die Durchfallquote ist hoch. Wer in der Realität ungern mit harter Währung zockt, sollte alternativ in der Virtualität sein Glück versuchen. Eine nicht ganz ernstzunehmende Möglichkeit, aus dem Nichts ein florierendes Imperium zu erschaffen, ist Simutrans. Geld wird man aufgrund der freien Verfügbarkeit des Titels definitiv nicht verlieren und kleine Finanzgenies könnten an diesem Zeitvertreib Gefallen finden. (<a href="freiesMagazin-2011-02-bilder.html#11_02_simutrans">weiterlesen</a>) <br />
    <br />

<div class="p"><!----></div>
<a href="freiesMagazin-2011-02-bilder.html#index">Zum Index</a><br /><hr />

<div class="p"><!----></div>
                  
<div class="p"><!----></div>
                        
<h1><font color="#595959"><a name="index">Inhalt</a><a name="index">
</a></font></h1>

<br />
<b>Linux allgemein</b><br />
<a href="freiesMagazin-2011-02-bilder.html#11_02_kvm-vbox">VirtualBox und KVM</a><br />
<a href="freiesMagazin-2011-02-bilder.html#11_02_kernel-crash-analyse">Kernel-Crash-Analyse unter Linux</a><br />
<a href="freiesMagazin-2011-02-bilder.html#11_02_kernel">Der Januar im Kernelrückblick</a><br />
<br />
<b>Anleitungen</b><br />
<a href="freiesMagazin-2011-02-bilder.html#11_02_python5">Python – Teil 5: In medias res</a><br />
<br />
<b>Software</b><br />
<a href="freiesMagazin-2011-02-bilder.html#11_02_bottle">Bottle – Ein WSGI-Framework für Python</a><br />
<a href="freiesMagazin-2011-02-bilder.html#11_02_sketch">Sketch – 3-D-Grafikcode für LaTeX</a><br />
<a href="freiesMagazin-2011-02-bilder.html#11_02_simutrans">Simutrans – Schnelles Geld zu Lande, zu Wasser und in der Luft</a><br />
<br />
<b>Community</b><br />
<a href="freiesMagazin-2011-02-bilder.html#11_02_rezension-bash">Rezension: Bash – kurz&nbsp;&amp;&nbsp;gut</a><br />
<a href="freiesMagazin-2011-02-bilder.html#11_02_rootserver">Rezension: Root-Server einrichten und absichern</a><br />
<br />
<b>Magazin</b><br />
<a href="freiesMagazin-2011-02-bilder.html#11_02_editorial">Editorial</a><br />
<a href="freiesMagazin-2011-02-bilder.html#11_02_wettbewerb3-ende">Dritter <b><font color="#595959">freies</font></b><font color="#FF630A">Magazin</font>-Programmierwettbewerb beendet</a><br />
<a href="freiesMagazin-2011-02-bilder.html#11_02_leserbriefe">Leserbriefe</a><br />
<a href="freiesMagazin-2011-02-bilder.html#11_02_veranstaltungen">Veranstaltungen</a><br />
<a href="freiesMagazin-2011-02-bilder.html#11_02_vorschau">Vorschau</a><br />
<a href="freiesMagazin-2011-02-bilder.html#11_02_konventionen">Konventionen</a><br />
<a href="freiesMagazin-2011-02-bilder.html#11_02_impressum">Impressum</a><br />



<div class="p"><!----></div>
<a href="freiesMagazin-2011-02-bilder.html#index">Zum Index</a><br /><hr />

<div class="p"><!----></div>
<h1><font color="#595959"><a name="11_02_editorial">Editorial</a><a name="11_02_editorial">
</a></font></h1>
    <font size="+2">Und die Gewinner heißen …</font>

<div class="p"><!----></div>

<h2>Programmierer als Gewinner</h2>

<div class="p"><!----></div>
Auf unserer Webseite konnte man es bereits kurz vor Weihnachten
nachlesen: Der dritter <b><font color="#595959">freies</font></b><font color="#FF630A">Magazin</font>-Programmierwettbewerb wurde beendet&nbsp;<a href="http://www.freiesmagazin.de/20101220-dritter-programmierwettbewerb-beendet">[1]</a>.
Die Auswertung dauerte dann über die Feiertage und die Gewinner konnten
sich am 6. Januar über ihre Preise freuen&nbsp;<a href="http://www.freiesmagazin.de/20110109-gewinner-des-dritten-freiesMagazin-programmierwettbewerbs">[2]</a>.

<div class="p"><!----></div>
Die Anzahl der Teilnehmer war im Vergleich zu den vorherigen
Programmierwettbewerben eher enttäuschend. Es haben gerade einmal halb
so viele Programmierer teilgenommen wie zuvor. Die Gründe wollen wir
in einer Umfrage erfahren&nbsp;<a href="http://www.freiesmagazin.de/20110130-umfrage-teilnahme-dritter-programmierwettbewerb">[3]</a>.
Wir freuen uns über jede Rückmeldung, um den nächsten Programmierwettbewerb attraktiver zu gestalten.

<div class="p"><!----></div>
Alle weiteren Details zum Wettbewerb können im <a href="freiesMagazin-2011-02-bilder.html#11_02_wettbewerb3-ende">zugehörigen Artikel</a> nachgelesen werden.

<div class="p"><!----></div>

<h2>HTTP als Gewinner</h2>

<div class="p"><!----></div>
Ab und an erhalten wir die Anfrage, wieso wir zum einen sowohl FTP-
als auch HTTP-Links zum Magazin angeben und zum anderen, wieso FTP
als Erstes genannt wird.

<div class="p"><!----></div>
Beide Anfragen lassen sich leicht beantworten: Weil wir es können
und weil es schon immer so war. Dies sind natürlich keine befriedigenden
Antworten und um zu testen, ob HTTP oder FTP
bei den Lesern beliebter ist, haben wir ab November die Linkreihenfolge
in der Veröffentlichungsnachricht umgedreht, sodass HTTP zuerst genannt
wurde. Damit konnten wir testen, ob die Leser einfach nur den ersten
Link anklicken oder gezielt den FTP-Link wählen.

<div class="p"><!----></div>
In der Vergangenheit war es so, dass die FTP-Version mit im Schnitt
300 Downloads vor der HTTP-Version lag. Nach der Umstellung der
Reihenfolge drehte sich dies gewaltig um und über FTP wurde <b><font color="#595959">freies</font></b><font color="#FF630A">Magazin</font>
nur noch halb so oft heruntergeladen wie über HTTP. Dies zeigt deutlich,
dass die vorherige Präferenz für FTP hausgemacht war und nur daran lag,
dass wir den FTP-Link als Erstes nannten.

<div class="p"><!----></div>
Aus dem Grund haben wir den FTP-Link nun einfach gestrichen, da es
wirklich unsinnig ist, beide Version zu verlinken. Wer will, kann
natürlich immer noch den FTP-Server unter <a href="ftp://ftp.freiesmagazin.de/"><tt style="font-size: 1.3em;">ftp://ftp.freiesmagazin.de/</tt></a>
durchforsten, aber wir werden den FTP-Link nicht mehr separat erwähnen.
Dies schafft hoffentlich bei Neulingen auch mehr Klarheit, da es nur
noch einen Link zur PDF-Version gibt.

<div class="p"><!----></div>

<h2>ePub als Verlierer</h2>

<div class="p"><!----></div>
Anfang Januar 2011 fragten wir, ob die Leser von <b><font color="#595959">freies</font></b><font color="#FF630A">Magazin</font> eine extra
Mobilausgabe neben der PDF- und den beiden HTML-Versionen
benötigen&nbsp;<a href="http://www.freiesmagazin.de/20110110-umfrage-mobilversion-freiesmagazin">[4]</a>.
Insgesamt haben 490 Menschen

abgestimmt, wovon 41&nbsp;% (202 Stimmen)
gar keine Mobilversion benötigen. Weitere 54&nbsp;% (264 Stimmen) sind mit dem aktuellen Angebot (PDF und HTML) zufrieden und benötigen keine
weitere Mobilversion zum Angebot. Da Mehrfachnennungen zugelassen
waren, gibt es noch 20&nbsp;% (100 Stimmen), die eine andere Mobilversion
(zum Beispiel im A5-Hochformat-PDF oder im ePub-Format&nbsp;<a href="http://de.wikipedia.org/wiki/Epub">[5]</a>) wollten.

<div class="p"><!----></div>
Obwohl die Nachfrage nach einer neuen Mobilversion sehr gering war,
haben wir uns dennoch umgeschaut, ob wir mit wenig Aufwand (!) eine
A5- oder eine ePub-Version erzeugen können. Die Ergebnisse waren leider
bescheiden. Eine A5-Version wäre möglich, würde aber an einigen Stellen
einen direkten Eingriff in die Artikel erfordern, weil es zahlreiche
Wörter bzw. Befehlsketten gab, die über den Rand hinausragten und die man
nicht mehr lesen konnte. 

<div class="p"><!----></div>
Noch etwas schlechter sah es bei einer Konvertierung in ePub aus&nbsp;<a href="http://www.freiesmagazin.de/20110110-umfrage-mobilversion-freiesmagazin#comment-1627">[6]</a>.
Da wir LaTeX als Basis für <b><font color="#595959">freies</font></b><font color="#FF630A">Magazin</font> nutzen, bringt dies
Probleme mit, weil es keinen Konverter von LaTeX direkt nach ePub gibt. Das
PDF in ePub zu konvertieren ist wegen des dreispaltigen Layouts fast
unmöglich und lieferte keine guten Ergebnisse. Aber auch die HTML-Version
als Zwischenstufe war nicht nutzbar, da TTH&nbsp;<a href="http://hutchinson.belmont.ma.us/tth/">[7]</a> als Konverter ein wohl
eher schlechtes HTML als Ausgabe erzeugt. Bei der nachfolgenden
Konvertierung nach ePub fehlten zahlreiche Absätze, Links und
Überschriften. Öffnet man die HTML-Seite aber in einem Browser,
speichert sie ab und konvertiert dann nach ePub, sah das Ergebnis
annehmbarer aus, war aber noch weit entfernt von einem guten Layout.

<div class="p"><!----></div>
Aus dem Grund haben wir uns entschieden, vorerst keine weitere Arbeit in eine
extra Mobilversion zu stecken. Der damit verbundene Aufwand wird durch
die Nachfrage nicht gerechtfertigt, vor allem da die Konvertierungshelfer
noch zu viele Probleme machen.

<div class="p"><!----></div>
Wer aber eine Möglichkeit kennt, wie man ein ordentliches ePub
automatisiert erzeugen kann, kann uns unter <img src="freiesMagazin-2011-02-bilder-Dateien/redaktionmail.png" alt="redaktion ETT freiesmagazin PUNKT de" height="17" width="168" align="top" /> schreiben. Sobald
sich die Werkzeuge verbessern oder wir den Kniff heraus haben, steht
einer ePub-Veröffentlichung natürlich nichts im Wege. Wichtig ist
dabei immer, dass wir die vorliegenden TEX-Dateien nicht ändern
wollen. Maximal an der Formatierung (also alles, was über
LaTeX-Befehle beeinflusst wird) können wir etwas ändern.

<div class="p"><!----></div>
Und nun wünschen wir Ihnen viel Spaß mit der neuen Ausgabe.

<div class="p"><!----></div>
Ihre <b><font color="#595959">freies</font></b><font color="#FF630A">Magazin</font>-Redaktion

<div class="p"><!----></div>
    <font color="#595959"><font size="+1">Links</font></font><br />
        
[1] <a href="http://www.freiesmagazin.de/20101220-dritter-programmierwettbewerb-beendet"><tt style="font-size: 1.3em;">http://www.freiesmagazin.de/20101220-dritter-programmierwettbewerb-beendet</tt></a><br />

<div class="p"><!----></div>
[2] <a href="http://www.freiesmagazin.de/20110109-gewinner-des-dritten-freiesMagazin-programmierwettbewerbs"><tt style="font-size: 1.3em;">http://www.freiesmagazin.de/20110109-gewinner-des-dritten-freiesMagazin-programmierwettbewerbs</tt></a><br />

<div class="p"><!----></div>
[3] <a href="http://www.freiesmagazin.de/20110130-umfrage-teilnahme-dritter-programmierwettbewerb"><tt style="font-size: 1.3em;">http://www.freiesmagazin.de/20110130-umfrage-teilnahme-dritter-programmierwettbewerb</tt></a><br />

<div class="p"><!----></div>
[4] <a href="http://www.freiesmagazin.de/20110110-umfrage-mobilversion-freiesmagazin"><tt style="font-size: 1.3em;">http://www.freiesmagazin.de/20110110-umfrage-mobilversion-freiesmagazin</tt></a><br />

<div class="p"><!----></div>
[5] <a href="http://de.wikipedia.org/wiki/Epub"><tt style="font-size: 1.3em;">http://de.wikipedia.org/wiki/Epub</tt></a><br />

<div class="p"><!----></div>
[6] <a href="http://www.freiesmagazin.de/20110110-umfrage-mobilversion-freiesmagazin#comment-1627"><tt style="font-size: 1.3em;">http://www.freiesmagazin.de/20110110-umfrage-mobilversion-freiesmagazin#comment-1627</tt></a><br />

<div class="p"><!----></div>
[7] <a href="http://hutchinson.belmont.ma.us/tth/"><tt style="font-size: 1.3em;">http://hutchinson.belmont.ma.us/tth/</tt></a><br />

<div class="p"><!----></div>
                        <a href="http://www.freiesmagazin.de/comment/reply/214?edit[subject]=Editorial#comment-form"><i>Das Editorial kommentieren</i></a><br /><br />
    <a href="freiesMagazin-2011-02-bilder.html#index">Zum Index</a><br /><hr />

<div class="p"><!----></div>


<div class="p"><!----></div>
<h1><font color="#595959"><a name="11_02_kvm-vbox">VirtualBox und KVM</a><a name="11_02_kvm-vbox">
</a></font></h1>von Hauke Goos-Habermann        
<div class="p"><!----></div>
<b>D</b><b>ieser Artikel stellt die Virtualisierungslösungen VirtualBox&nbsp;<a href="http://www.virtualbox.org">[1]</a> OSE (Open Source Edition) und KVM&nbsp;<a href="http://www.linux-kvm.org/">[2]</a>
(Kernel-based Virtual Machine) in einem kleinen 
Projekt vor und zeigt auf, wie die gleichen Aktionen in beiden „Welten“ auf 
der Kommandozeile durchgeführt werden können. Auch wenn beide dasselbe 
Problem – Bereitstellen eines virtuellen Rechners zum Ausführen von 
Betriebssystemen und Applikationen – lösen, gibt es in den Details und 
insbesondere aus der Sicht des Nutzers einige Unterschiede.
Beide Lösungen stehen unter freien Lizenzen, bei VirtualBox gibt es zudem eine 
nicht-freie Version, die unter der proprietären „VirtualBox Personal Use and 
Evaluation License (PUEL)“ steht. Diese bringt zusätzliche bzw. andere 
Funktionen mit, was aber in diesem Artikel nicht behandelt wird und für dieses 
Projekt nicht weiter von Bedeutung ist.</b>

<div class="p"><!----></div>

<h2>Installation</h2>

<div class="p"><!----></div>
Zuerst legt man ein neues Verzeichnis an, das die Daten für dieses Projekt 
aufnehmen wird und wechselt in dieses.

<div class="p"><!----></div>

<h3>KVM</h3>

<div class="p"><!----></div>
Das für KVM essentielle Modul ist seit Linux 2.6.20 Teil des Kernels und 
sollte daher bereits von jeder halbwegs aktuellen Distribution installiert 
sein. Allerdings kann das Modul nur geladen werden, wenn die CPU über 
Virtualisierungsfunktionen verfügt, ansonsten meldet das KVM-Modul einen 
Fehler. Möchte man vorher 
überprüfen, ob die eigene CPU KVM-tauglich ist, so muss das Flag 
<b><tt style="font-size: 1.3em;">vmx</tt></b> bei Intel- und <b><tt style="font-size: 1.3em;">svm</tt></b> bei AMD-CPUs vorhanden sein.
Mit folgendem Einzeiler lässt sich dies leicht 
überprüfen:

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
$&nbsp;grep&nbsp;flags&nbsp;/proc/cpuinfo&nbsp;|&nbsp;egrep&nbsp;-c&nbsp;'(vmx|svm)'
</pre>

<div class="p"><!----></div>
 
<div class="p"><!----></div>
Ist der Ausgabewert größer als 0, so steht der Verwendung von KVM nichts mehr im 
Wege.

<div class="p"><!----></div>
Zudem benötigt man noch die Pakete <b>qemu-utils</b>, <b>kvm</b> und 
<b>openvpn</b>, die man über die Paketverwaltung installiert.

<div class="p"><!----></div>
Nun lädt man das Skript <b><tt style="font-size: 1.3em;">VirtualBox-networking-setup.sh</tt></b>&nbsp;<a href="http://sourceforge.net/projects/dodger-tools/files/VirtualBox-OSE/VirtualBox-networking-setup.sh/download">[3]</a>
in das Projektverzeichnis herunter. Wie der Name 
andeutet, wurde das Skript ursprünglich für VirtualBox geschrieben, um dort 
Netzwerkbrücken und virtuelle Netzwerkschnittstellen anzulegen. Nun leistet es 
dasselbe für KVM.

<div class="p"><!----></div>

<h3>VirtualBox</h3>

<div class="p"><!----></div>
VirtualBox OSE sollte sich ebenfalls in den Paketquellen der meisten 
Distributionen – wenn auch nicht immer in der neuesten Version – befinden. 
Da sich die Parameter von Version 2 zu 3 (meist doppeltes Minuszeichen 
<b><tt style="font-size: 1.3em;">--</tt></b> vor dem Parameter statt eines einfachen Minus <b><tt style="font-size: 1.3em;">-</tt></b> bei Version 2) leicht 
geändert haben, ist darauf zu achten, dass VirtualBox in Version 3.x 
installiert wird.

<div class="p"><!----></div>
Ist VirtualBox in der eigenen Distribution zu alt, so gibt es die Möglichkeit, 
eine aktuelle Version von der VirtualBox-Seite&nbsp;<a href="http://www.virtualbox.org/wiki/Downloads">[4]</a> 
zu beziehen. Dort gibt es 
vorkompilierte Pakete der unfreien VirtualBox für viele Distributionen und den 
Quelltext der OSE zum Selberkompilieren. Vorkompilierte VirtualBox OSE-Pakete 
für Debian Lenny gibt es bei den Dodger-Tools&nbsp;<a href="http://dodger-tools.sourceforge.net/cms/index.php?id=100000005">[5]</a>.
Ob man
VirtualBox OSE oder VirtualBox PUEL installiert, ist für die Beispiele in 
diesem Artikel nicht wichtig.

<div class="p"><!----></div>
Zu guter Letzt benötigt man noch das ISO-Abbild einer Linux-Distribution 
(*BSD, Haiku, ReactOS, etc. sollten auch gehen). Welche man dafür wählt, ist 
nicht entscheidend, man sollte sich aber mit deren Einrichtung auskennen.

<div class="p"><!----></div>

<h2>Konfiguration</h2>

<div class="p"><!----></div>
Nach der Installation muss man dafür sorgen, dass der eigene Benutzer in den 
Gruppen <b><tt style="font-size: 1.3em;">kvm</tt></b> und <b><tt style="font-size: 1.3em;">vboxusers</tt></b> eingetragen ist, da dieser sonst keine 
virtuelle Maschine (VM) starten kann. 
<div class="p"><!----></div>
Findet man die Benutzerverwaltung nicht auf Anhieb, kann man auch folgendes ausführen (<b><tt style="font-size: 1.3em;">BENUTZER</tt></b> durch den 
Namen des eigenen Benutzers ersetzen) :

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
#&nbsp;adduser&nbsp;BENUTZER&nbsp;kvm
#&nbsp;adduser&nbsp;BENUTZER&nbsp;vboxusers
</pre>

<div class="p"><!----></div>
Damit die Gruppenzugehörigkeit wirksam wird, muss man sich aus- und wieder 
einloggen. Das Skript 

<b><tt style="font-size: 1.3em;">VirtualBox-networking-setup.sh</tt></b> bedarf noch einer kleinen Anpassung. So wird <b><tt style="font-size: 1.3em;">BENUTZER</tt></b> in der Zeile 
<b><tt style="font-size: 1.3em;">user=BENUTZER</tt></b> ebenfalls durch den eigenen Benutzernamen ersetzt.

<div class="p"><!----></div>

<h2>VM-Start vorbereiten</h2>

<div class="p"><!----></div>
Da beide Virtualisierer nicht gleichzeitig betrieben werden können, muss vor 
dem Laden des einen Kernel-Moduls das jeweils andere entfernt werden.

<div class="p"><!----></div>
Zum Laden des VirtualBox-Moduls verwendet man

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
#&nbsp;/etc/init.d/vboxdrv&nbsp;start
</pre>

<div class="p"><!----></div>
und zum Entfernen

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
#&nbsp;/etc/init.d/vboxdrv&nbsp;stop
</pre>

<div class="p"><!----></div>
Bei KVM gibt es den kleinen Unterschied, dass je nach CPU-Typ (AMD oder Intel) 
ein anderes Modul geladen bzw. wieder entfernt wird.

<div class="p"><!----></div>
Zum Laden

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
#&nbsp;modprobe&nbsp;kvm-amd
</pre>

<div class="p"><!----></div>
bzw.

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
#&nbsp;modprobe&nbsp;kvm-intel
</pre>

<div class="p"><!----></div>
und zum Entfernen

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
#&nbsp;rmmod&nbsp;kvm-amd
</pre>

<div class="p"><!----></div>
bzw. 

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
#&nbsp;rmmod&nbsp;kvm-intel
</pre>

<div class="p"><!----></div>
Für das Erstellen der Netzwerkbrücke führt man noch 
<b><tt style="font-size: 1.3em;">VirtualBox-networking-setup.sh</tt></b> aus (die Frage beantwortet man mit <i>„Y“</i>&nbsp;+&nbsp;<i>„Enter“</i>):

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
#&nbsp;sh&nbsp;VirtualBox-networking-setup.sh
</pre>

<div class="p"><!----></div>
    <img border="0" src="freiesMagazin-2011-02-bilder-Dateien/kvm-vbox-virtualbox_networking_setup.png" /><br /><em>Ausgabe von <b><tt style="font-size: 1.3em;">VirtualBox-networking-setup.sh</tt></b>.</em><br />

<div class="p"><!----></div>
Nach einem Systemneustart muss das Skript erneut ausgeführt werden, da die 
Erstellung nur temporär ist.
Die Netzwerkschnittstellen und die Netzwerkbrücke können auch wieder entfernt 
werden (was aber im Normalfall nicht nötig sein sollte):

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
#&nbsp;/tmp/VirtualBox-networking-disable.sh
</pre>

<div class="p"><!----></div>

<h2>Virtuelle Festplatte vorbereiten</h2>

<div class="p"><!----></div>
Ohne Festplatte geht auch bei virtuellen 
    
Rechnern (fast) gar nichts. Diese 
Festplatten, die in einer VM verwendet werden, liegen dabei meist als Dateien 
vor. Sie verhalten sich aus der Sicht des in der VM ausgeführten 
Betriebssystems wie eine herkömmliche Festplatte. Diese virtuellen Festplatten 
können so angelegt werden, dass die dazugehörige Datei nur bis zum wirklich 
benutzten Speicher anwächst und somit auf der physikalisch vorhandenen 
Festplatte nur so viel Plattenplatz verwendet, wie benötigt wird. Man kann also 
getrost eine etwas größere Maximalgröße angeben, auch wenn man nicht 
beabsichtigt, diese auszuschöpfen. Denn nichts ist ärgerlicher als eine zu 
kleine virtuelle Festplatte, die man nachträglich zu vergrößern versucht.
Das folgende Beispiel zeigt, wie eine 8 GB große Festplattendatei erzeugt wird.
Für KVM verwendet man das von QEMU stammende <b><tt style="font-size: 1.3em;">qemu-img</tt></b>:

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
$&nbsp;qemu-img&nbsp;create&nbsp;-f&nbsp;qcow2&nbsp;festplatte.kvm&nbsp;8192M
</pre>

<div class="p"><!----></div>
 
<div class="p"><!----></div>
Bei VirtualBox wird die Datei über das zentrale Verwaltungsprogramm 
<b><tt style="font-size: 1.3em;">VBoxManage</tt></b> angelegt und gleichzeitig in einer internen Datenbank 
registriert:

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
$&nbsp;VBoxManage&nbsp;createvdi&nbsp;-filename&nbsp;festplatte.vdi&nbsp;-size&nbsp;8192&nbsp;-register
</pre>

<div class="p"><!----></div>
 
<div class="p"><!----></div>
Anders als bei KVM landet die Datei nicht im aktuellen, sondern in einem von 
VirtualBox dafür vorgesehenen Verzeichnis. Gibt man hingegen den vollen Pfad 
an, so kann die Datei in jedem beliebigen Verzeichnis erstellt werden. So legt 
das folgende Beispiel mit Hilfe von <b><tt style="font-size: 1.3em;">pwd</tt></b> die Datei im aktuellen 
Verzeichnis an:

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
$&nbsp;VBoxManage&nbsp;createvdi&nbsp;-filename&nbsp;`pwd`/festplatte.vdi&nbsp;-size&nbsp;8192&nbsp;-register
</pre>

<div class="p"><!----></div>
 
<div class="p"><!----></div>

<div class="p"><!----></div>
<img border="0" src="freiesMagazin-2011-02-bilder-Dateien/kvm-vbox-virtualbox_festplatten_angelegt.png" /><br /><em>Anlegen der virtuellen Festplatten.</em><br />

<div class="p"><!----></div>

<h2>VMs anlegen</h2>

<div class="p"><!----></div>
Bei VirtualBox muss man eine VM anlegen, um diese starten zu können. Bei 
KVM ist dieser Schritt nicht vorgesehen.
Mit dem bereits bekannten <b><tt style="font-size: 1.3em;">VBoxManage</tt></b> registriert man zunächst eine leere 
VM:

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
$&nbsp;VBoxManage&nbsp;createvm&nbsp;-register&nbsp;-name&nbsp;vboxvm
</pre>

<div class="p"><!----></div>
 
<div class="p"><!----></div>
Diese wird im Folgenden um eine IDE-Schnittstelle erweitert, mit der jedes 
Betriebssystem umgehen können sollte:

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
$&nbsp;VBoxManage&nbsp;storagectl&nbsp;vboxvm&nbsp;--name&nbsp;"IDE&nbsp;Controller"&nbsp;--add&nbsp;ide
</pre>

<div class="p"><!----></div>

<h3>Erklärung der Parameter</h3>

<div class="p"><!----></div>
Nun geht es ans Eingemachte. Dieses doch etwas längere Kommando konfiguriert 
gleich eine Reihe von VM-Eigenschaften mit einem Schritt:

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
$&nbsp;VBoxManage&nbsp;modifyvm&nbsp;vboxvm&nbsp;--pae&nbsp;off&nbsp;--ostype&nbsp;debian&nbsp;--memory&nbsp;512&nbsp;--vram&nbsp;8&nbsp;--acpi&nbsp;on&nbsp;--ioapic&nbsp;off&nbsp;--hwvirtex&nbsp;off&nbsp;--nestedpaging&nbsp;off&nbsp;--monitorcount&nbsp;1&nbsp;--bioslogofadein&nbsp;off&nbsp;--bioslogofadeout&nbsp;off&nbsp;--hda&nbsp;`pwd`/festplatte.vdi&nbsp;--nic1&nbsp;bridged&nbsp;--bridgeadapter1&nbsp;eth0&nbsp;--cableconnected1&nbsp;on&nbsp;--macaddress1&nbsp;00AABBCCDDFF&nbsp;--boot1&nbsp;dvd
</pre>

<div class="p"><!----></div>
 
<div class="p"><!----></div>

<div class="p"><!----></div>
<img border="0" src="freiesMagazin-2011-02-bilder-Dateien/kvm-vbox-virtualbox_vm_angelegt.png" /><br /><em>Anlegen und Konfigurieren der VirtualBox-VM.</em><br />

<div class="p"><!----></div>
<b><tt style="font-size: 1.3em;">--pae off</tt></b> deaktiviert die sogenannte „Physical Address Extension“, 
die auf 32-Bit-Maschinen für die Verwendung von mehr als 4 GB Arbeitsspeicher 
erforderlich ist. Möchte man seiner VM mehr als 4 GB Arbeitsspeicher zuweisen, 
so kann man die Option auch auf „on“ setzen, dies ist aber nur sinnvoll, wenn 
man physikalisch mehr als 4 GB besitzt. Bei Aktivierung wird zudem eine CPU mit 
Virtualisierungsfunktionen vorausgesetzt.

<div class="p"><!----></div>
Der Parameter <b><tt style="font-size: 1.3em;">--memory 512</tt></b> gibt an, dass 512&nbsp;MB vom Arbeitsspeicher des 
Wirtsrechners für die VM verwendet werden sollen. Andere Werte sind natürlich 
auch möglich, nur sollte man darauf achten, dass für den Wirtsrechner noch 
genügend zur Verfügung steht.

<div class="p"><!----></div>
<b><tt style="font-size: 1.3em;">--ostype debian</tt></b> setzt das Profil für diese VM auf die 
Debian-Distributionen. Das Profil setzt einige Einstellungen, die aber auch 
separat konfiguriert werden können. Das passende Profil zu wählen ist 
jedenfalls nie verkehrt. Mit

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
$&nbsp;VBoxManage&nbsp;list&nbsp;ostypes
</pre>

<div class="p"><!----></div>
 
<div class="p"><!----></div>
können alle von VirtualBox bekannten Betriebssysteme und Distributionen 
aufgelistet werden.

<div class="p"><!----></div>
Durch das Deaktivieren der „Nested paging“-Erweiterung (zum Ausführen 
einer VM innerhalb 
    
einer anderen VM) mittels <b><tt style="font-size: 1.3em;">--nestedpaging off</tt></b> 
funktioniert die VM auch auf CPUs ohne Virtualisierungsfunktionen.

<div class="p"><!----></div>
<b><tt style="font-size: 1.3em;">--monitorcount 1</tt></b> legt die Anzahl der angeschlossenen (virtuellen) 
Monitore fest.

<div class="p"><!----></div>
Die beiden Optionen <b><tt style="font-size: 1.3em;">--bioslogofadein off --bioslogofadeout off</tt></b> 
beschleunigen durch Entfernen der Einblendung von Logos das Starten der VM.

<div class="p"><!----></div>
Mittels <b><tt style="font-size: 1.3em;">--hda `pwd`/festplatte.vdi</tt></b> wird die gerade angelegte virtuelle 
Festplattendatei an das (virtuelle) Master-Kabel der IDE-Schnittstelle 
„angeschlossen“.

<div class="p"><!----></div>
Die Parameter <b><tt style="font-size: 1.3em;">--nic1 bridged --bridgeadapter1 eth0</tt></b> versetzen die erste 
(virtuelle) Netzwerkkarte mit der physikalischen 
    
Netzwerkschnittstelle 
„eth0“ in den Netzwerkbrücken-Modus („bridged“). „eth0“ sollte 
hierbei die Schnittstelle sein, die mit dem übrigen Netzwerk (bzw. Internet) 
kommunizieren kann.

<div class="p"><!----></div>
<b><tt style="font-size: 1.3em;">--cableconnected1 on</tt></b> „steckt“ das virtuelle Netzwerkkabel in die 
virtuelle Netzwerkschnittstelle, damit das Betriebssystem die Netzwerkkarte verwenden kann und nicht meldet, dass das 
Kabel nicht angeschlossen sei.

<div class="p"><!----></div>
    <b><tt style="font-size: 1.3em;">--macaddress1 00AABBCCDDFF</tt></b> gibt der Karte noch die benötigte 
MAC-Adresse. Möchte man mehrere VMs anlegen, so muss die virtuelle MAC-Adresse 
angepasst werden, da es keine zwei Rechner 
mit gleicher MAC geben darf. Für jede der insgesamt 12 Stellen
darf dafür eine Hex-Zahl, 
also eine Ziffer von 0-9 oder ein Buchstabe von A-F, verwendet werden.

<div class="p"><!----></div>
<b><tt style="font-size: 1.3em;">--boot1 dvd</tt></b> legt fest, dass die VM von einem virtuellen DVD-Laufwerk 
booten soll.

<div class="p"><!----></div>

<h2>CD/DVD-ISO „einlegen“</h2>

<div class="p"><!----></div>
Bei VirtualBox wird das ISO-Abbild in das virtuelle CD/DVD-Laufwerk eingelegt. 
Im folgenden wird davon ausgegangen, dass das ISO 
<b><tt style="font-size: 1.3em;">xubuntu-10.10-desktop-i386.iso</tt></b> heißt und im Projekt-Verzeichnis
liegt. Von dort aus setzt man folgenden Befehl ab:

<div class="p"><!----></div>
    
<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
$&nbsp;VBoxManage&nbsp;storageattach&nbsp;vboxvm&nbsp;--storagectl&nbsp;"IDE&nbsp;Controller"&nbsp;--type&nbsp;dvddrive&nbsp;--medium&nbsp;`pwd`/xubuntu-10.10-desktop-i386.iso&nbsp;--port&nbsp;0&nbsp;--device&nbsp;1
</pre>

<div class="p"><!----></div>
     

<div class="p"><!----></div>

<h2>Ein Betriebssystem installieren</h2>

<div class="p"><!----></div>
Nach den Vorarbeiten an der VirtualBox-VM ist das Starten ganz einfach:

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
$&nbsp;VBoxManage&nbsp;startvm&nbsp;vboxvm&nbsp;--type&nbsp;gui
</pre>

<div class="p"><!----></div>
 
<div class="p"><!----></div>
Neben dem Typ <b><tt style="font-size: 1.3em;">gui</tt></b>, der das VM-Fenster mit einem Menü versieht, gibt es 
noch <b><tt style="font-size: 1.3em;">sdl</tt></b> (ohne Menü) sowie <b><tt style="font-size: 1.3em;">headless</tt></b>, womit jegliche Ausgabe 
verhindert wird – was nur sinnvoll ist, wenn man die VM bereits installiert hat 
und nur noch als Server verwenden und z.B. per SSH darauf zugreifen will.

<div class="p"><!----></div>
<img border="0" src="freiesMagazin-2011-02-bilder-Dateien/kvm-vbox-virtualbox_vm_gestartet.png" /><br /><em>Gestartete Xubuntu-CD in VirtualBox.</em><br />

<div class="p"><!----></div>
KVM kennt keine Konfiguration wie VirtualBox. Um die KVM-VM zu starten, genügt 
folgende Zeile:

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
$&nbsp;kvm&nbsp;-m&nbsp;512&nbsp;-boot&nbsp;d&nbsp;-cdrom&nbsp;xubuntu-10.10-desktop-i386.iso&nbsp;-hda&nbsp;festplatte.kvm&nbsp;-net&nbsp;nic,model=rtl8139,vlan=0,macaddr=00:AA:BB:CC:DD:FF&nbsp;-net&nbsp;tap,ifname=tap0,script=/bin/true
</pre>

<div class="p"><!----></div>
 
<div class="p"><!----></div>
<b><tt style="font-size: 1.3em;">-m 512</tt></b> gibt wiederum die Größe des Arbeitsspeichers an, <b><tt style="font-size: 1.3em;">-boot d</tt></b> 
legt das CD/DVD-Laufwerk als Bootmedium fest, <b><tt style="font-size: 1.3em;">-cdrom xubuntu-10.10-desktop-i386.iso</tt></b> 
legt das ISO in das Laufwerk und <b><tt style="font-size: 1.3em;">-hda 
festplatte.kvm</tt></b> dient zum Verbinden des (noch leeren) Festplattenabbildes mit 
der VM. Die Konfiguration der 
    
    
Netzwerkkarte <b><tt style="font-size: 1.3em;">-net nic,model=rtl8139,vlan=0,macaddr=00:AA:BB:CC:DD:FF</tt></b> ist ähnlich wie bei 
VirtualBox. Hinzu kommt hier die Wahl der virtuellen Netzwerkschnittstelle 
„tap0“ bei <b><tt style="font-size: 1.3em;">-net tap,ifname=tap0,script=/bin/true</tt></b>. 

<div class="p"><!----></div>
Möchte man mehrere 
KVM-VMs parallel laufen lassen, so ist neben einer neuen MAC-Adresse auch die 
nächste freie <b><tt style="font-size: 1.3em;">tapX</tt></b> zu wählen. Das Skript <b><tt style="font-size: 1.3em;">VirtualBox-networking-setup.sh</tt></b> 
legt in der Standardeinstellung gleich 20 Stück von <b><tt style="font-size: 1.3em;">tap0</tt></b> bis <b><tt style="font-size: 1.3em;">tap19</tt></b> an.

<div class="p"><!----></div>
<img border="0" src="freiesMagazin-2011-02-bilder-Dateien/kvm-vbox-kvm_vm_gestartet.png" /><br /><em>Gestartete Xubuntu-CD in KVM.</em><br />

<div class="p"><!----></div>
    
<h2>VM starten</h2>
Hat man das Betriebssystem auf der virtuellen Platte installiert, so möchte 
man wahrscheinlich nun von dieser starten.

<div class="p"><!----></div>
Unter VirtualBox verändert man die Konfiguration der VM, sodass diese als erstes 
von der Festplatte bootet:

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
$&nbsp;VBoxManage&nbsp;modifyvm&nbsp;vboxvm&nbsp;--boot1&nbsp;disk
</pre>

<div class="p"><!----></div>
 
<div class="p"><!----></div>
Danach kann (wie zuvor beschrieben mittels <b><tt style="font-size: 1.3em;">VBoxManage startvm ...</tt></b>) die VM normal 
gestartet werden.

<div class="p"><!----></div>
Bei KVM wird die Zeile an einer Stelle angepasst und aus <b><tt style="font-size: 1.3em;">-boot d</tt></b> wird nun 
<b><tt style="font-size: 1.3em;">-boot c</tt></b>:

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
$&nbsp;kvm&nbsp;-m&nbsp;512&nbsp;-boot&nbsp;c&nbsp;....&nbsp;
</pre>

<div class="p"><!----></div>
 
<div class="p"><!----></div>

<h2>Fazit</h2>

<div class="p"><!----></div>
Wie auf vielen anderen Gebieten ist es eine Geschmacksfrage, welchen der beiden 
vorgestellten Virtualisierer man verwendet.
Aus meiner Sicht gibt es nichts, was prinzipiell gegen einen der beiden 
Kandidaten sprechen würde. Sie lassen sich beide in (nahezu)

jedem Projekt 
verwenden. Hat man es mit älteren Rechnern ohne Virtualisierungsfunktionen zu 
tun, so scheidet KVM leider aus, auch kann VirtualBox unter einer Vielzahl von 
Betriebssystemen (Linux, FreeBSD, Windows, Mac OS X/Intel, Solaris und OS/2) 
betrieben werden. KVM bietet hingegen den Vorteil, dass es seit geraumer Zeit 
in jedem Linux-Kernel vorhandenen ist und damit immer ohne Patches 
funktioniert. 

<div class="p"><!----></div>

<div class="p"><!----></div>

<div class="p"><!----></div>

<div class="p"><!----></div>

<div class="p"><!----></div>

<div class="p"><!----></div>
    <font color="#595959"><font size="+1">Links</font></font><br />
        
[1] <a href="http://www.virtualbox.org"><tt style="font-size: 1.3em;">http://www.virtualbox.org</tt></a><br />

<div class="p"><!----></div>
[2] <a href="http://www.linux-kvm.org/"><tt style="font-size: 1.3em;">http://www.linux-kvm.org/</tt></a><br />

<div class="p"><!----></div>
[3] <a href="http://sourceforge.net/projects/dodger-tools/files/VirtualBox-OSE/VirtualBox-networking-setup.sh/download"><tt style="font-size: 1.3em;">http://sourceforge.net/projects/dodger-tools/files/VirtualBox-OSE/VirtualBox-networking-setup.sh/download</tt></a><br />

<div class="p"><!----></div>
[4] <a href="http://www.virtualbox.org/wiki/Downloads"><tt style="font-size: 1.3em;">http://www.virtualbox.org/wiki/Downloads</tt></a><br />

<div class="p"><!----></div>
[5] <a href="http://dodger-tools.sourceforge.net/cms/index.php?id=100000005"><tt style="font-size: 1.3em;">http://dodger-tools.sourceforge.net/cms/index.php?id=100000005</tt></a><br />

<div class="p"><!----></div>
            
<table border="1">
<tr><td colspan="1" align="center"><font size="+0"><b>Autoreninformation</b></font></td></tr>
<tr><td align="left"><b>Hauke Goos-Habermann</b>&nbsp;(<a href="http://m23.goos-habermann.de/">Webseite</a>)
arbeitet freiberuflich als Entwickler und Trainer für 
Linux und Open-Source-Software. Er ist zudem Hauptentwickler des 
Softwareverteilungssystems m23 und weiterer OSS sowie Mitorganisator der Kieler 
Open Source und Linux Tage.
</td></tr>
<tr><td align="left">    </td></tr></table>



<div class="p"><!----></div>
            <a href="http://www.freiesmagazin.de/comment/reply/214?edit[subject]=VirtualBox und KVM#comment-form"><i>Diesen Artikel kommentieren</i></a><br /><br />
        <a href="freiesMagazin-2011-02-bilder.html#index">Zum Index</a><br /><hr />

<div class="p"><!----></div>
<h1><font color="#595959"><a name="11_02_kernel-crash-analyse">Kernel-Crash-Analyse unter Linux</a><a name="11_02_kernel-crash-analyse">
</a></font></h1>von Mirko Lindner        
<div class="p"><!----></div>
<b>I</b><b>n einer idealen Welt stürzen weder Systeme noch Applikationen ab.
Da die Welt nun mal weder ideal noch der Mensch in der Lage ist, ab
einer gewissen Komplexität fehlerfreie Programme zu schreiben, hat
wahrscheinlich jeder schon einmal einen Absturz gesehen. Dieser
Artikel zeigt, wie Abstürze des ganzen Systems funktionieren, wie
sie korrekt gehandhabt und wie sie untersucht werden können.</b>

<div class="p"><!----></div>
<b>Redaktioneller Hinweis:</b> <i>Der Artikel „Kernel-Crash-Analyse unter Linux“ erschien erstmals bei Pro-Linux&nbsp;<a href="http://www.pro-linux.de/artikel/2/1470/kernel-crash-analyse-unter-linux.html">[1]</a>.</i>

<div class="p"><!----></div>

<h2>Die graue Theorie</h2>

<div class="p"><!----></div>
Der Linux-Kernel ist zweifelsohne ein solides System. Er ist für
seine Größe stabil, durchaus fehlertolerant und bietet wenig
Möglichkeiten zum Angriff. Doch auch Linux ist von Fehlern nicht
gefeit. Wohl jeder hat schon mal in seinem Leben einen Absturz oder
ein sogenanntes Oops&nbsp;<a href="https://secure.wikimedia.org/wikipedia/en/wiki/Linux_kernel_oops">[2]</a> gesehen.

<div class="p"><!----></div>
Prinzipiell sind Oopses nichts Schlimmes, zeugen sie in der Regel
nur von einem Fehlverhalten eines Subsystems, das so gravierend war,
dass es dem Programmierer wichtig war, den Anwender davon in
Kenntnis zu setzen. Viele solcher Fehler führen weder zum Stillstand
noch zum Absturz des Kernels. Oftmals sind es eher informierende
Ausgaben, die beispielsweise dem Anwender davon berichten, dass ein
bestimmtes System nicht korrekt abgemeldet wurde, während ein
Treiber entladen wurde. Ein Beispiel wären hier diverse
<b><tt style="font-size: 1.3em;">/proc</tt></b>-Einträge, die bei der Abmeldung eines Treibers vergessen wurden.

<div class="p"><!----></div>
Solche Fehler handhabt der Kernel in der Regel, ohne das System
stoppen zu müssen. Sie können mitunter auch oft passieren, ohne dass
ein Anwender etwas davon mitbekommt. Oftmals müssen diverse
Debug-Einstellungen eingeschaltet werden, damit solche Ausgaben
sichtbar sind.

<div class="p"><!----></div>
Viel dramatischer sind Fehler, die zum Stillstand des Systems
führen. Typischerweise sind es NULL-Pointer oder Zugriffe auf
falsche Speicherbereiche im Kernel. Dabei spielt es keine Rolle, ob
solche Zugriffe von Linux selbst oder von einem Treiber durchgeführt
werden – alle Speicherfehler führen zum sofortigen Stillstand des
Systems. Sofort?! Nein, nicht wirklich.

<div class="p"><!----></div>
Auch wenn es den Anschein hat, dass der Kernel nach einem Fehler
abgestürzt ist, ist dem nicht so. Am besten lässt es sich an der
Meldung des Oopses selbst verdeutlichen. Der Oops selbst ist eine
normale Kernel-Funktion, die in der Datei <b><tt style="font-size: 1.3em;">traps.c</tt></b> residiert. Die
beiden für die Anzeige von Oops verantwortlichen Funktionen
<b><tt style="font-size: 1.3em;">dump_stack()</tt></b> und <b><tt style="font-size: 1.3em;">show_trace()</tt></b> sind Funktionen, die regulär verlassen
werden. Die eigentliche Behandlung eines Fehlers nach einem Oops
erfolgt später direkt im Kernel oder im System, das einen Oops
gemeldet hat.

<div class="p"><!----></div>
Ein Beispiel gefällig? Die allseits bekannte Meldung „<em>BUG: unable to
handle kernel NULL pointer dereference</em>“ versteckt sich auf
x86-Systemen in der Funktion <b><tt style="font-size: 1.3em;">vmalloc_fault()</tt></b> und der Datei <b><tt style="font-size: 1.3em;">fault.c</tt></b>.
Doch erst der Aufruf von <b><tt style="font-size: 1.3em;">do_exit(SIGKILL)</tt></b> am Ende von
<b><tt style="font-size: 1.3em;">vmalloc_fault()</tt></b> und eine abschließende Schleife am Ende von
<b><tt style="font-size: 1.3em;">do_exit()</tt></b> oder der Aufruf von <b><tt style="font-size: 1.3em;">panic()</tt></b> versetzen den Kernel in eine
Endlosschleife und machen dem System die Lichter aus. Bis dahin ist
der Kernel durchaus in der Lage, noch zu interagieren und unter
Umständen diverse Systeme herunterzufahren oder gar zu starten.

<div class="p"><!----></div>

<h2>Arten von Kernel-Debugging</h2>

<div class="p"><!----></div>
Ist ein Kernel erst einmal gestoppt, stehen dem Entwickler nur
begrenzt Möglichkeiten zur Verfügung, den Fehler zu untersuchen. Im
Gegensatz zu Applikationen, die im Userspace gestartet werden,
wirken sich Fehler im Kernel sofort auf das komplette System aus. Da
aber der Kernel nach einem Absturz immer noch funktional ist, ist es
durchaus verständlich, dass sich diverse Entwickler Gedanken über
eine Möglichkeit gemacht haben, diese Tatsache für weitere
Untersuchungen zu nutzen.

<div class="p"><!----></div>
Die wohl populärste Möglichkeit, Fehler im Kernel zu untersuchen,
stellt dabei <b><tt style="font-size: 1.3em;">printk()</tt></b> dar. <b><tt style="font-size: 1.3em;">printk()</tt></b> ist nichts anderes als das
Pendant für <b><tt style="font-size: 1.3em;">printf()</tt></b> im Kernel. Es bedarf allerdings wenig
Vorstellungsvermögen, um zu erkennen, dass die Untersuchung von
Fehlern mittels <b><tt style="font-size: 1.3em;">printk()</tt></b> nicht nur Erfahrung in der Programmierung
des Kernels erfordert, sondern auch nur bedingt für eine
Ferndiagnose eingesetzt werden kann. Vor allem komplizierte Probleme
lassen sich mit <b><tt style="font-size: 1.3em;">printk()</tt></b> unter Umständen recht schwer lokalisieren.

<div class="p"><!----></div>
Dies führte zu einer zweiten Möglichkeit – den Oops-Meldungen.
Entgegen des ersten Eindrucks stellen diese Meldungen für einen
Programmierer eine extreme Bereicherung dar. Sie beinhalten oftmals
alle Informationen, die zur Lösung eines Problems benötigt werden.
Der einzige Wermutstropfen ist lediglich, dass sie manchmal von
Anwendern nicht korrekt interpretiert oder bei manchen Fehlerarten
(Schleifen, Deadlocks usw.) nicht ausgegeben werden. Ferner können
zum Beispiel Speicherbereiche so korrumpiert sein, dass auch die
Oops-Meldungen keinen Mehrwert mehr bieten.

<div class="p"><!----></div>
Hier greift nun die dritte Möglichkeit: Debugging. Zwar hat diese
Art der Fehleruntersuchung erst recht spät in den Kernel Einzug
gehalten, doch stellt sie oftmals die einzige Möglichkeit dar,
komplizierte Fehler in einer vertretbaren Zeit zu finden. Das wohl
bekannteste Werkzeug stellt dabei der ursprünglich als Patch
implementierte und seit der Version 2.6.26 im Kernel vorhandene
KGDB&nbsp;<a href="https://secure.wikimedia.org/wikipedia/en/wiki/KGDB">[3]</a> dar.
Das eigentliche Debugging wird dabei mit GDB per
Remote-Protokoll auf einem zweiten System ausgeführt.

<div class="p"><!----></div>
Die wohl ergiebigste Art, Fehler zu untersuchen, stellen allerdings
Crash-Dump-Tools dar. Im Gegensatz zu anderen Ansätzen bedarf es
hier nicht der direkten Mitarbeit des Entwicklers. Ferner beinhalten
Crash-Dumps, sofern sie vollständig sind, alle drei oben genannten
Arten der Diagnose, sodass der Entwickler auf eine schier
unerschöpfliche Fülle an Informationen zurückgreifen kann. Die zwei
bekanntesten Werkzeuge sind dabei kdump und LKCD (Linux Kernel Crash
Dump&nbsp;<a href="http://lkcd.sourceforge.net/">[4]</a>), wobei das letztgenannte bereits
eingestellt wurde.

<div class="p"><!----></div>

<h2>kdump</h2>

<div class="p"><!----></div>
Die Geschichte von Crash-Dumps im Linux-Kernel reicht in das Jahr
1999 zurück. Entgegen der Gepflogenheiten anderer Unix-Systeme
verfügte Linux nicht von Anfang an über eine Einrichtung, die es
ermöglichte, Crash-Dumps zu erstellen. Erst mit einem Patch im Jahre
1999 führte SGI mit dem LKCD (Linux Kernel Crash Dump) einen ersten
Versuch ein, Crash-Dumps zu nutzen. 2002 folgte ein zweiter, von Red
Hat initiierter, unter dem Namen Netdump, gefolgt 2004 von Diskdump.
Doch erst 2006 mit der im Kernel adaptierten kdump-Technologie
konnte Linux Crash-Dumps korrekt handhaben.

<div class="p"><!----></div>
Technisch gesehen besteht kdump&nbsp;<a href="http://lse.sourceforge.net/kdump/">[5]</a>
aus zwei voneinander separierten Bereichen: kexec und kdump. kexec
stellt dabei ein Fastboot-Mechanismus dar, der in der Lage ist,
einen weiteren Kernel zu starten, ohne dass die Hardware zuvor vom
BIOS initialisiert werden musste. Der eigentliche kdump stellt
dagegen den eigentlichen Mechanismus zur Speicherung von Crash-Dumps
dar.

<div class="p"><!----></div>

<h3>Funktionsweise</h3>

<div class="p"><!----></div>
Wirft man einen flüchtigen Blick in die Funktion <b><tt style="font-size: 1.3em;">panic()</tt></b>, so findet
man bereits vor der Abschaltung der SMP-Funktionen einen Aufruf von
<b><tt style="font-size: 1.3em;">crash_kexec()</tt></b>. Die in <b><tt style="font-size: 1.3em;">kexec.c</tt></b> enthaltene Funktion startet wie zuvor
angemerkt aus einem laufenden Kontext einen neuen Kernel. Damit
dieser nicht zuvor benutzte Bereiche überschreibt und möglichst
einen unverfälschten Dump des Systems wiedergeben kann, muss ein
Bereich im Speicher reserviert werden, in den der neue Kernel
kopiert werden kann. Üblicherweise beträgt die Größe des neuen
Speichers um die 128 MB und wird dem Kernel direkt als Bootparameter
übergeben, weshalb der Kernel nach der Installation von kdump neu
gestartet werden muss.

<div class="p"><!----></div>
Angemerkt sei auch, dass der neue Kernel nicht zwangsläufig ein
wirklich neuer sein muss. Alternativ ist kexec auch in der Lage, auf
Systemen, die einen relokierbaren Kernel unterstützen (i386, x86_64,
ppc64 und ia64), denselben Kernel zu nutzen. In diesem Fall ist der
Crash-Kernel derselbe wie der ursprüngliche Kernel.

<div class="p"><!----></div>
Ist der neue Kernel gebootet, startet dieser einen eigenen
Init-Prozess und bindet die in der Konfiguration festgelegte
Partition ein, auf die der Kernel-Dump geschrieben werden soll. Darüber
hinaus wird der kdump-Service gestartet, der wiederum einen Dump des
Systems durchführt. Ist alles erledigt, bleibt das System stehen
oder bootet neu, je nach Konfiguration.

<div class="p"><!----></div>
Der Vorteil dieser Lösung ist ihre Flexibilität und ihre
Anpassbarkeit. Es bedarf weder
Änderungen im Kernel noch neuen
Funktionen, um die Dump-Funktion zu erweitern. Prinzipiell kann
jeder Anwender seine Dumps zusammenstellen und erweitern. Durch die
Nutzung eines separaten Kernel-Prozesses ist zudem immer sichergestellt,
dass das System zum Zeitpunkt der Generierung des
Crash-Dumps nicht korrumpiert war. Ferner lassen sich so auch
potentielle Probleme lösen, die unter Umständen dazu führen könnten,
dass der Dump beim Speichern auf das Dateisystem beschädigt werden
könnte.

<div class="p"><!----></div>
<img border="0" src="freiesMagazin-2011-02-bilder-Dateien/kernel-kdump-opensuse.png" /><br /><em>Grafische kdump-Konfiguration in openSUSE 11.3.</em><br />

<div class="p"><!----></div>

<h3>Installation</h3>

<div class="p"><!----></div>
Die Installation des Systems beschränkt sich in den meisten
Distributionen auf die Installation
des Pakets <b><tt style="font-size: 1.3em;">kexec-tools</tt></b>.
Alternativ, wie im Falle von Red Hat Enterprise Linux oder openSUSE,
können noch Management-Tools installiert werden.

<div class="p"><!----></div>
Anwender, die lieber ihre eigenen Versionen der Tools installieren
möchten, können es alternativ selbst kompilieren. Der Download ist
von der Seite des Projektes möglich. Die Installation ist dabei recht
unkompliziert:

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
$&nbsp;./configure
$&nbsp;make
#&nbsp;make&nbsp;install
</pre>

<div class="p"><!----></div>
 
<div class="p"><!----></div>
Ist die Applikation installiert, bedarf es der eigentlichen
Konfiguration. Wie bereits erwähnt bringen diverse Distributoren
bereits von Haus aus diverse grafische Werkzeuge mit, die die
Einrichtung des Systems erleichtern. Der Umfang und die
Funktionalität der Tools orientiert sich dabei maßgeblich am Umfang
der kdump-Funktionalität, die vom Distributor erstellt wurde.
Während beispielsweise RHEL&nbsp;5 nur marginale Änderungen ermöglicht,
erlaubt das in Yast eingebundene Programm weitaus mehr Funktionen und
Einstellungen.

<div class="p"><!----></div>
Anwender, die kdump aus den Quellen installiert haben, haben
freilich die Qual der Wahl, da sie faktisch sowieso alles selbst
einstellen müssen – angefangen von der Kernelkonfiguration über die
Konfiguration bis hin zur Anpassung des Systems. Ausführliche
Informationen zu den Kerneloptionen entnehmen Interessenten aufgrund
der Anzahl der Parameter direkt der Dokumentation&nbsp;<a href="http://www.mjmwired.net/kernel/Documentation/kdump/">[6]</a>.
Wichtig ist hier vor allem die Festlegung des Speichers mittels des
Bootparameters <b><tt style="font-size: 1.3em;">crashkernel</tt></b>. Der Parameter variiert von Architektur
zu Architektur und kann ebenso der Dokumentation entnommen werden.

<div class="p"><!----></div>
Ist der neue Kernel erstellt und das System zwecks der
Initialisierung des neuen Speicherbereiches neu gestartet, kann das
Laden des neuen Kernels beginnen. Dies geschieht in der Regel im
Service kdump:

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
#&nbsp;/etc/init.d/kdump&nbsp;start
</pre>

<div class="p"><!----></div>
 
<div class="p"><!----></div>
Vereinfacht gesagt, initialisiert das Programm den neuen Crash-Kernel
mittels der Userland-Anwendung kexec. Die Parameter variieren dabei
von Distribution zur Distribution und hängen von der Implementierung
ab. Der grundsätzliche Aufruf sieht allerdings wie folgt aus:

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
#&nbsp;kexec&nbsp;-p&nbsp;&lt;dump-capture-kernel-vmlinux-image&#62;&nbsp;--initrd=&lt;initrd-for-dump-capture-kernel--args-linux&#62;&nbsp;--append="root=&lt;root-dev&lt;arch-specific-options&#62;"
</pre>

<div class="p"><!----></div>
 
<div class="p"><!----></div>
Die Überprüfung, ob ein Crash-Dump-Kernel geladen wurde, kann
mittels des Kommandos

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
#&nbsp;cat&nbsp;/sys/kernel/kexec_crash_loaded
</pre>

<div class="p"><!----></div>
 
<div class="p"><!----></div>
erfolgen. Ist ein Kernel geladen, gibt das Kommando den Wert <b><tt style="font-size: 1.3em;">1</tt></b> zurück.

<div class="p"><!----></div>

<h3>Test</h3>

<div class="p"><!----></div>
Wie eingangs beschrieben, ist kexec in der Lage, direkt aus einem
laufenden Kernel einen neuen Kernel zu starten. Was liegt also
näher, die Funktion zu testen und den Crash-Kernel zu booten? Dazu
reicht es, einfach einen neuen Kernel in den reservierten Speicher
zu laden. Auf x86-Systemen kann es in der Regel der bereits laufende
sein:

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
#&nbsp;kexec&nbsp;-l&nbsp;/boot/vmlinuz-image&nbsp;--initrd=/boot/initrd-image.img&nbsp;--command-line="`cat&nbsp;/proc/cmdline`"
</pre>

<div class="p"><!----></div>
 
<div class="p"><!----></div>
Die Überprüfung erfolgt diesmal mit

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
cat&nbsp;/sys/kernel/kexec_loaded
</pre>

<div class="p"><!----></div>
 
<div class="p"><!----></div>
da man mittels des Parameters <b><tt style="font-size: 1.3em;">-l</tt></b> nicht einen Panic-, sondern einen Load-Kernel geladen hat. Liefert die Zeile den Wert <b><tt style="font-size: 1.3em;">1</tt></b>, kann das System mittels

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
#&nbsp;reboot
</pre>

<div class="p"><!----></div>
 
<div class="p"><!----></div>
beendet werden. Die Besonderheit dabei: Wird der aktuelle Kernel beendet, sollte ohne einen einzigen BIOS-Zugriff sofort der neue Kernel gestartet werden.

<div class="p"><!----></div>

<h3>Der Crash</h3>

<div class="p"><!----></div>
Nun ist es an der Zeit, die Neueinrichtung in Aktion zu erleben.
Eine simple Möglichkeit, einen Fehler bzw. einen Absturz des Systems
zu verursachen, ist das Auslösen eines SysRQ mittels einer
geeigneten Tastenkombination oder mittels des Kommandos:

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
#&nbsp;echo&nbsp;"c"&nbsp;/proc/sysrq-trigger
</pre>

<div class="p"><!----></div>
 
<div class="p"><!----></div>
Man sollte jetzt einen sofortigen Stillstand des Systems beobachten
mit einem anschließenden Booten eines neuen Kernels. Einige Minuten
später sollte sich das System beenden und ihre normale Umgebung
wieder erscheinen. In
dem Crash-Dump-Verzeichnis sollte sich nun
eine neue Datei mit dem Namen <b><tt style="font-size: 1.3em;">vmcore</tt></b> befinden:

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
#&nbsp;ls&nbsp;-l&nbsp;/var/crash/*/vmcore
</pre>

<div class="p"><!----></div>
 
<div class="p"><!----></div>
<img border="0" src="freiesMagazin-2011-02-bilder-Dateien/kernel-kdump-rhel.png" /><br /><em>Das grafische Konfigurationstool für kdump in RHEL 5.</em><br />

<div class="p"><!----></div>

<h2>Analyse mittels gdb</h2>

<div class="p"><!----></div>
Die generierte Crash-Datei kann mit den Standardprogrammen unter Linux
untersucht werden. Als Voraussetzung dafür gilt allerdings die
Installation der entsprechenden Debug-Pakete des Kernels. Der Name
und die Verfügbarkeit ist je nach Distribution unterschiedlich. So
heißen beispielsweise die Pakete unter RHEL&nbsp;5.4 <b><tt style="font-size: 1.3em;">kernel-debug</tt></b> und
<b><tt style="font-size: 1.3em;">kernel-debuginfo</tt></b>. Sie sind nicht in der Standarddistribution
enthalten und müssen separat aus dem <b><tt style="font-size: 1.3em;">debuginfo</tt></b>-Verzeichnis der
Distribution heruntergeladen werden. Unter openSUSE 11.3 heißt der
Kernel dagegen <b><tt style="font-size: 1.3em;">kernel-&lt;type&#62;-debuginfo</tt></b>. Wichtig ist in allen Fällen,
dass die Version der Debug-Informationen zum laufenden Kernel passt.

<div class="p"><!----></div>
        Sind die Pakete und ihre Abhängigkeiten installiert, kann es an die eigentliche Untersuchung
gehen. Im Falle von RHEL dürfte das Kommando wie folgt aussehen:

<div class="p"><!----></div>
    
<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
#&nbsp;gdb&nbsp;/usr/lib/debug/lib/modules/&lt;kernel&#62;/vmlinux&nbsp;vmcore
</pre>

<div class="p"><!----></div>
 
<div class="p"><!----></div>
Wichtig ist, dass dem Programm neben der korrekten
Crash-Datei auch die dazugehörende
Kernel-Objektdatei
übergeben wird. Unter openSUSE sehen die Parameter wie folgt aus:

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
#&nbsp;gdb&nbsp;/usr/lib/debug/boot/&lt;kernel&#62;.debug&nbsp;vmcore
</pre>

<div class="p"><!----></div>
 
<div class="p"><!----></div>
    Alternativ können anstelle von gdb auch artverwandte Programme wie
gdbtui&nbsp;<a href="http://www.gnu.org/software/gdb/">[7]</a> oder
ddd&nbsp;<a href="http://www.gnu.org/software/ddd/">[8]</a> eingesetzt werden. Die
Parameter unterscheiden sich in der Standarddistribution nicht. So
kann beispielsweise der grafische Debugger ddd mit denselben
Optionen wie gdb gestartet werden.

<div class="p"><!----></div>

<div class="p"><!----></div>
<img border="0" src="freiesMagazin-2011-02-bilder-Dateien/kernel-gdb-frontend-ddd.png" /><br /><em>Untersuchung eines Kernelproblems mittels des grafischen gdb-Frontends ddd.</em><br />

<div class="p"><!----></div>

<h2>Analyse mit crash</h2>

<div class="p"><!----></div>
Mag gdb noch so mächtig sein, liegen seine Einsatzbereiche nicht
unbedingt in der Untersuchung von Kernelproblemen. Oftmals ist
neben dem eigentlichen Code auch die Umgebung oder der Status des
Systems von besonderer Bedeutung für die Lösung eines
Kernelproblems. Oft führen Fehler in einem Subsystem zu
Fehlern in einem anderen, beispielsweise Speicherprobleme, in denen
Module ihnen nicht zugewiesenen Speicher überschreiben.

<div class="p"><!----></div>
    Die Crash-Datei enthält noch weit mehr Informationen. Neben dem Abbild
des Speichers sind in der Datei auch Log-Informationen, Prozessdaten,
Interrupts und Dateisysteminformationen enthalten. Diese ganzen Informationen sollen nur dem einen
Zweck dienen – der schnellen Untersuchung und Korrektur von Fehlern 
im Kernel oder einem Subystem. 

    

<div class="p"><!----></div>
Sichtbar gemacht werden können die Crash-Informationen mittels des
Werkzeugs crash&nbsp;<a href="http://people.redhat.com/anderson/crash_whitepaper/">[9]</a>.
Crash erlaubt nicht nur, den Status des Systems während, sondern
auch nach einem Crash zu untersuchen. Dabei kommt das Programm mit
zahlreichen Crash-Formaten klar. Unter anderem vermag es Dumps von
netdump, diskdump, kdump oder xendump darzustellen. Die Grundlagen
von crash liegen dabei im crash-Kommando von System System V Release
4 (SVR4), das allerdings nicht nur auf Linux portiert, sondern auch
massiv angepasst wurde. Die wohl größte Änderung gegenüber dem
Original stellt die Integration des gdb dar. So ist es mittels crash
möglich, die Techniken des Urwerkzeugs und die des Quellcode-Debuggers
gemeinsam zu nutzen.

<div class="p"><!----></div>
Der Aufruf von crash gleicht dem von gdb. So lässt sich das Programm
unter RHEL beispielsweise mittels folgenden Kommandos ausführen:

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
#&nbsp;crash&nbsp;/usr/lib/debug/lib/modules/&lt;kernel&#62;/vmlinux&nbsp;vmcore
</pre>

<div class="p"><!----></div>
 
<div class="p"><!----></div>
<img border="0" src="freiesMagazin-2011-02-bilder-Dateien/kernel-crash.png" /><br /><em>Informationen des Programms crash samt Kernel-Stacktrace.</em><br />

<div class="p"><!----></div>

<h3>Arbeiten mit crash</h3>

<div class="p"><!----></div>
Streng genommen verfügt crash über vier verschiedene Arten von
Kommandos. Zum einen enthält es Befehle, die Kerneldaten oder Text
darstellen. Die wohl wichtigsten davon sind 
<b><tt style="font-size: 1.3em;">struct</tt></b> und <b><tt style="font-size: 1.3em;">union</tt></b>
gepaart mit <b><tt style="font-size: 1.3em;">*</tt></b>, die Kernel-Datentypen darstellen. Ferner
unterstützt crash auch die Anzeige von Kernel-Variablen mittels <b><tt style="font-size: 1.3em;">p</tt></b>
und von Symbolen mittels <b><tt style="font-size: 1.3em;">whatis</tt></b>. Das Kommando <b><tt style="font-size: 1.3em;">sym</tt></b> übersetzt
dagegen einen Symbolnamen in eine virtuelle Adresse, dagegen disassembliert
<b><tt style="font-size: 1.3em;">dis</tt></b> eine Kernel-Funktion.

<div class="p"><!----></div>
Der zweite Bereich von crash umfasst zahlreiche Werkzeuge, die sich dem
Status des Systems widmen. Neben <b><tt style="font-size: 1.3em;">bt</tt></b>, das einen Kernel-Stack
anzeigt und damit wohl das erste Kommando einer jeder Untersuchung
darstellt, bietet es auch Kommandos zur Anzeige von Geräten,
Dateien, Benutzerinformationen, 

Prozessor- und Prozessdaten, Mount-
und Netzwerk-Optionen oder Speicherdaten. Im Grunde genommen
existieren nur wenige Bereiche, die sich dem Programm entziehen können.
So können beispielsweise mittels der Kommandos <b><tt style="font-size: 1.3em;">dmesg</tt></b> oder <b><tt style="font-size: 1.3em;">log</tt></b> im
Klartext die Loginformationen des Systems oder mittels <b><tt style="font-size: 1.3em;">ps</tt></b> der
Prozessbaum angezeigt werden.

<div class="p"><!----></div>
    Der dritte Bereich von crash beinhaltet Werkzeuge, die eine
Untersuchung erleichtern sollen. So können beispielsweise mittels
<b><tt style="font-size: 1.3em;">btop</tt></b> physikalische Adressen in Page-Nummern oder mittels <b><tt style="font-size: 1.3em;">ascii</tt></b>
numerische Werte in ASCII-Komponenten umgewandelt werden. Als
besonders mächtig erweist sich hier das <b><tt style="font-size: 1.3em;">wr</tt></b>-Kommando, das in der
Lage ist, in einem laufenden System Speicherbereiche zu ändern.
Voraussetzung hierfür ist allerdings ein Schreibzugriff auf
<b><tt style="font-size: 1.3em;">/dev/mem</tt></b>. In einem Crash-Dump ist das Kommando selbstverständlich
sinn- und funktionslos.

<div class="p"><!----></div>
Schlussendlich bietet crash auch viele Kommandos zur Session-Kontrolle. <b><tt style="font-size: 1.3em;">alias</tt></b> definiert Aliase, <b><tt style="font-size: 1.3em;">q</tt></b> oder <b><tt style="font-size: 1.3em;">exit</tt></b> beenden die Anwendung.

<div class="p"><!----></div>
    
<h2>Fazit</h2>

<div class="p"><!----></div>
Wie bei allen Fehlern kann auch unter Linux keine Garantie für eine
fehlerfreie Funktionsweise eines Crash-Dumps gegeben werden.
Betrachtet man den Umstand, dass ein Dump durch einen fatalen Fehler
erzeugt wurde, besteht immer noch die Möglichkeit, dass die im
Abbild enthaltenen Daten keine Rückschlüsse auf die Quelle des
Problems zulassen.

<div class="p"><!----></div>
Doch trotz allem sind Crash-Dumps, sei es bei Applikationen oder im
Kernel, eine wertvolle Quelle, um Probleme schnell zu identifizieren
und zu lösen. Die Wahrscheinlichkeit, einen Fehler mittels einer
Crash-Dump-Analyse im Kernel wenigstens einzugrenzen, ist ungleich
höher als durch eine Beschreibung. Denn die meisten Fehler des
Kernels oder eines Treibers geschehen nicht durch ein systematisches
Problem, sondern durch ein Fehlverhalten eines Subsystems, ein
Timingproblem oder schlicht Defekte

in der Hardware. Diese lokal zu
reproduzieren ist für einen Entwickler, der womöglich an einem
Treiber nur in seiner Freizeit schreibt, schier unmöglich.

<div class="p"><!----></div>
    <font color="#595959"><font size="+1">Links</font></font><br />
        
[1] <a href="http://www.pro-linux.de/artikel/2/1470/kernel-crash-analyse-unter-linux.html"><tt style="font-size: 1.3em;">http://www.pro-linux.de/artikel/2/1470/kernel-crash-analyse-unter-linux.html</tt></a><br />

<div class="p"><!----></div>
[2] <a href="https://secure.wikimedia.org/wikipedia/en/wiki/Linux_kernel_oops"><tt style="font-size: 1.3em;">https://secure.wikimedia.org/wikipedia/en/wiki/Linux_kernel_oops</tt></a><br />

<div class="p"><!----></div>
[3] <a href="https://secure.wikimedia.org/wikipedia/en/wiki/KGDB"><tt style="font-size: 1.3em;">https://secure.wikimedia.org/wikipedia/en/wiki/KGDB</tt></a><br />

<div class="p"><!----></div>
[4] <a href="http://lkcd.sourceforge.net/"><tt style="font-size: 1.3em;">http://lkcd.sourceforge.net/</tt></a><br />

<div class="p"><!----></div>
[5] <a href="http://lse.sourceforge.net/kdump/"><tt style="font-size: 1.3em;">http://lse.sourceforge.net/kdump/</tt></a><br />

<div class="p"><!----></div>
[6] <a href="http://www.mjmwired.net/kernel/Documentation/kdump/"><tt style="font-size: 1.3em;">http://www.mjmwired.net/kernel/Documentation/kdump/</tt></a><br />

<div class="p"><!----></div>
[7] <a href="http://www.gnu.org/software/gdb/"><tt style="font-size: 1.3em;">http://www.gnu.org/software/gdb/</tt></a><br />

<div class="p"><!----></div>
[8] <a href="http://www.gnu.org/software/ddd/"><tt style="font-size: 1.3em;">http://www.gnu.org/software/ddd/</tt></a><br />

<div class="p"><!----></div>
[9] <a href="http://people.redhat.com/anderson/crash_whitepaper/"><tt style="font-size: 1.3em;">http://people.redhat.com/anderson/crash_whitepaper/</tt></a><br />

<div class="p"><!----></div>
            
<table border="1">
<tr><td colspan="1" align="center"><font size="+0"><b>Autoreninformation</b></font></td></tr>
<tr><td align="left"><b>Mirko Lindner</b>&nbsp;(<a href="http://www.pro-linux.de/">Webseite</a>)
befasst sich seit 1990 mit Unix. Seit 1998 ist er
aktiv in die Entwicklung des Kernels eingebunden und verantwortlich
für diverse Treiber und Subsysteme für Linux und andere freie
Plattformen. Daneben ist er einer der Betreiber von Pro-Linux.de.
</td></tr>
<tr><td align="left">    </td></tr></table>



<div class="p"><!----></div>
            <a href="http://www.freiesmagazin.de/comment/reply/214?edit[subject]=Kernel-Crash-Analyse#comment-form"><i>Diesen Artikel kommentieren</i></a><br /><br />
        <a href="freiesMagazin-2011-02-bilder.html#index">Zum Index</a><br /><hr />

<div class="p"><!----></div>
<h1><font color="#595959"><a name="11_02_kernel">Der Januar im Kernelrückblick</a><a name="11_02_kernel">
</a></font></h1>von Mathias Menzer        <b>B</b><b>asis aller Distributionen ist der Linux-Kernel, der
fortwährend weiterentwickelt wird. Welche Geräte in einem halben
Jahr unterstützt werden und welche Funktionen neu hinzukommen,
erfährt man, wenn man den aktuellen Entwickler-Kernel im Auge
behält.</b>

<div class="p"><!----></div>

<div class="p"><!----></div>

<h2>Kernel 2.6.37</h2>
Das Jahr 2010 beendete Torvalds noch mit einer letzten Vorabversion&nbsp;<a href="http://lkml.org/lkml/2010/12/28/196">[1]</a>, die dem Treiber iwlwifi die Nutzung aktueller EEPROM auf Intels WLAN-Chipsätzen ermöglicht. Dazu kam noch eine Änderung am Treiber der für den Einsatz in Smartphones vorgesehenen System-on-a-Chip-Plattform S5Pv310, der nun alle zur Verfügung stehenden Register des System auch verwenden kann. All dem gab man noch ein paar Tage Zeit,
bevor dann nach 77 Tagen Entwicklungszeit Linux 2.6.37 veröffentlicht wurde&nbsp;<a href="http://lkml.org/lkml/2011/1/4/266">[2]</a>.

<div class="p"><!----></div>
Alles in allem fällt der jüngste Spross der Kernelreihe nicht unbedingt durch neue Jubelfunktionen ins Auge. Dafür wurde jedoch an bereits eingeführten Treibern und Funktionen gearbeitet, um sie zu verbessern.
Einer der größeren Stachel im Fleisch der Kernelentwickler, der veraltete Big Kernel Lock (BKL), konnte nun aus den Kernbereichen des Kernels so weit entfernt werden, dass das Kompilieren von 2.6.37 ohne BKL-Unterstützung grundsätzlich möglich ist. Leider kommt dieser Locking-Mechnismus nach wie vor in einigen Subsystemen zur Anwendung, sodass manche Treiber ohne BKL den Dienst verweigern.

<div class="p"><!----></div>
Einiges hat sich im Bereich der Dateisysteme getan. Den Beginn macht hier Ext4, dem in Sachen Skalierbarkeit, also der Fähigkeit, sich an steigende Zahl und Leistungsfähigkeit von Prozessorkernen anzupassen, etwas Neues beigebracht wurde. So wird nun direkt mit der BIO-Schicht (Block-I/O) des Kernels kommuniziert, der bislang genutzte „Buffer Layer“ brachte zu viele Probleme mit der Leistungsfähigkeit und Skalierbarkeit mit sich. In einem Testszenario konnte eine Steigerung der Leistung von Ext4 um 300&nbsp;% erreicht werden, während die Prozessornutzung um den Faktor 3 zurückging. Das Erstellen neuer Ext4-Partitionen wird nun erheblich schneller ablaufen als bislang gewohnt, da die Initialisierung der Inode-Tabelle, mit der der Ablageplatz einzelner Dateien auf der Partition gespeichert wird, nicht beim Erzeugen der Partition erfolgt, sondern erst beim ersten Einhängen in das System. Verschiedene Änderungen an XFS sollen auch hier die Leistung verbessern, weitere werden für 2.6.38 erwartet.

<div class="p"><!----></div>
RBD (Rados Block Device) ist die Bezeichnung eines Treibers, mit dem sich blockorientierte Geräte anlegen lassen, die ihre Daten aus dem verteilten Netzwerk-Dateisystem Ceph beziehen. Bislang stand für den Zugriff auf Ceph nur ein auf FUSE (File System in Userspace) aufsetzender Treiber zur Verfügung. RBD unterstützt

Read-Only-Schnappschüsse und es gibt auch Patches für Qemu&nbsp;<a href="http://de.wikipedia.org/wiki/Qemu">[3]</a>, mittels derer sich Block Devices für Virtuelle Maschinen in einem Ceph Cluster ablegen lassen. Das Thema Locking wurde auch bei Btrfs angegangen, ein anderer Locking-Mechanismus soll weniger aggressiv Zugriffe auf Bereiche des Dateisystems sperren und damit die Leitung verbessern. Einen positive Auswirkung auf die Leistungsfähigkeit des Dateisystems verspricht man sich davon, dass Btrfs nun freigegebene Bereiche in einer Liste auf dem Datenträger ablegt. Die Suche nach nicht zugewiesenen Blöcken soll damit in den meisten Fällen überflüssig werden, das Schreiben neuer Daten wird damit beschleunigt. Ebenso beschleunigt wurde das Erstellen von Schnappschüssen des Dateisystems, indem diese jetzt asynchron angelegt werden, also noch während Zugriffe erfolgen.

<div class="p"><!----></div>
Wird das System in den Ruhezustand geschickt, komprimiert 2.6.37 das zu speichernde Abbild des Hauptspeichers mittels LZO&nbsp;<a href="http://de.wikipedia.org/wiki/Lempel-Ziv-Oberhumer">[4]</a>, einem Verfahren, das als besonders schnell angesehen wird, und spart dadurch Zeit beim Übertragen auf den Datenträger, wodurch wiederum das Einschlafen und Wiederaufwachen des Systems weniger Zeit in Anspruch nehmen soll. Auch können Treiber nun ein Veto einlegen, wenn die von ihnen kontrollierten Geräte in den Schlafmodus geschickt werden, indem der Treiber sie für einige Zeit als inaktiv markiert. 

<div class="p"><!----></div>
Zum Schluss wurde das in 2.6.36 eingeführte Fanotify in der Standardkonfiguration aktiviert. Das System, das Prozesse über Änderungen am Dateisystem benachrichtigt, hatte mit Unklarheiten bezüglich seiner Schnittstelle zu kämpfen, die mittlerweile jedoch ausgeräumt wurden.

<div class="p"><!----></div>

<h2>Kernel 2.6.38</h2>
Nach 14 Tagen ließ Torvalds das Merge Window wieder zufallen und veröffentlichte die erste Vorabversion von 2.6.38&nbsp;<a href="http://lkml.org/lkml/2011/1/18/322">[5]</a>. Mit im Boot war auch der Patch für die Einführung der automatischen Task-Gruppen (siehe „Der November im Kernelrückblick; neue Wege für das Scheduling“, <b><font color="#595959">freies</font></b><font color="#FF630A">Magazin</font> 12/2010&nbsp;<a href="http://www.freiesmagazin.de/freiesMagazin-2010-12">[6]</a>), die von Torvalds bereits im Vorfeld ausdrücklich gelobt worden waren und die insbesondere Desktop-Anwendern zugute kommen werden. 

<div class="p"><!----></div>
Locking-Mechanismen haben es dieser Tage nicht leicht. Hatte BKL bislang den Löwenanteil an Aufmerksamkeit auf sich gezogen, geht es jetzt dem weniger verbreiteten dcache_lock an den Kragen. Dieser kommt bislang unter anderem in der Dateisystem-Abstraktionsschicht VFS&nbsp;<a href="http://de.wikipedia.org/wiki/Virtuelles_Dateisystem">[7]</a> zum Einsatz und zog damit unlängst den Blick von Nick Piggin auf sich. Er rückt dem Problem mit einer ganzen Reihe an Patches zu Leibe, mit denen er zuerst die Änderungen vorbereitete und dann die neuen Locking-Mechanismen einführte, bevor dcache ersetzt werden konnte.

<div class="p"><!----></div>
Auf der Treiber-Seite wurde AMDs Fusion-Architektur bedacht, in der CPU und Grafikkern zusammengeführt werden. Weitere Updates am Direct Rendering Manager liefern Unterstützung für die Fermi-Grafikbeschleunigung von NVIDIA.

<div class="p"><!----></div>
2.6.38-rc2&nbsp;<a href="http://lkml.org/lkml/2011/1/21/530">[8]</a> und -rc3&nbsp;<a href="http://lkml.org/lkml/2011/1/31/547">[9]</a> umrahmten zeitlich die australische Linux-Konferenz&nbsp;<a href="http://lca2011.linux.org.au/">[10]</a>; sie wurden vor Beginn und nach Ende des Treffens veröffentlicht. Die beiden Vorabversionen waren geprägt von Aufräumarbeiten im Bereich der zeichenorientierten Geräte, wo wieder zwei Treiber (hvc und serial) umziehen mussten. Die größte Änderung auf der Treiberseite war die Unterstützung für eine neue PCMCIA-Karte zur Anbindung eines CAN-BUS&nbsp;<a href="http://de.wikipedia.org/wiki/Controller_Area_Network">[11]</a>, ein auf speziell für die Kommunikation von Sensoren und Steuergeräten in Fahrzeugen ausgerichtetes System.

<div class="p"><!----></div>

<div class="p"><!----></div>

    <br /><table align="left" border="1"><tr><td width="0" align="center">

<div style="background: #D8F2FF;">
<b>Kurz erläutert: „Locking“</b><br />
Als Locking bezeichnet man eine Methode, die zeitgleiche Zugriffe auf ein Gerät oder einen Speicherplatz verhindert. Dabei errichtet der erste Prozess, der die Ressource nutzt, eine Sperre (englisch: Lock); alle anderen Prozesse müssen warten, bis sie wieder freigegeben wurde. Ältere Locking-Mechanismen zeigen sich häufig sehr gierig und sperren größere Adressräume als notwendig, wodurch andere Prozesse beim Zugriff gegebenenfalls warten müssen und damit ausgebremst werden. Die Bestrebungen laufen derzeit dahin, dass Prozesse nur den wirklich benötigten Teil einer Ressource sperren, zum Beispiel nur einen kleinen Zweig einer Struktur anstelle des ganzen Baumes. Dabei verhindert ein Read-Lock das Bearbeiten der Ressource, erlaubt jedoch anderen Prozessen ebenfalls das Lesen und wehrt nur Versuche zum Bearbeiten ab. Ein Write-Lock dagegen unterbindet auch Lesezugriffe, bis dass die Änderungen vollständig sind und der Lock entfernt wurde.

<div class="p"><!----></div>
Locking kommt sowohl bei Zugriffen auf den Arbeitsspeicher als auch bei der Nutzung von Geräten, sowohl physikalischen als auch virtuellen, wie z.&nbsp;B. Treibern für Blockgeräte oder Dateisysteme, zum Einsatz.

<div class="p"><!----></div>
    </div></td></tr></table><!--hbox-->
<br />
<div class="p"><!----></div>
    <font color="#595959"><font size="+1">Links</font></font><br />
        
[1] <a href="http://lkml.org/lkml/2010/12/28/196"><tt style="font-size: 1.3em;">http://lkml.org/lkml/2010/12/28/196</tt></a><br />

<div class="p"><!----></div>
[2] <a href="http://lkml.org/lkml/2011/1/4/266"><tt style="font-size: 1.3em;">http://lkml.org/lkml/2011/1/4/266</tt></a><br />

<div class="p"><!----></div>
[3] <a href="http://de.wikipedia.org/wiki/Qemu"><tt style="font-size: 1.3em;">http://de.wikipedia.org/wiki/Qemu</tt></a><br />

<div class="p"><!----></div>
[4] <a href="http://de.wikipedia.org/wiki/Lempel-Ziv-Oberhumer"><tt style="font-size: 1.3em;">http://de.wikipedia.org/wiki/Lempel-Ziv-Oberhumer</tt></a><br />

<div class="p"><!----></div>
[5] <a href="http://lkml.org/lkml/2011/1/18/322"><tt style="font-size: 1.3em;">http://lkml.org/lkml/2011/1/18/322</tt></a><br />

<div class="p"><!----></div>
[6] <a href="http://www.freiesmagazin.de/freiesMagazin-2010-12"><tt style="font-size: 1.3em;">http://www.freiesmagazin.de/freiesMagazin-2010-12</tt></a><br />

<div class="p"><!----></div>
[7] <a href="http://de.wikipedia.org/wiki/Virtuelles_Dateisystem"><tt style="font-size: 1.3em;">http://de.wikipedia.org/wiki/Virtuelles_Dateisystem</tt></a><br />

<div class="p"><!----></div>
[8] <a href="http://lkml.org/lkml/2011/1/21/530"><tt style="font-size: 1.3em;">http://lkml.org/lkml/2011/1/21/530</tt></a><br />

<div class="p"><!----></div>
[9] <a href="http://lkml.org/lkml/2011/1/31/547"><tt style="font-size: 1.3em;">http://lkml.org/lkml/2011/1/31/547</tt></a><br />

<div class="p"><!----></div>
[10] <a href="http://lca2011.linux.org.au/"><tt style="font-size: 1.3em;">http://lca2011.linux.org.au/</tt></a><br />

<div class="p"><!----></div>
[11] <a href="http://de.wikipedia.org/wiki/Controller_Area_Network"><tt style="font-size: 1.3em;">http://de.wikipedia.org/wiki/Controller_Area_Network</tt></a><br />

<div class="p"><!----></div>
    
<div class="p"><!----></div>
        
<table border="1">
<tr><td colspan="1" align="center"><font size="+0"><b>Autoreninformation</b></font></td></tr>
<tr><td align="left"><b>Mathias Menzer</b>
wirft gerne einen Blick auf die Kernel-Entwicklung, um mehr über die
Funktion von Linux zu erfahren und um seine Mitmenschen mit seltsamen
Begriffen und unverständlichen Abkürzungen verwirren zu können.
</td></tr>
<tr><td align="left">    </td></tr></table>



<div class="p"><!----></div>
            <a href="http://www.freiesmagazin.de/comment/reply/214?edit[subject]=Der Januar im Kernelr%C3%BCckblick#comment-form"><i>Diesen Artikel kommentieren</i></a><br /><br />
        <a href="freiesMagazin-2011-02-bilder.html#index">Zum Index</a><br /><hr />

<div class="p"><!----></div>
            

<div class="p"><!----></div>

<div class="p"><!----></div>
<h1><font color="#595959"><a name="11_02_python5">Python – Teil 5: In medias res</a><a name="11_02_python5">
</a></font></h1>von Daniel Nögel        <b>I</b><b>m vorherigen Teil dieser Einführung (siehe <b><font color="#595959">freies</font></b><font color="#FF630A">Magazin</font>
01/2011&nbsp;<a href="http://www.freiesmagazin.de/freiesMagazin-2011-01">[1]</a>)
wurden Klassen besprochen. Mit diesem Teil soll nun ein Einstieg in
die praktische Programmierung in Angriff genommen werden. Zunächst
wird dazu aber noch auf die Fehlerbehandlung in Python eingegangen.</b>

<div class="p"><!----></div>

<h2>Fehlerbehandlung</h2>

<div class="p"><!----></div>
Fehler werden in Python „Exceptions“ oder „Ausnahmen“ genannt. Sie
treten beispielsweise auf, wenn eine Datei nicht geöffnet werden
kann, ein Schlüssel einer Liste abgefragt wird, der gar nicht
existiert oder auf Variablen zugegriffen wird, die noch nicht
bekannt sind. Tritt ein Fehler auf, wird das Skript sofort beendet; in der Konsole erscheint eine Fehlermeldung:

<div class="p"><!----></div>

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
&#62;&#62;&#62;&nbsp;names&nbsp;=&nbsp;[u"Peter",&nbsp;u"Isabell"]
&#62;&#62;&#62;&nbsp;names.remove(u"Karla")
Traceback&nbsp;(most&nbsp;recent&nbsp;call&nbsp;last):
&nbsp;&nbsp;File&nbsp;"&lt;stdin&#62;",&nbsp;line&nbsp;1,&nbsp;in&nbsp;&lt;module&#62;
ValueError:&nbsp;list.remove(x):&nbsp;x&nbsp;not&nbsp;in&nbsp;list
</pre>

<div class="p"><!----></div>

<div class="p"><!----></div>
In diesem Beispiel wird zunächst eine Liste mit Namen definiert.
Beim Versuch, den Eintrag <b><tt style="font-size: 1.3em;">Karla</tt></b> zu entfernen, tritt ein Fehler auf,
da dieser Eintrag sich gar nicht in der Liste befindet. Um diese
spezielle Situation exakt zu erfassen, wirft Python eine Ausnahme
vom Typ <b><tt style="font-size: 1.3em;">ValueError</tt></b>. Python kennt bereits in seiner
Standardbibliothek viele Typen von Fehlern&nbsp;<a href="http://docs.python.org/library/exceptions.html">[2]</a>.
Zusätzlich gibt Python noch die Zeilennummer und eine kurze
Fehlerbeschreibung aus.

<div class="p"><!----></div>
Nun ist es in den meisten Fällen nicht erwünscht, dass das Programm
einfach endet und eine kryptische Fehlermeldung
ausgibt. Daher ist es möglich, Stellen, an denen Fehler auftreten
können, mit folgender Syntax zu umgeben:

<div class="p"><!----></div>

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
try:
&nbsp;&nbsp;&nbsp;&nbsp;names.remove(u"Karla")
except&nbsp;ValueError:
&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;"Eintrag&nbsp;nicht&nbsp;in&nbsp;der&nbsp;Liste"
</pre>

<div class="p"><!----></div>
   Bei dem Versuch, die Anweisung in Zeile 2 auszuführen, wird wie oben
auch ein <b><tt style="font-size: 1.3em;">ValueError</tt></b> ausgelöst. Statt aber das Programm abzubrechen,
überprüft der Interpreter, ob einer der <b><tt style="font-size: 1.3em;">except</tt></b>-Ausdrücke (es sind
mehrere möglich) diesen Fehler abfängt. Das ist in Zeile 3 der Fall;
der Programmfluss wird daher an dieser Stelle fortgesetzt. Grob ließe
sich <b><tt style="font-size: 1.3em;">try... except...</tt></b> also mit <i>versuche... im Fehlerfall mache...</i>
übersetzen.

<div class="p"><!----></div>
Es lassen sich auch mehrere mögliche Fehler in einem except-Block abfangen:

<div class="p"><!----></div>

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
try:
&nbsp;&nbsp;&nbsp;&nbsp;names.remove(u"Karla")
except&nbsp;(SyntaxError,&nbsp;ValueError)&nbsp;as&nbsp;error:
&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;u"Folgender&nbsp;Fehler&nbsp;ist&nbsp;aufgetreten&nbsp;{0}".format(error)
</pre>

<div class="p"><!----></div>
Hier wird also auf einen möglichen <b><tt style="font-size: 1.3em;">SyntaxError</tt></b> ebenso reagiert wie
auf einen <b><tt style="font-size: 1.3em;">ValueError</tt></b>. Das Konstrukt <b><tt style="font-size: 1.3em;">except ... as error</tt></b> führt
dazu, dass der aufgetretene Fehler im Rumpf des <b><tt style="font-size: 1.3em;">except</tt></b>-Blocks als
<b><tt style="font-size: 1.3em;">error</tt></b> zur Verfügung steht. Sprich, der aufgetretene Fehler wird an
den Namen <b><tt style="font-size: 1.3em;">error</tt></b> gebunden. Obwohl Fehler-Objekte keine
Zeichenketten sind, können sie in vielen Situationen wie solche
verwendet werden:

<div class="p"><!----></div>

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
&#62;&#62;&#62;&nbsp;error&nbsp;=&nbsp;ValueError("Hilfe")
&#62;&#62;&#62;&nbsp;str(error)
'Hilfe'
</pre>

<div class="p"><!----></div>

<div class="p"><!----></div>
In Zeile 4 des zweiten Beispiels oben geschieht im Grunde genommen
Ähnliches: Das Fehler-Objekt wird implizit in eine Zeichenkette
umgewandelt, sodass auf der Konsole einige Details zum Fehler
erscheinen.

<div class="p"><!----></div>

<h3><b><tt style="font-size: 1.3em;">else</tt></b> und <b><tt style="font-size: 1.3em;">finally</tt></b></h3>

<div class="p"><!----></div>
Wie auch <b><tt style="font-size: 1.3em;">if</tt></b>-Blöcke kennen <b><tt style="font-size: 1.3em;">try... except</tt></b>-Blöcke das
<b><tt style="font-size: 1.3em;">else</tt></b>-Statement. Der Rumpf eines <b><tt style="font-size: 1.3em;">else</tt></b>-Blockes wird ausgeführt,
wenn im <b><tt style="font-size: 1.3em;">try</tt></b>-Block <i>kein</i> Fehler aufgetreten ist. Der
<b><tt style="font-size: 1.3em;">finally</tt></b>-Block schließlich kommt immer zur Ausführung, egal ob ein
Fehler auftrat oder nicht:

<div class="p"><!----></div>

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
l&nbsp;=&nbsp;[u"Peter",&nbsp;u"Isabell"]
try:
&nbsp;&nbsp;&nbsp;&nbsp;names.remove(u"Karla")
except&nbsp;ValueError:
&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;"Karla&nbsp;war&nbsp;gar&nbsp;nicht&nbsp;in&nbsp;der&nbsp;Liste."
else:
&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;"Karla&nbsp;wurde&nbsp;aus&nbsp;der&nbsp;Liste&nbsp;entfernt."
finally:
&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;"Mir&nbsp;doch&nbsp;egal,&nbsp;ob&nbsp;Karla&nbsp;in&nbsp;der&nbsp;Liste&nbsp;war&nbsp;oder&nbsp;nicht!"
</pre>

<div class="p"><!----></div>
Abhängig davon, ob Karla nun in der Liste vorhanden war oder nicht, erscheint entweder die Meldung:

<div class="p"><!----></div>

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
Karla&nbsp;war&nbsp;gar&nbsp;nicht&nbsp;in&nbsp;der&nbsp;Liste.
Mir&nbsp;doch&nbsp;egal,&nbsp;ob&nbsp;Karla&nbsp;in&nbsp;der&nbsp;Liste&nbsp;war&nbsp;oder&nbsp;nicht!
</pre>

<div class="p"><!----></div>

<div class="p"><!----></div>
oder

<div class="p"><!----></div>

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
Karla&nbsp;wurde&nbsp;aus&nbsp;der&nbsp;Liste&nbsp;entfernt.
Mir&nbsp;doch&nbsp;egal,&nbsp;ob&nbsp;Karla&nbsp;in&nbsp;der&nbsp;Liste&nbsp;war&nbsp;oder&nbsp;nicht!
</pre>

<div class="p"><!----></div>

<div class="p"><!----></div>

<h3>Ästhetik des Scheiterns</h3>

<div class="p"><!----></div>
Die Ausnahmebehandlung in Python gilt als sehr mächtig und wird oft
gegenüber manuellen Tests bevorzugt. Statt also von Hand zu
überprüfen, ob eine Datei vorhanden ist und ob der Benutzer die
nötigen Rechte hat, diese Datei zu lesen, würde ein
Python-Programmierer es einfach auf einen Versuch ankommen lassen
und die Datei öffnen. Tritt ein Fehler auf, wird dieser durch
entsprechende <b><tt style="font-size: 1.3em;">except</tt></b>-Blöcke abgefangen und dort darauf reagiert.

<div class="p"><!----></div>
Auftretende Fehler werden gewissermaßen von
„unten nach oben“ durchgereicht:

<div class="p"><!----></div>

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
def&nbsp;innen():
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;int("asd")

def&nbsp;mitte():
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;innen()

def&nbsp;aussen():
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;mitte()

print&nbsp;aussen()
</pre>

<div class="p"><!----></div>
Der Umwandeln einer Zeichenkette wie <b><tt style="font-size: 1.3em;">asd</tt></b> in eine Ganzzahl wird zu
einem <b><tt style="font-size: 1.3em;">ValueError</tt></b> führen. Die Frage lautet nun: An welcher Stelle
muss dieser Fehler nun abgefangen werden?

<div class="p"><!----></div>
Tatsächlich gibt es theoretisch vier Möglichkeiten: Der Fehler tritt
zunächst in der Funktion <b><tt style="font-size: 1.3em;">innen()</tt></b> auf. Dort könnte er mit einem
<b><tt style="font-size: 1.3em;">try... except...</tt></b>-Block abgefangen werden. Wird der Fehler dort
nicht behandelt, wird er an die übergeordnete Funktion <b><tt style="font-size: 1.3em;">mitte()</tt></b>
weitergegeben. Geschieht auch hier keine Fehlerbehandlung, überprüft
der Interpreter, ob auf nächsthöherer Ebene (also in <b><tt style="font-size: 1.3em;">aussen()</tt></b>) eine
Fehlerbehandlung stattfindet. Ist auch dies nicht der Fall, besteht
noch die Möglichkeit, den Fehler in Zeile 10 abzufangen. Erst wenn
an all diesen Stellen keine Fehlerbehandlung stattgefunden hat,
bricht der Interpreter die Abarbeitung des Skripts ab.

<div class="p"><!----></div>
Viele Anfänger mögen sich jetzt die Frage stellen: Wieso vermeidet
man nicht einfach Fehler, indem man dafür sorgt, dass die möglichen
Ausnahmen nicht auftreten können? Folgender Code-Schnipsel soll das
verdeutlichen:

<div class="p"><!----></div>

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
#&nbsp;ein&nbsp;Dictionary
persons&nbsp;=&nbsp;{u"Peter":&nbsp;"m",&nbsp;u"Karla":&nbsp;"w"}

#&nbsp;irgend&nbsp;wo&nbsp;spaeter&nbsp;im&nbsp;Code
if&nbsp;u"Peter"&nbsp;in&nbsp;persons:
&nbsp;&nbsp;&nbsp;&nbsp;gender&nbsp;=&nbsp;persons[u"Peter"]
</pre>

<div class="p"><!----></div>
Man könnte an dieser Stelle natürlich auch einen <b><tt style="font-size: 1.3em;">KeyError</tt></b> abfangen:

<div class="p"><!----></div>

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
try:
&nbsp;&nbsp;&nbsp;&nbsp;gender&nbsp;=&nbsp;persons[u"Peter"]
except&nbsp;KeyError:
&nbsp;&nbsp;&nbsp;&nbsp;pass
</pre>

<div class="p"><!----></div>
Diese kleine Situation zeigt das Dilemma. Oftmals ist nicht
unbedingt klar und direkt ersichtlich, wie man ein solches Problem
optimal löst. In Python wird das EAFP-Prinzip (frei übersetzt: „Erst
schießen, dann fragen.“) dem LBYL-Paradigma (in etwa: „Schau, bevor du
abspringst“) vorgezogen&nbsp;<a href="http://docs.python.org/glossary.html">[3]</a>. EAFP
würde offensichtlich für die zweite Variante sprechen, außerdem
spricht dafür, dass das Abklopfen aller Eventualitäten den Code
unter Umständen sehr aufblähen kann. Andererseits handelt es sich
bei Exceptions um <i>Ausnahmen</i>. Sollte es – wieso auch immer – sehr
wahrscheinlich sein, dass der Schlüssel (oben: <b><tt style="font-size: 1.3em;">Peter</tt></b>) an dieser
Stelle nicht verfügbar ist, so wäre die Lösung mittels Test auf
Vorhandensein sinnvoller, da es expliziter die erwartete Situation
ausdrückt. Entscheidend für die gute Nutzung von Exceptions ist also
die Situation im Code. Über die Vor- und Nachteile von EAFP und LBYL
hat Oran Looney einen sehr anschaulichen Artikel
verfasst&nbsp;<a href="http://oranlooney.com/lbyl-vs-eafp/">[4]</a>. Weitere allgemeine
Hinweise zur Fehlerbehandlung in Python finden sich in der
offiziellen Dokumentation&nbsp;<a href="http://docs.python.org/tutorial/errors.html">[5]</a>.

<div class="p"><!----></div>

<h2>Musikverwaltung</h2>

<div class="p"><!----></div>
Die bisher vorgestellten Funktionen und Möglichkeiten Pythons sollen
nun in einem etwas umfassenderen Beispiel – einer kleinen
Musikverwaltung – veranschaulicht werden. In den nächsten beiden
Teilen dieser Reihe wird dieses Beispiel dann sukzessive ausgebaut.
Den Anfang macht ein kleines Modul, das Verzeichnisse rekursiv nach
Musikdateien durchsucht und deren Tags in einer Liste von
Dictionaries abbildet.

<div class="p"><!----></div>

<h3>ID-Tags lesen</h3>

<div class="p"><!----></div>
Zum Auslesen der ID3-Tags wird die Python-Bibliothek
<b><tt style="font-size: 1.3em;">mutagen</tt></b>&nbsp;<a href="http://code.google.com/p/mutagen/">[6]</a> eingesetzt.
In Ubuntu ist es als Paket <b>python-mutagen</b> in den Paketquellen
verfügbar und kann darüber bequem nachinstalliert werden.

<div class="p"><!----></div>
Das Modul zum Auslesen der MP3s soll <b><tt style="font-size: 1.3em;">readmp3s</tt></b> heißen. Entsprechend
wird die Datei <a href="http://www.freiesmagazin.de/mobil/\Jahr-\Monat-listings/readmp3s.py">readmp3s.py</a> angelegt und mit folgenden Inhalt
befüllt:

<div class="p"><!----></div>

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
#!/usr/bin/env&nbsp;python
#&nbsp;coding:utf-8

import&nbsp;os
import&nbsp;sys
from&nbsp;mutagen.easyid3&nbsp;import&nbsp;EasyID3
import&nbsp;mutagen.mp3
import&nbsp;mutagen.oggvorbis
</pre>

<div class="p"><!----></div>
<i>Listing: <a href="http://www.freiesmagazin.de/mobil/2011-02-listings/readmp3s-imports.py">readmp3s-imports.py</a></i>

<div class="p"><!----></div>
Neben Shebang und Zeichenkodierung finden sich hier fünf Importe:
Das Modul <b><tt style="font-size: 1.3em;">os</tt></b> beinhaltet diverse betriebsystemabhängige
Schnittstellen. Das Modul <b><tt style="font-size: 1.3em;">sys</tt></b> wird genutzt, um auf die
Parameter des späteren Programmes zugreifen zu können. Der Import

<div class="p"><!----></div>

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
from&nbsp;mutagen.easyid3&nbsp;import&nbsp;EasyID3
</pre>

<div class="p"><!----></div>
erscheint zunächst kompliziert. Es wird aber lediglich vom
Submodul <b><tt style="font-size: 1.3em;">easyid3</tt></b> des Paketes <b>mutagen</b> die Klasse <b><tt style="font-size: 1.3em;">EasyID3</tt></b> in den
Namensraum des Skriptes importiert. In Teil 3 dieser Einführung
(siehe <b><font color="#595959">freies</font></b><font color="#FF630A">Magazin</font> 12/2010&nbsp;<a href="http://www.freiesmagazin.de/freiesMagazin-2010-12">[7]</a>)
wurde von derartigen <b><tt style="font-size: 1.3em;">from</tt></b>-Importen abgeraten, <b><tt style="font-size: 1.3em;">mutagen</tt></b> wurde aber
bewusst so geschrieben, dass das gezielte Importieren einzelner
Subbibliotheken möglich und sinnvoll ist.

<div class="p"><!----></div>
Mit <b><tt style="font-size: 1.3em;">import mutagen.mp3</tt></b> wird schließlich noch das Submodul <b><tt style="font-size: 1.3em;">mp3</tt></b> in
den Namensraum des Skriptes importiert. Der letzte Import verfährt
parallel mit dem Submodul <b><tt style="font-size: 1.3em;">oggvorbis</tt></b>. Diese beiden Module stellen
später Schnittstellen zu den ID3- bzw. Vorbis-Tags bereit.

<div class="p"><!----></div>
Als nächstes wird eine Funktion implementiert, welche die Tags der
Audiodateien ausliest und zurückgibt. Treten Fehler auf, gibt die
Funktion <b><tt style="font-size: 1.3em;">None</tt></b> zurück.

<div class="p"><!----></div>

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
def&nbsp;get_infos(path):

&nbsp;&nbsp;&nbsp;&nbsp;path&nbsp;=&nbsp;path.decode("utf-8")
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;path.lower().endswith(".mp3"):
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;audio&nbsp;=&nbsp;mutagen.mp3.MP3(path,&nbsp;ID3=EasyID3)
&nbsp;&nbsp;&nbsp;&nbsp;else:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;audio&nbsp;=&nbsp;mutagen.oggvorbis.OggVorbis(path)
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;length&nbsp;=&nbsp;audio.info.length

&nbsp;&nbsp;&nbsp;&nbsp;infos&nbsp;=&nbsp;{"path":path,&nbsp;"length":length}
&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;tag&nbsp;in&nbsp;["title",&nbsp;"artist",&nbsp;"album"]:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;content&nbsp;=&nbsp;&nbsp;audio.get(tag,&nbsp;[None])[0]
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;infos[tag]&nbsp;=&nbsp;content
&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;infos
</pre>

<div class="p"><!----></div>
<i>Listing: <a href="http://www.freiesmagazin.de/mobil/2011-02-listings/readmp3s-get_infos.py">readmp3s-get_infos.py</a></i>

<div class="p"><!----></div>
Der Kopf der Funktion hält keine Überraschungen bereit: Die Funktion
<b><tt style="font-size: 1.3em;">get_infos</tt></b> erwartet nur einen Parameter <b><tt style="font-size: 1.3em;">path</tt></b>. In Zeile 3
werden die Pfadangaben in Unicode umgewandelt – dies ist schon
allein in Hinblick auf die SQLite-Datenbank zu empfehlen. Nun ist es
immer möglich, dass einige Dateinamen fehlerhaft kodiert wurden (das
berühmte Fragezeichen im Dateinamen). In diesem Fall würde eine
<b><tt style="font-size: 1.3em;">UnicodeDecodeError</tt></b> auftreten. Dieser Fehler wird in dieser Funktion
nicht behandelt, daher muss er also an anderer Stelle abgefangen werden.

<div class="p"><!----></div>
In den Zeilen 6 und 8 wird abhängig von der Dateiendung (besser wäre
natürlich eine Überprüfung des MIME-Types&nbsp;<a href="http://de.wikipedia.org/wiki/MIME-Type">[8]</a>)
eine Instanz der Klasse <b><tt style="font-size: 1.3em;">mutagen.mp3.MP3</tt></b> oder <b><tt style="font-size: 1.3em;">mutagen.oggvorbis.OggVorbis</tt></b>
erstellt. Es wird jeweils der Pfad zur Audiodatei übergeben. Der
Zusatz <b><tt style="font-size: 1.3em;">ID3=EasyID3</tt></b> in Zeile 6 sorgt weiterhin dafür, dass eine
vereinfachte Schnittstelle auf die ID3-Tags bereitsteht. Die etwas
kryptischen ID3-Tags (<b><tt style="font-size: 1.3em;">TPE1</tt></b>, <b><tt style="font-size: 1.3em;">TALB</tt></b>) können so einfach als <b><tt style="font-size: 1.3em;">artist</tt></b>
bzw. <b><tt style="font-size: 1.3em;">album</tt></b> angesprochen werden. Die erstellten MP3- und
OggVorbis-Objekte werden jeweils an den Namen <b><tt style="font-size: 1.3em;">audio</tt></b> gebunden
und verhalten sich in vielerlei Hinsicht ähnlich. So kann in Zeile 10
bequem die Dauer der Audiodatei ausgelesen werden – unabhängig davon,
um welches Format es sich dabei handelt.

<div class="p"><!----></div>
In Zeile 12 wird zunächst ein neues Dict mit dem Pfad und der Dauer
erstellt und an den Namen <b><tt style="font-size: 1.3em;">infos</tt></b> gebunden. Die Schleife in Zeile 13
iteriert über die Liste mit Tags, die ausgelesen werden sollen. Die
Objekte <b><tt style="font-size: 1.3em;">mutagen.mp3.MP3</tt></b> und <b><tt style="font-size: 1.3em;">mutagen.oggvorbis.OggVorbis</tt></b>
verhalten sich wie ein Dict, sodass mit <b><tt style="font-size: 1.3em;">audio["title"]</tt></b> der Titel
der jeweiligen Datei abgefragt werden könnte. Da aber nicht jede
Audiodatei zwangsläufig jedes Tag hat, könnten hier Fehler
auftreten. An dieser Stelle erspart man sich weitere
Fehlerbehandlungen und nutzt die <b><tt style="font-size: 1.3em;">get</tt></b>-Methode der Dicts. Allerdings
gibt Mutagen nicht einfach Zeichenketten für die gewünschten Tags
aus. Es werden immer Listen zurückgegeben, sodass man statt
<b><tt style="font-size: 1.3em;">Künstlername</tt></b> die Liste <b><tt style="font-size: 1.3em;">["Künstlername"]</tt></b> erhält. Daher wird am Ende
von Zeile 14 mit <b><tt style="font-size: 1.3em;">[0]</tt></b> das erste Listenelement ausgelesen – das ist in
den meisten Fällen völlig ausreichend. Hier lauert freilich auch
eine kleine Stolperfalle: Die <b><tt style="font-size: 1.3em;">get</tt></b>-Methode arbeitet bekanntlich mit
einem Standard-Parameter, der zurückgegeben wird, falls das Dict den
angefragten Wert nicht enthält. Dieser Wert ist in dem Fall <b><tt style="font-size: 1.3em;">None</tt></b>.
Da die Rückgabe der <b><tt style="font-size: 1.3em;">get</tt></b>-Methode aber als Liste behandelt wird
(<b><tt style="font-size: 1.3em;">[0]</tt></b>), muss auch <b><tt style="font-size: 1.3em;">None</tt></b> zunächst in eine Liste gepackt werden.

<div class="p"><!----></div>
Nach dem Durchlaufen der Schleife wird in Zeile 17 das Dict an die
aufrufende Funktion übergeben.

<div class="p"><!----></div>
<b>Hinweis:</b> In den Zeilen 10 und 14 werden <b><tt style="font-size: 1.3em;">audio.info.length</tt></b> und die
Rückgabe von <b><tt style="font-size: 1.3em;">audio.get()</tt></b> an die Namen <b><tt style="font-size: 1.3em;">length</tt></b> bzw. <b><tt style="font-size: 1.3em;">content</tt></b>
gebunden. Dieser Zwischenschritt dient hier lediglich der
Veranschaulichung und der Übersichtlichkeit. Für gewöhnlich würde
man diesen Zwischenschritt auslassen:

<div class="p"><!----></div>

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
{"path":path,&nbsp;"length":audio.info.length}
...
infos[tag]&nbsp;=&nbsp;audio.get(tag,&nbsp;[None])[0]
</pre>

<div class="p"><!----></div>

<h3>Verzeichnis rekursiv auslesen</h3>

<div class="p"><!----></div>
Nun wird noch eine Funktion benötigt, die die MP3s auf der
Festplatte findet und an die Funktion <b><tt style="font-size: 1.3em;">get_infos()</tt></b> übergibt. Diese
Funktion soll <b><tt style="font-size: 1.3em;">read_recursively()</tt></b> heißen. 

<div class="p"><!----></div>


<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
def&nbsp;read_recursively(path):

audio_infos&nbsp;=&nbsp;[]
counter&nbsp;=&nbsp;0
error_counter&nbsp;=&nbsp;0
&nbsp;&nbsp;&nbsp;&nbsp;
for&nbsp;root,&nbsp;dirs,&nbsp;files&nbsp;in&nbsp;os.walk(path):
&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;fl&nbsp;in&nbsp;files:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;fl.lower().endswith(".mp3")&nbsp;or&nbsp;fl.lower().endswith(".ogg"):
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;path&nbsp;=&nbsp;os.path.join(root,&nbsp;fl)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;infos&nbsp;=&nbsp;get_infos(path)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;(UnicodeDecodeError,&nbsp;mutagen.mp3.HeaderNotFoundError,&nbsp;mutagen.id3.error)&nbsp;as&nbsp;inst:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;u"\n\nSKIPPING&nbsp;reading&nbsp;this&nbsp;file:"
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;path
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;u"ERROR:&nbsp;{0}\n".format(inst)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;error_counter&nbsp;+=1
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;audio_infos.append(infos)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;counter&nbsp;+=1
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;"\rScanning:&nbsp;{0}&nbsp;Files&nbsp;ok,&nbsp;{1}&nbsp;Files&nbsp;broken".format(counter,&nbsp;error_counter),
print&nbsp;
return&nbsp;audio_infos
</pre>

<div class="p"><!----></div>
<i>Listing: <a href="http://www.freiesmagazin.de/mobil/2011-02-listings/readmp3s-read_recursively.py">readmp3s-read_recursively.py</a></i>

<div class="p"><!----></div>
Auch hier zunächst nichts Neues: Die Funktion kennt einen Parameter
<b><tt style="font-size: 1.3em;">path</tt></b>. Damit soll später das Verzeichnis übergeben werden, welches
rekursiv durchsucht werden soll. In Zeile 3 wird eine Liste erstellt
und an den Namen <b><tt style="font-size: 1.3em;">audio_infos</tt></b> gebunden. Damit sollen später
sämtliche von <b><tt style="font-size: 1.3em;">get_infos()</tt></b> erzeugten Dicts mit den Tags aufbewahrt
werden. <b><tt style="font-size: 1.3em;">counter</tt></b> und <b><tt style="font-size: 1.3em;">error_counter</tt></b> sollen lediglich zählen, wie
viele Audiodateien bereits verarbeitet wurden und bei wie vielen es
zu Fehlern kam.

<div class="p"><!----></div>
In Zeile 7 wird eine neue Funktion eingeführt: <b><tt style="font-size: 1.3em;">os.walk()</tt></b>
durchläuft ein Verzeichnis rekursiv. Für jedes Verzeichnis gibt die
Funktion dabei den Pfad des aktuellen Verzeichnisses (<b><tt style="font-size: 1.3em;">root</tt></b>), die
Verzeichnisse in dem aktuellen Verzeichnis (<b><tt style="font-size: 1.3em;">dirs</tt></b>) und die Dateien
im jeweiligen Verzeichnis (<b><tt style="font-size: 1.3em;">files</tt></b>) an. Bei
<b><tt style="font-size: 1.3em;">os.walk()</tt></b>&nbsp;<a href="http://docs.python.org/library/os.html#os.walk">[9]</a> handelt
es sich um einen sogenannten Generator. Das ist der Grund, warum
die Funktion in einer Schleife verwendet werden
kann&nbsp;<a href="http://de.wikibooks.org/wiki/Python-Programmierung:_Funktionen#Generatoren_und_yield">[10]</a>.

<div class="p"><!----></div>
Da für die Musikdatenbank nur Dateien von Interesse sind, genügt es,
in Zeile 8 über die 
    
Dateiliste eines jeden Verzeichnisses zu
iterieren. In Zeile 9 wird für jede Datei geprüft, ob sie mit <b><tt style="font-size: 1.3em;">.mp3</tt></b>
oder <b><tt style="font-size: 1.3em;">.ogg</tt></b> endet. Da die Dateien theoretisch auch auf <b><tt style="font-size: 1.3em;">.mP3</tt></b> oder
<b><tt style="font-size: 1.3em;">.OgG</tt></b> enden könnten, werden die Dateinamen in Kleinbuchstaben
verglichen. Auch hier gilt: Die Abfrage der Dateiendung ist keine
sonderlich befriedigende Lösung – für das erste kleine Projekt
sollte dieses Vorgehen aber ausreichend sein.

<div class="p"><!----></div>
Da in der Liste <b><tt style="font-size: 1.3em;">files</tt></b> nur Dateinamen vorhanden sind, wird in
Zeile 10 der komplette Pfad erzeugt. Die Funktion <b><tt style="font-size: 1.3em;">os.path.join()</tt></b>
kümmert sich dabei darum, dass die korrekten Schrägstriche verwendet
werden (Linux und Windows unterscheiden sich in dieser Hinsicht).
Durch <b><tt style="font-size: 1.3em;">os.path.join</tt></b> wird weiterhin sicher gestellt, dass es nicht
versehentlich zu doppelten  Schrägstrichen im Pfad kommt. In Zeile 12
    
schließlich wird der so erstellte Pfad an die Funktion <b><tt style="font-size: 1.3em;">get_infos()</tt></b>
übergeben und das Ergebnis an den Namen <b><tt style="font-size: 1.3em;">info</tt></b> gebunden.

<div class="p"><!----></div>
In Zeile 11 wird aber zunächst die Fehlerbehandlung eingeleitet. Die
in der Funktion <b><tt style="font-size: 1.3em;">get_infos()</tt></b> nicht behandelten Fehler sollen also an
dieser Stelle abgefangen werden. In Zeile 13 werden dabei drei
Fehler erwartet: Der bereits erwähnte <b><tt style="font-size: 1.3em;">UnicodeDecodeError</tt></b> findet
sich ebenso wie die Fehler <b><tt style="font-size: 1.3em;">mutagen.mp3.HeaderNotFoundError</tt></b> und
<b><tt style="font-size: 1.3em;">mutagen.id3.error</tt></b>. Während der <b><tt style="font-size: 1.3em;">UnicodeDecodeError</tt></b> auftritt, wenn
eine Zeichenkette nicht in Unicode umgewandelt werden konnte und
damit für die später verwendete SQLite-Datenbank ungeeignet ist,
tritt der <b><tt style="font-size: 1.3em;">HeaderNotFoundError</tt></b> auf, wenn Mutagen in einer MP3-Datei
keinen MP3-Header finden konnte. <b><tt style="font-size: 1.3em;">mutagen.id3.error</tt></b> schließlich
fängt viele weitere Mutagen-Fehler ab. Dies erspart dem Entwickler
die Arbeit, jeden einzelnen möglichen Fehler im Vorfeld zu
definieren. Ihm genügt es (wie in diesem Beispiel) zu wissen, dass
Mutagen – warum auch immer – eine bestimmte Datei nicht verarbeiten
konnte.

<div class="p"><!----></div>
In den Zeilen 14-17 findet die Fehlerbehandlung statt. Der Fehler
wird in der Konsole ausgegeben und der Fehlerzähler wird um 1
erhöht. Nur wenn kein Fehler auftritt (Zeile 18) wird in Zeile&nbsp;19
die Rückgabe von <b><tt style="font-size: 1.3em;">get_infos()</tt></b> an die Liste <b><tt style="font-size: 1.3em;">audio_infos</tt></b> angehängt.
In diesem Fall wird <b><tt style="font-size: 1.3em;">counter</tt></b> um 1 erhöht.

<div class="p"><!----></div>
Eine letzte Besonderheit findet sich in Zeile 21. Die Zeichenkette
dort beginnt mit <b><tt style="font-size: 1.3em;">\r</tt></b>. Diese Escape-Sequenz steht für den
sogenannten Wagenrücklauf. Dadurch wird der Cursor im Terminal
wieder auf den Anfang der Zeile gesetzt. Nachfolgende Ausgaben mit
<b><tt style="font-size: 1.3em;">print</tt></b> würden die vorherigen Ausgaben überschreiben. Da <b><tt style="font-size: 1.3em;">print</tt></b>
eine Zeile im Normalfall mit einem Zeilenumbruch abschließt, wird
dies hier mit dem Komma am Ende der Zeile unterbunden.

<div class="p"><!----></div>
Der Wagenrücklauf und das Unterbinden des Zeilenumbruches sorgen
dafür, dass die Konsole nicht mit Textausgaben überflutet wird: Die
Anzahl der verarbeiteten Dateien wird immer in die selbe Zeile
geschrieben. 
<div class="p"><!----></div>
<b>Hinweis:</b> In Python &#62;= 3 müsste Zeile 17 wie folgt aussehen:

<div class="p"><!----></div>

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
print&nbsp;("\rScanning:&nbsp;{0}&nbsp;MP3s&nbsp;ok,&nbsp;{1}&nbsp;MP3s&nbsp;broken".format(counter,&nbsp;error_counter),&nbsp;end="")
</pre>

<div class="p"><!----></div>

<h3>Kleiner Test</h3>

<div class="p"><!----></div>
Obwohl die Musikdatenbank noch in weiter Ferne ist, kann zumindest
das Modul <b><tt style="font-size: 1.3em;">readmp3s</tt></b> schon einmal getestet werden. Dazu wird am Ende
des Skripts noch folgende <b><tt style="font-size: 1.3em;">if</tt></b>-Block ergänzt:

<div class="p"><!----></div>

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
if&nbsp;__name__&nbsp;==&nbsp;"__main__":
&nbsp;&nbsp;&nbsp;&nbsp;try:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;path&nbsp;=&nbsp;sys.argv[1]
&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;IndexError:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;"Usage:"
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;"readmp3s.py&nbsp;DIRECTORY"
&nbsp;&nbsp;&nbsp;&nbsp;else:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mp3s&nbsp;=&nbsp;read_recursively(path)
</pre>

<div class="p"><!----></div>
<i>Listing: <a href="http://www.freiesmagazin.de/mobil/2011-02-listings/readmp3s-main.py">readmp3s-main.py</a></i>

<div class="p"><!----></div>
Die erste Zeile überprüft dabei, ob die Datei als Modul oder als
eigenständiges Skript geladen wurde. Nur im letzteren Fall kommen
die folgenden Zeilen zur Ausführung. In Zeile 3 wird der zweite
Parameter des Skriptes aus der Liste <b><tt style="font-size: 1.3em;">sys.argv</tt></b> gelesen. Der erste
Parameter ist immer der Dateiname (hier also <b><tt style="font-size: 1.3em;">readmp3s.py</tt></b>). Falls
der Benutzer keine Parameter übergeben und die Liste nur einen
Eintrag hat, wird es in Zeile 3 zu einem <b><tt style="font-size: 1.3em;">IndexError</tt></b> kommen, der
aber in Zeile 4 abgefangen wird. Im Fehlerfall wird dann ein kurzer
Hinweis auf den erforderlichen Parameter gegeben. In Zeile 8 wird
die Funktion <b><tt style="font-size: 1.3em;">read_recursively()</tt></b> aufgerufen. Wie bereits erwähnt
kommt dieser <b><tt style="font-size: 1.3em;">else</tt></b>-Block nur zur Ausführung, wenn zuvor kein Fehler
auftrat.

<div class="p"><!----></div>
Das Skript wird nun das angegebene Verzeichnis durchsuchen, die
ID-Tags auslesen und über die Anzahl lesbarer und nicht-lesbarer
MP3s informieren. Keine Sorge: Das Skript ist bisweilen etwas
empfindlich, was die Zeichenkodierung und die MP3-Header betrifft
und nicht alle als defekt gemeldeten MP3s sind
tatsächlich unbrauchbar.

<div class="p"><!----></div>
Im nächsten Teil dieser Reihe wird die Musikdatenbank um eine
SQLite-Datenbank ergänzt. 
<div class="p"><!----></div>
    <font color="#595959"><font size="+1">Links</font></font><br />
        
[1] <a href="http://www.freiesmagazin.de/freiesMagazin-2011-01"><tt style="font-size: 1.3em;">http://www.freiesmagazin.de/freiesMagazin-2011-01</tt></a><br />

<div class="p"><!----></div>
[2] <a href="http://docs.python.org/library/exceptions.html"><tt style="font-size: 1.3em;">http://docs.python.org/library/exceptions.html</tt></a><br />

<div class="p"><!----></div>
[3] <a href="http://docs.python.org/glossary.html"><tt style="font-size: 1.3em;">http://docs.python.org/glossary.html</tt></a><br />

<div class="p"><!----></div>
[4] <a href="http://oranlooney.com/lbyl-vs-eafp/"><tt style="font-size: 1.3em;">http://oranlooney.com/lbyl-vs-eafp/</tt></a><br />

<div class="p"><!----></div>
[5] <a href="http://docs.python.org/tutorial/errors.html"><tt style="font-size: 1.3em;">http://docs.python.org/tutorial/errors.html</tt></a><br />

<div class="p"><!----></div>
[6] <a href="http://code.google.com/p/mutagen/"><tt style="font-size: 1.3em;">http://code.google.com/p/mutagen/</tt></a><br />

<div class="p"><!----></div>
[7] <a href="http://www.freiesmagazin.de/freiesMagazin-2010-12"><tt style="font-size: 1.3em;">http://www.freiesmagazin.de/freiesMagazin-2010-12</tt></a><br />

<div class="p"><!----></div>
[8] <a href="http://de.wikipedia.org/wiki/MIME-Type"><tt style="font-size: 1.3em;">http://de.wikipedia.org/wiki/MIME-Type</tt></a><br />

<div class="p"><!----></div>
[9] <a href="http://docs.python.org/library/os.html#os.walk"><tt style="font-size: 1.3em;">http://docs.python.org/library/os.html#os.walk</tt></a><br />

<div class="p"><!----></div>
 [10] <a href="http://de.wikibooks.org/wiki/Python-Programmierung:_Funktionen#Generatoren_und_yield"><tt style="font-size: 1.3em;">http://de.wikibooks.org/wiki/Python-Programmierung:_Funktionen#Generatoren_und_yield</tt></a><br />

<div class="p"><!----></div>
            
<table border="1">
<tr><td colspan="1" align="center"><font size="+0"><b>Autoreninformation</b></font></td></tr>
<tr><td align="left"><b>Daniel Nögel</b>
beschäftigt sich seit drei Jahren mit Python. Ihn überzeugt
besonders die intuitive Syntax und die Vielzahl der unterstützten
Bibliotheken, die Python auf dem Linux-Desktop zu einem wahren
Multitalent machen.
</td></tr>
<tr><td align="left">    </td></tr></table>



<div class="p"><!----></div>
                        <a href="http://www.freiesmagazin.de/comment/reply/214?edit[subject]=Python - Teil 5#comment-form"><i>Diesen Artikel kommentieren</i></a><br /><br />
        <a href="freiesMagazin-2011-02-bilder.html#index">Zum Index</a><br /><hr />

<div class="p"><!----></div>
            

<div class="p"><!----></div>

<div class="p"><!----></div>

<div class="p"><!----></div>
<h1><font color="#595959"><a name="11_02_bottle">Bottle – Ein WSGI-Microframework für Python</a><a name="11_02_bottle">
</a></font></h1>von Jochen Schnelle        <b>W</b><b>er webbasierte Anwendungen in Python&nbsp;<a href="http://www.python.org">[1]</a> programmiert,
nutzt heutzutage normalerweise den WSGI-Standard&nbsp;<a href="http://www.wsgi.org">[2]</a>,
der eine einheitliche Schnittstelle zwischen Programm und Webserver 
definiert. Der Umgang mit den WSGI-Modulen aus der Python-Standardbibliothek
ist zwar nicht schwierig, aber letztlich doch recht 
trockener Formalismus. Hier kommt <i>Bottle</i>&nbsp;<a href="http://bottle.paws.de">[3]</a> ins
Spiel, mit dessen Hilfe Webanwendungen schnell und einfach erstellt werden können.</b>

<div class="p"><!----></div>
<i>Bottle</i> erledigt den WSGI-Formalismus mit wenigen Zeilen Code, sodass man
sich ganz auf die eigene Anwendung konzentrieren kann. Weiterhin stellt
das Modul zusätzliche Funktionen bereit, welche im Rahmen einer
Webapplikation nützlich und hilfreich sind. <i>Bottle</i> selbst besteht dabei nur
aus einem einzelnen Modul, das praktischerweise keine weiteren
Abhängigkeiten außer Python selbst hat. Das Programm läuft unter allen
Python-Versionen ab 2.5, inklusive Python 3.x. Somit ist das Modul recht
universell einsetzbar und läuft auf fast jedem Server bzw. Computer mit
installiertem Python.

<div class="p"><!----></div>

<h2>Installation</h2>

<div class="p"><!----></div>
Der einfachste Weg <i>Bottle</i> zu installieren, ist über <b><tt style="font-size: 1.3em;">easy_install</tt></b> aus den
Python-Setup-Tools&nbsp;<a href="http://pypi.python.org/pypi/setuptools">[4]</a>. Hat man diese
installiert, lautet der entsprechende Befehl:

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
#&nbsp;easy_install&nbsp;bottle
</pre>

<div class="p"><!----></div>
Da das Programm aber, wie oben bereits erwähnt, nur aus einer Datei besteht,
kann man alternativ das neueste Modul von der Git-Hub-Seite
herunterladen&nbsp;<a href="https://github.com/defnull/bottle">[5]</a> und dann händisch ins Projektverzeichnis
kopieren, was je nach System bei der Programmentwicklung oder zum schnellen
Testen recht nützlich sein kann. Oder man kopiert <i>Bottle</i> direkt in das
Verzeichnis, in dem alle Python-Module liegen, unter Ubuntu/Debian z.&nbsp;B.
<b><tt style="font-size: 1.3em;">/usr/lib/python2.6/dist-packages/</tt></b>. Dies funktioniert so aber nur, wenn man
Python&nbsp;2 nutzt. Nutzer von Python 3 müssen vorher noch die Datei <b><tt style="font-size: 1.3em;">bottle.py</tt></b>
mit dem Python-Hilfsprogramm <b><tt style="font-size: 1.3em;">2to3</tt></b>&nbsp;<a href="http://docs.python.org/library/2to3.html">[6]</a>
für Python&nbsp;3 anpassen:

<div class="p"><!----></div>

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
$&nbsp;2to3&nbsp;-w&nbsp;bottle.py
</pre>

<div class="p"><!----></div>

<div class="p"><!----></div>
Für Ubuntu gibt es seit der Version 10.04 „Lucid Lynx“
zwar auch ein fertiges Paket in den Paketquellen, dieses entspricht aber
nicht dem neuesten Stand von <i>Bottle</i>, sodass die manuelle Installation
bevorzugt werden sollte.

<div class="p"><!----></div>

<h2>Nutzung</h2>

<div class="p"><!----></div>
<i>Bottle</i> besteht aus einer Reihe von Klassen und Funktionen, die für das
eigene Programm genutzt werden können. Wie alle Python-Module muss <i>Bottle</i>
dazu zuerst einmal in das eigene Programm importiert werden:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
import&nbsp;bottle&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;zum&nbsp;kompletten&nbsp;Import
#&nbsp;bzw.
from&nbsp;bottle&nbsp;import&nbsp;...&nbsp;&nbsp;&nbsp;#&nbsp;einzelne&nbsp;Klassen&nbsp;importieren
</pre>

<div class="p"><!----></div>
Grundsätzlich gibt es mehrere Möglichkeiten, die eigene <i>Bottle</i>-Applikation
an einen Webserver zu binden. <i>Bottle</i> bietet eine Vielzahl von Anbindungen
von Hause aus an, bis hin zum Betrieb über den
Apache-Webserver&nbsp;<a href="http://httpd.apache.org">[7]</a> via
mod_wsgi&nbsp;<a href="http://code.google.com/p/modwsgi/">[8]</a>. Eine Übersicht über alle möglichen
und unterstützten Anbindungen findet man in der Dokumentation im Abschnitt
„Deployment“&nbsp;<a href="http://bottle.paws.de/docs/dev/tutorial.html#deployment">[9]</a>. Zusätzlich
bringt <i>Bottle</i> einen einfachen, eingebauten Server mit, welcher auf der
Referenzimplementierung des in Python enthaltenen WSGI-Servers
basiert&nbsp;<a href="http://docs.python.org/library/wsgiref.html#module-wsgiref.simple_server">[10]</a>.
Dieser eignet sich sehr gut zum lokalen Testen der Applikation und wird auch
im Folgenden für alle Beispiele genutzt. Weiterhin bietet der eingebaute
Server die Option „autoreload“. Dies bedeutet, dass der laufende Server
automatisch erkennt, wenn Änderungen an der zugrunde liegenden Applikation
vorgenommen wurden und sich dann selbstständig neu startet, sodass der
sonst notwendige händische Neustart entfallen kann.

<div class="p"><!----></div>
<b>Hinweis:</b> Die Code-Beispiele sind alle unter Python
2.6 lauffähig und getestet, sollten aber auch unter neueren
Python-Versionen einsetzbar sein.

<div class="p"><!----></div>

<h3>Einfaches Routing</h3>

<div class="p"><!----></div>
Grundlegend ist bei <i>Bottle</i> <b><tt style="font-size: 1.3em;">route</tt></b>, das für das Routing zuständig ist. <b><tt style="font-size: 1.3em;">route</tt></b>
ist ein
    
Dekorator&nbsp;<a href="http://en.wikipedia.org/wiki/Python_syntax_and_semantics#Decorators">[11]</a>, welcher die darauf folgende Funktion an die in <b><tt style="font-size: 1.3em;">route</tt></b> angegebene Route
bindet.

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
#!/usr/bin/python
#&nbsp;-*-&nbsp;coding:&nbsp;utf-8&nbsp;-*-

from&nbsp;bottle&nbsp;import&nbsp;route,&nbsp;run

@route('/hallo')
def&nbsp;hallo():
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;'Hallo&nbsp;Welt!'

run()
</pre>

<div class="p"><!----></div>
<i>Listing: <a href="http://www.freiesmagazin.de/mobil/2011-02-listings/meine_app.py">meine_app.py</a></i>

<div class="p"><!----></div>
Dieses Skript speichert man z.&nbsp;B. unter <b><tt style="font-size: 1.3em;">meine_app.py</tt></b> 
und startet es dann mit:

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
$&nbsp;python&nbsp;meine_app.py
</pre>

<div class="p"><!----></div>

<div class="p"><!----></div>
Das Skript stellt eine minimale, mit <i>Bottle</i> erstellte Webapplikation dar.
<b><tt style="font-size: 1.3em;">@route('/hallo')</tt></b> definiert die Route <b><tt style="font-size: 1.3em;">hallo</tt></b>, welche an die folgende
Funktion <b><tt style="font-size: 1.3em;">hallo</tt></b> gebunden ist. Dort wird einfach nur ein „Hallo Welt!“ an
den Browser zurückgegeben. <b><tt style="font-size: 1.3em;">run()</tt></b> startet die Applikation. Ohne weitere
Angaben läuft diese nun lokal auf localhost und Port 8080. Testen kann man
dies, indem man das Programm wie oben beschrieben startet und im Browser
jetzt <a href="http://localhost:8080/hallo"><tt style="font-size: 1.3em;">http://localhost:8080/hallo</tt></a> aufruft. Der Browser gibt also immer das
aus, was über die <b><tt style="font-size: 1.3em;">return</tt></b>-Anweisung zurückgeliefert wird. Dies muss nicht
unbedingt, wie in diesem Beispiel, einfacher Text sein. Es darf alles
geliefert werden, was der Browser korrekt darstellen kann, also z.&nbsp;B. auch
Text mit HTML-Markup oder JavaScript.

<div class="p"><!----></div>
Möchte man den weiter oben beschriebenen Autoreloader nutzen, so muss man
anstatt <b><tt style="font-size: 1.3em;">run()</tt></b> folgenden Befehl benutzen:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
run(reloader=True)
</pre>

<div class="p"><!----></div>
Bei der Programmentwicklung ist es weiterhin recht nützlich, wenn man das in
<i>Bottle</i> enthaltene <b><tt style="font-size: 1.3em;">debug</tt></b> nutzt, da dann im Falle eines Fehlers eine
erweiterte Fehlermeldung ausgegeben wird:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
from&nbsp;bottle&nbsp;import&nbsp;debug,&nbsp;...
...
debug(True)
run()
</pre>

<div class="p"><!----></div>
Debug sollte aber im Produktivbetrieb wieder deaktiviert werden, da im Falle
eines Programmfehlers sonst Außenstehende gegebenenfalls zu viele
Informationen erhalten könnten.

<div class="p"><!----></div>
Man kann an eine Funktion beliebig viele Routen binden, aber
nicht mehrere Funktionen an eine Route. Folgendes funktioniert ebenfalls:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
#!/usr/bin/python
#&nbsp;-*-&nbsp;coding:&nbsp;utf-8&nbsp;-*-

from&nbsp;bottle&nbsp;import&nbsp;route,&nbsp;run,&nbsp;debug

@route('/hallo')
@route('/welt')
@route('/hallo/welt')
def&nbsp;hallo():
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;'Hallo&nbsp;Welt!'

debug(True)
run(reloader=True)
</pre>

<div class="p"><!----></div>
<i>Listing: <a href="http://www.freiesmagazin.de/mobil/2011-02-listings/meine_app2.py">meine_app2.py</a></i>

<div class="p"><!----></div>
Innerhalb einer Applikation können natürlich beliebig viele Routen und
entsprechend viele Funktionen definiert werden.

<div class="p"><!----></div>

<h3>Dynamisches Routing</h3>

<div class="p"><!----></div>
In den vorherigen Beispielen wurden Routen statisch definiert. Dies ist für
kleine, quasi-statische Seiten sicherlich auch ausreichend, nicht aber für
dynamische Webapplikationen. Möchte man z.&nbsp;B. für eine Reihe von Benutzern
eine eigene Seite einrichten, so ist es mühsam bis unmöglich, für jeden
Nutzer eine statische Route festzulegen. Aber <i>Bottle</i> bietet auch dynamisches
Routing an. Dies funktioniert wie folgt:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
#!/usr/bin/python
#&nbsp;-*-&nbsp;coding:&nbsp;utf-8&nbsp;-*-

from&nbsp;bottle&nbsp;import&nbsp;route,&nbsp;run,&nbsp;debug

@route('/hallo/:name')
def&nbsp;hallo(name):
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;'Hallo&nbsp;{0}'.format(name)

debug(True)
run(reloader=True)
</pre>

<div class="p"><!----></div>
<i>Listing: <a href="http://www.freiesmagazin.de/mobil/2011-02-listings/dyn_routing.py">dyn_routing.py</a></i>

<div class="p"><!----></div>
Beginnt ein Teil einer Route mit dem Doppelpunkt <b><tt style="font-size: 1.3em;">:</tt></b>, so wird dieser als
dynamisch interpretiert, also als Zuweisung eines Werts an eine Variable.
Diese kann dann, wie im Beispiel <b><tt style="font-size: 1.3em;">dyn_routing.py</tt></b>

oben,
an die folgende Funktion übergeben und dort verarbeitet
werden.

<div class="p"><!----></div>
Zu beachten ist dabei, dass keinerlei Typprüfung oder Typumwandlung
stattfindet. Der Wert ist immer ein String. Daher funktioniert folgendes
Beispiel auch nicht:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
#!/usr/bin/python
#&nbsp;-*-&nbsp;coding:&nbsp;utf-8&nbsp;-*-

from&nbsp;bottle&nbsp;import&nbsp;route,&nbsp;run,&nbsp;debug

@route('/rechnen/:zahl')
def&nbsp;quadrieren(zahl):
&nbsp;&nbsp;&nbsp;&nbsp;quadrat&nbsp;=&nbsp;&nbsp;zahl&nbsp;*&nbsp;zahl&nbsp;&nbsp;#Fehler,&nbsp;weil&nbsp;man&nbsp;zwei&nbsp;Strings&nbsp;nicht&nbsp;multiplizieren&nbsp;kann
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;'Die&nbsp;Zahl&nbsp;ist&nbsp;{0},&nbsp;das&nbsp;Quadrat&nbsp;ist&nbsp;{1}.'.format(zahl,quadrat)

debug(True)
run(reloader=True)
</pre>

<div class="p"><!----></div>
<i>Listing: <a href="http://www.freiesmagazin.de/mobil/2011-02-listings/dyn_routing_noop.py">dyn_routing_noop.py</a></i>

<div class="p"><!----></div>
Man muss vorher selber prüfen, ob der eingegebe Wert eine Zahl ist und gegebenenfalls für die Fehlerbehandlung sorgen.
Dies geschieht beispielsweise wie folgt:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
#!/usr/bin/python
#&nbsp;-*-&nbsp;coding:&nbsp;utf-8&nbsp;-*-

from&nbsp;bottle&nbsp;import&nbsp;route,&nbsp;run,&nbsp;debug
@route('/rechnen/:zahl')
def&nbsp;quadrieren(zahl):
&nbsp;&nbsp;&nbsp;&nbsp;try:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;zahl&nbsp;=&nbsp;int(zahl)
&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;ValueError:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;'Sie&nbsp;muessen&nbsp;eine&nbsp;Zahl&nbsp;eingeben!'
&nbsp;&nbsp;&nbsp;&nbsp;quadrat&nbsp;=&nbsp;&nbsp;zahl&nbsp;*&nbsp;zahl
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;'Die&nbsp;Zahl&nbsp;ist&nbsp;{0},&nbsp;das&nbsp;Quadrat&nbsp;ist&nbsp;{1}.'.format(zahl,quadrat)

debug(True)
run(reloader=True)
</pre>

<div class="p"><!----></div>
<i>Listing: <a href="http://www.freiesmagazin.de/mobil/2011-02-listings/dyn_routing2.py">dyn_routing2.py</a></i>

<div class="p"><!----></div>
Zum Thema Fehlerbehandlung siehe auch den <a href="freiesMagazin-2011-02-bilder.html#11_02_python5">Python-Artikel</a> in dieser Ausgabe.

<div class="p"><!----></div>
    Weiterhin beherrscht das dynamische Routing auch reguläre Ausdrücke:

<div class="p"><!----></div>
    
<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
#!/usr/bin/python
#&nbsp;-*-&nbsp;coding:&nbsp;utf-8&nbsp;-*-

from&nbsp;bottle&nbsp;import&nbsp;route,&nbsp;run

@route('/nutzer/:ident#[0-9]+#')
def&nbsp;nutzer_id(ident):
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;'Die&nbsp;Nutzer&nbsp;ist&nbsp;ID&nbsp;ist&nbsp;{0}.'.format(ident)

run(reloader=True)
</pre>

<div class="p"><!----></div>
<i>Listing: <a href="http://www.freiesmagazin.de/mobil/2011-02-listings/reg_expr.py">reg_expr.py</a></i>

<div class="p"><!----></div>
    Hier wird als letzter Teil der Route eine beliebige, positive Ganzzahl
akzeptiert und diese
als Wert von <b><tt style="font-size: 1.3em;">ident</tt></b> an die folgende Funktion
übergeben. Aber Achtung: Das <b><tt style="font-size: 1.3em;">ident</tt></b> ist dabei nicht Teil der Route! Eine korrekte Route
lautet zum Beispiel <a href="http://localhost:8080/nutzer/123"><tt style="font-size: 1.3em;">http://localhost:8080/nutzer/123</tt></a>, während zum Beispiel <a href="http://localhost:8080/nutzer/ABC"><tt style="font-size: 1.3em;">http://localhost:8080/nutzer/ABC</tt></a>
oder <a href="http://localhost:8080/nutzer/ident123"><tt style="font-size: 1.3em;">http://localhost:8080/nutzer/ident123</tt></a>
eine Fehlermeldung erzeugt, weil
die Route nicht gefunden wird.

<div class="p"><!----></div>
Weiterhin besteht die Möglichkeit, einen
HTTP-Statuscode&nbsp;<a href="http://de.selfhtml.org/servercgi/server/httpstatuscodes.htm">[12]</a> wie
zum Beispiel „404 – Not found“ an eine Route zu binden. Das hat den Vorteil, dass der Nutzer
quasi immer eine von der Applikation generierte Seite zu sehen bekommt,
weil der Fehler ja abgefangen wird. Das entsprechende Skript kann so aussehen:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
#!/usr/bin/python
#&nbsp;-*-&nbsp;coding:&nbsp;utf-8&nbsp;-*-
from&nbsp;bottle&nbsp;import&nbsp;route,&nbsp;run,&nbsp;error

@route('/hallo')
def&nbsp;hallo():
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;'Hallo&nbsp;Welt!'

@error(404)
def&nbsp;error404(error):
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;'Seite&nbsp;existiert&nbsp;nicht!'

run(reloader=True)
</pre>

<div class="p"><!----></div>
<i>Listing: <a href="http://www.freiesmagazin.de/mobil/2011-02-listings/html_statuscode.py">html_statuscode.py</a></i>

<div class="p"><!----></div>

<h3>Statische Inhalte</h3>

<div class="p"><!----></div>
Bei Webapplikationen kann es natürlich auch vorkommen, dass man den Inhalt
gar nicht dynamisch erstellen will, sondern einfach nur eine fertige Datei
zurückliefern möchte, wie zum 

Beispiel eine  HTML-Datei oder ein PDF. 
Dies lässt sich unter <i>Bottle</i> mit Hilfe von <b><tt style="font-size: 1.3em;">send_file</tt></b> erledigen.

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
#!/usr/bin/python
#&nbsp;-*-&nbsp;coding:&nbsp;utf-8&nbsp;-*-
from&nbsp;bottle&nbsp;import&nbsp;route,&nbsp;run,&nbsp;send_file

@route('/hallo')
def&nbsp;hallo():
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;'&lt;a&nbsp;href="/download"&#62;HIER&nbsp;KLICKEN&lt;/a&#62;,&nbsp;startet&nbsp;den&nbsp;Download.'

@route('/download')
def&nbsp;download():
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;send_file('prospekt.pdf',&nbsp;root='/pfad/zur/Datei')

run(reloader=True)
</pre>

<div class="p"><!----></div>
<i>Listing: <a href="http://www.freiesmagazin.de/mobil/2011-02-listings/send_pdf.py">send_pdf.py</a></i>

<div class="p"><!----></div>
Ruft man die Route <b><tt style="font-size: 1.3em;">download</tt></b> auf, so wird die Datei <b><tt style="font-size: 1.3em;">prospekt.pdf</tt></b>
gesendet. Wie man sieht, erwartet <b><tt style="font-size: 1.3em;">send_file</tt></b> mindestens zwei Parameter: als
erstes den Namen der Datei, als zweites den vollen, absoluten Pfad. Der
MIME-Typ&nbsp;<a href="http://de.wikipedia.org/wiki/Internet_Media_Type">[13]</a> wird dabei
automatisch mit Hilfe der in Python enthaltenen Funktion
<b><tt style="font-size: 1.3em;">mimetypes.guess_type</tt></b>&nbsp;<a href="http://docs.python.org/library/mimetypes.html">[14]</a>
geraten. Er kann aber auch explizit über einen dritten Parameter angegeben
werden:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
return&nbsp;send_file('prospekt.pdf',&nbsp;root='/pfad/zur/Datei',&nbsp;mimitype='application/pdf')
</pre>

<div class="p"><!----></div>
Ist dem Browser der MIME-Typ bekannt, wird die Datei in der Regel direkt im
Browser geöffnet, im obigen Beispiel z.&nbsp;B. mit Evince, Okular oder dem
    
 Adobe
Reader. Möchte man aber stattdessen einen Download-Dialog erzwingen, so ist
dies wie folgt möglich:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
return&nbsp;send_file('prospekt.pdf',&nbsp;root='/pfad/zur/Datei',&nbsp;download=True)
</pre>

<div class="p"><!----></div>
oder:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
return&nbsp;send_file('prospekt.pdf',&nbsp;root='/pfad/zur/Datei',&nbsp;download='Mein_Prospekt.PDF')
</pre>

<div class="p"><!----></div>
Im ersten Fall wird als der Dateiname einfach das angegebene <b><tt style="font-size: 1.3em;">prospekt.pdf</tt></b>
für die Datei verwendet, im zweiten Beispiel schlägt der Browser vor, die
Datei als <b><tt style="font-size: 1.3em;">Mein_Prospekt.PDF</tt></b> zu speichern.

<div class="p"><!----></div>

<h3>GET- und POST-Daten Abfragen</h3>

<div class="p"><!----></div>
<i>Bottle</i> bietet mit Hilfe der Klasse <b><tt style="font-size: 1.3em;">request</tt></b> eine Möglichkeit, auf Daten
zuzugreifen, die als GET-Parameter in der URL oder als POST-Daten
gesendet wurden. Die Daten könnten z.&nbsp;B. aus einem HTML-Formular stammen. Das
folgende Beispiel zeigt den Umgang mit GET-Daten:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
#!/usr/bin/python
#&nbsp;-*-&nbsp;coding:&nbsp;utf-8&nbsp;-*-

from&nbsp;bottle&nbsp;import&nbsp;route,&nbsp;run,&nbsp;request

@route('/hallo',&nbsp;method='GET')
def&nbsp;hallo():
&nbsp;&nbsp;&nbsp;&nbsp;name&nbsp;=&nbsp;request.GET.get('name')
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;not&nbsp;name:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name&nbsp;=&nbsp;'Unbekannter'
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;'Hallo&nbsp;{0}!'.format(name)

run(reloader=True)
</pre>

<div class="p"><!----></div>
<i>Listing: <a href="http://www.freiesmagazin.de/mobil/2011-02-listings/html_get.py">html_get.py</a></i>

<div class="p"><!----></div>
Als erstes wird der Route mitgeteilt, dass diese GET-Daten empfangen darf.
Sendet man GET-Daten (bzw. POST-Daten) an eine Route, für die <b><tt style="font-size: 1.3em;">method</tt></b> nicht
explizit definiert ist, wirft <i>Bottle</i> eine Fehlermeldung aus. Mit Hilfe von
<b><tt style="font-size: 1.3em;">request.GET.get('name')</tt></b> holt man den Wert, welcher zum Schlüssel <b><tt style="font-size: 1.3em;">name</tt></b>
gehört. Ruft man nun zum Beispiel die URL <a href="http://localhost:8080?name=Jochen"><tt style="font-size: 1.3em;">http://localhost:8080?name=Jochen</tt></a> auf,
so erhält man als Ausgabe „Hallo Jochen!“. Bei

realen Applikationen sollte man
die GET- oder POST-Daten aber nicht – wie im Beispiel <b><tt style="font-size: 1.3em;">html_get.py</tt></b> – ungeprüft
ausgeben, da dann ein möglicher Angreifer recht einfach beispielsweise JavaScript-Code
ausführen könnte. Daher sollte man zumindest die Eingabe escapen, was mit
Bordmitteln von Python möglich ist. 
<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
#!/usr/bin/python
#&nbsp;-*-&nbsp;coding:&nbsp;utf-8&nbsp;-*-

from&nbsp;bottle&nbsp;import&nbsp;route,&nbsp;run,&nbsp;request
from&nbsp;cgi&nbsp;import&nbsp;escape

@route('/hallo',&nbsp;method='GET')
def&nbsp;hallo():
&nbsp;&nbsp;&nbsp;&nbsp;name&nbsp;=&nbsp;request.GET.get('name')
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;not&nbsp;name:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name&nbsp;=&nbsp;'Unbekannter'
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name&nbsp;=&nbsp;escape(name)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;'Hallo&nbsp;{0}!'.format(name)

&nbsp;&nbsp;&nbsp;&nbsp;run(reloader=True)
</pre>

<div class="p"><!----></div>
<i>Listing: <a href="http://www.freiesmagazin.de/mobil/2011-02-listings/javasc_get.py">javasc_get.py</a></i>

<div class="p"><!----></div>
    Möchte man den Effekt testen, so sollte man mit beiden Code-Beispielen zum Beispiel die URL <a href="http://localhost:8080?name=<h1>Jochen</h1>"><tt style="font-size: 1.3em;">http://localhost:8080?name=&lt;h1&gt;Jochen&lt;/h1&gt;</tt></a> aufrufen.

<div class="p"><!----></div>
    Der Zugriff auf POST-Daten ist genauso möglich, allerdings muss man dann
<b><tt style="font-size: 1.3em;">method=POST</tt></b> setzen und <b><tt style="font-size: 1.3em;">request.POST.get()</tt></b> bzw. für Formular-Daten besser
<b><tt style="font-size: 1.3em;">request.forms.get()</tt></b> nutzen. Ein Beispiel dazu findet man im folgenden
    
Abschnitt zu Simple Template im Listing <b><tt style="font-size: 1.3em;">test_name.py</tt></b>.

<div class="p"><!----></div>
    
<h2>Simple Template</h2>

<div class="p"><!----></div>
In <i>Bottle</i> enthalten ist ebenfalls „Simple Template“, mit dem Vorlagen (engl.
„template“) generiert werden können. Vorlagen heißt hier, dass
diese Text enthalten, welcher entweder 1:1 wiedergegeben wird oder aber mit
Python-Befehlen kombiniert werden kann, die den Text dann ggf. manipulieren.
Weiterhin können Templates Werte entgegennehmen, welche dann innerhalb der
Vorlage verwendet werden können. Dazu ein einfaches Beispiel:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
#!/usr/bin/python
#&nbsp;-*-&nbsp;coding:&nbsp;utf-8&nbsp;-*-

from&nbsp;bottle&nbsp;import&nbsp;route,&nbsp;run,&nbsp;template

@route('/hallo/:name')
def&nbsp;hallo(name):
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;template('bsp_vorlage.tpl',&nbsp;name=name)

run(reloader=True)
</pre>

<div class="p"><!----></div>
<i>Listing: <a href="http://www.freiesmagazin.de/mobil/2011-02-listings/template.py">template.py</a></i>

<div class="p"><!----></div>
Hier wird als Rückgabewert der Route das Template <b><tt style="font-size: 1.3em;">bsp_vorlage.tpl</tt></b>
angegeben. An das Template wird die Variable <b><tt style="font-size: 1.3em;">name</tt></b> übergeben, die im Template
ebenfalls als <b><tt style="font-size: 1.3em;">name</tt></b> definiert ist. Die Vorlage sieht so aus:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
&lt;h1&#62;Hallo&nbsp;{{name}}!&lt;/h1&#62;
&lt;p&#62;Wie&nbsp;geht&nbsp;es&nbsp;dir?&lt;/p&#62;
&lt;p&#62;Dein&nbsp;Name&nbsp;wird&nbsp;so&nbsp;buchstabiert:&lt;/p&#62;
&lt;ul&#62;
&nbsp;&nbsp;%for&nbsp;buchstabe&nbsp;in&nbsp;name:
&lt;li&#62;{{buchstabe}}&lt;/li&#62;
&nbsp;&nbsp;%end
&lt;/ul&#62;
</pre>

<div class="p"><!----></div>
<i>Listing: <a href="http://www.freiesmagazin.de/mobil/2011-02-listings/bsp_vorlage.tpl">bsp_vorlage.tpl</a></i>

<div class="p"><!----></div>
Wie man sieht, bestehen einige Zeilen aus regulärem HTML. Möchte man im
Template Variablen benutzen, so müssen diese in doppelt geschweifte Klammern
eingeschlossen werden (wie z.&nbsp;B. <b><tt style="font-size: 1.3em;">{{name}}</tt></b>). Weiterhin können Templates
reguläre Python-Befehle enthalten. Diese müssen mit einem Prozentzeichen
eingeleitet werden. Weiterhin sind Schleifen, Bedingungen und ähnliches – im
Gegensatz zu regulärem Python – mit <b><tt style="font-size: 1.3em;">%end</tt></b> explizit zu schließen.

<div class="p"><!----></div>
Templates eignen sich z.&nbsp;B gut zur dynamischen Generierung von Formularen.
Dies zeigt die folgende kleine Applikation. Darin wird ein Eingabeformular
für Name und Alter generiert, welches dann gesendet wird. Die Funktion zu
der Route, die das Formular empfängt, prüft zuerst, ob ein Name
eingegeben wurde und nutzt bei positiver Prüfung ein weiteres Template
für die Ausgabe.

<div class="p"><!----></div>
Die Applikation sieht so aus:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
#!/usr/bin/python
#&nbsp;-*-&nbsp;coding:&nbsp;utf-8&nbsp;-*-
from&nbsp;bottle&nbsp;import&nbsp;route,&nbsp;run,&nbsp;template,&nbsp;request

@route('/eingabe')
def&nbsp;eingabe():
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;template('eingabe.tpl')

@route('/ausgabe',&nbsp;method='POST')
def&nbsp;ausgabe():
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;not&nbsp;request.forms.get('name'):
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;'Sie&nbsp;muessen&nbsp;einen&nbsp;Namen&nbsp;eingeben!'
&nbsp;&nbsp;&nbsp;&nbsp;else:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name&nbsp;=&nbsp;request.forms.get('name')
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alter&nbsp;=&nbsp;request.forms.get('alter')
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;template('ausgabe.tpl',name=name,alter=alter)

run(reloader=True)
</pre>

<div class="p"><!----></div>
<i>Listing: <a href="http://www.freiesmagazin.de/mobil/2011-02-listings/test_name.py">test_name.py</a></i>

<div class="p"><!----></div>
Die Vorlage für die Eingabe sieht so aus:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
&lt;form&nbsp;method="POST"&nbsp;action="/ausgabe"&#62;
&nbsp;Name:&nbsp;&lt;input&nbsp;name="name"&nbsp;type="text"&nbsp;length="20"&nbsp;maxlength="20"&#62;
&nbsp;Alter:&nbsp;&lt;select&nbsp;name="alter"&#62;
&nbsp;%for&nbsp;i&nbsp;in&nbsp;range(1,100):
&nbsp;&lt;option&#62;{{i}}&lt;/option&#62;
&nbsp;%end
&nbsp;&lt;/select&#62;
&nbsp;&lt;input&nbsp;type="submit"&nbsp;value="Senden"&nbsp;name="send"&#62;
&lt;/form&#62;
</pre>

<div class="p"><!----></div>
<i>Listing: <a href="http://www.freiesmagazin.de/mobil/2011-02-listings/eingabe.tpl">eingabe.tpl</a></i>

<div class="p"><!----></div>
Und die Vorlage für die Ausgabe so:

<div class="p"><!----></div>
    
<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
&lt;h1&#62;Herzlich&nbsp;Willkommen&lt;/h1&#62;
&lt;ul&#62;
&nbsp;&nbsp;&lt;li&#62;Name:&nbsp;{{name}}&lt;/li&#62;
&nbsp;&nbsp;&lt;li&#62;Alter:&nbsp;{{alter}}&lt;/li&#62;
&lt;/ul&#62;
</pre>

<div class="p"><!----></div>
<i>Listing: <a href="http://www.freiesmagazin.de/mobil/2011-02-listings/ausgabe.tpl">ausgabe.tpl</a></i>

<div class="p"><!----></div>
Im Programmcode für die Applikation sieht man auch, wie weiter oben bereits
besprochen, wie man mit Hilfe von <i>Bottle</i> Formulardaten aus POST-Daten
erhalten kann.

<div class="p"><!----></div>
Templates können ebenfalls ineinander eingebunden werden, und zwar mittels
<b><tt style="font-size: 1.3em;">%include</tt></b> Befehl. Dies kann beispielsweise so aussehen:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
%include&nbsp;html_kopf.tpl&nbsp;titel='Ein&nbsp;Beispiel'

&lt;h1&#62;Herzlich&nbsp;Willkommen&lt;/h1&#62;
&lt;ul&#62;
&nbsp;&nbsp;&lt;li&#62;Name:&nbsp;{{name}}&lt;/li&#62;
&nbsp;&nbsp;&lt;li&#62;Alter:&nbsp;{{alter}}&lt;/li&#62;
&lt;/ul&#62;

%include&nbsp;html_fuss.tpl
</pre>

<div class="p"><!----></div>
<i>Listing: <a href="http://www.freiesmagazin.de/mobil/2011-02-listings/include.tpl">include.tpl</a></i>

<div class="p"><!----></div>
Das Template <b><tt style="font-size: 1.3em;">html_kopf.tpl</tt></b> sieht so aus:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;"-//W3C//DTD&nbsp;HTML&nbsp;4.01//EN"&nbsp;"http://www.w3.org/TR/html4/loose.dtd"&#62;

&lt;html&#62;
&nbsp;&nbsp;&lt;head&#62;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv="content-type"&nbsp;content="text/html;&nbsp;charset=utf-8"&#62;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;title&#62;{{titel}}&lt;/title&#62;&lt;/head&#62;
&nbsp;&nbsp;&lt;body&#62;
</pre>

<div class="p"><!----></div>
<i>Listing: <a href="http://www.freiesmagazin.de/mobil/2011-02-listings/html_kopf.tpl">html_kopf.tpl</a></i>

<div class="p"><!----></div>
Das Template <b><tt style="font-size: 1.3em;">html_fuss.tpl</tt></b> sieht so aus:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
&nbsp;&nbsp;&nbsp;&nbsp;&lt;hr&#62;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&#62;Diese&nbsp;Seite&nbsp;ist&nbsp;&lt;a&nbsp;href="http://www.python.org"&#62;Python&lt;/a&#62;-powered&lt;/p&#62;
&nbsp;&nbsp;&lt;/body&#62;
&lt;/html&#62;
</pre>

<div class="p"><!----></div>
<i>Listing: <a href="http://www.freiesmagazin.de/mobil/2011-02-listings/html_fuss.tpl">html_fuss.tpl</a></i>

<div class="p"><!----></div>
So erzeugt die Ausgabeseite valides HTML. Der Vorteil ist: Man kann so einen allgemeinen Kopf und Fuß (z.&nbsp;B. inklusive CSS-Stil-Definitionen)
für alle Templates generieren.

<div class="p"><!----></div>

<h2>Weitere Möglichkeiten</h2>

<div class="p"><!----></div>
Dieser Artikel zeigt nicht alle Möglichkeiten und Funktionen von <i>Bottle</i>. So
ist es z.&nbsp;B. auch möglich, weitere Request-Daten aus dem HTML-Header zu
extrahieren sowie auf die Response-Daten, welche an den Browser zurückgesendet werden, Einfluss zu nehmen. Ebenfalls verfügbar sind Daten, die
aus der WSGI-Umgebung bezogen werden können. <i>Bottle</i> besitzt weiterhin einige
Funktionen zum Umgang mit Cookies – sowohl lesend als auch schreibend.
Außerdem kann das Programm anstelle von Text auch
JSON&nbsp;<a href="http://www.json.org">[15]</a> zurückliefern.

<div class="p"><!----></div>
Innerhalb von „Simple Template“ gibt es noch eine Funktion namens <b><tt style="font-size: 1.3em;">rebase</tt></b>,
welche eine noch weiterführende Verschachtelung von Vorlagen
unterstützt&nbsp;<a href="http://bottle.paws.de/docs/dev/stpl.html#simpletemplate-syntax">[16]</a>.

<div class="p"><!----></div>
Alle Funktionen und Möglichkeiten von <i>Bottle</i> werden in der
Dokumentation&nbsp;<a href="http://bottle.paws.de/docs/dev/tutorial.html#tutorial">[17]</a> und auch
in der API-Referenz&nbsp;<a href="http://bottle.paws.de/docs/dev/api.html">[18]</a> erläutert. Weiterhin
findet man im Internet ein recht ausführliches, einsteigerfreundliches, aber
englischsprachiges Beispiel für eine Applikation, basierend auf
<i>Bottle</i>&nbsp;<a href="http://bottle.paws.de/docs/dev/tutorial_app.html">[19]</a>.

<div class="p"><!----></div>

<h2>Alternativen</h2>

<div class="p"><!----></div>
Da WSGI der heutigen Standard für Webanwendungen ist, kann man quasi jedes
Python-Webframework nutzen&nbsp;<a href="http://wiki.python-forum.de/Web-Frameworks">[20]</a>. Da
die meisten davon aber komplexer sind als <i>Bottle</i>, kann die Lernkurve steiler
und der Aufwand höher sein. Einen ähnlichen Ansatz wie <i>Bottle</i> verfolgt das
ebenfalls aus dem deutschsprachigen Raum stammende
Flask&nbsp;<a href="http://www.pocoo.org/projects/flask/#flask">[21]</a>. Dieses setzt auf
Werkzeug&nbsp;<a href="http://www.pocoo.org/projects/werkzeug/">[22]</a> und
Jinja2&nbsp;<a href="http://www.pocoo.org/projects/jinja2/#jinja2">[23]</a> auf und ist entsprechend
etwas komplexer, bietet dafür aber auch mehr Möglichkeiten.

<div class="p"><!----></div>

<h2>Zusammenfassung</h2>

<div class="p"><!----></div>
<i>Bottle</i> bietet eine Sammlung von einfach und schnell zu nutzenden Klassen und
Methoden für WSGI-basierte Webapplikationen. Wer also in dieses Thema
einsteigen und seine erste webbasierte Internetanwendung in Python
programmieren möchte,  der ist mit <i>Bottle</i> sicherlich gut beraten. Mit Simple
Template ist weiterhin eine Klasse an Bord, mit der sich problemlos eigene
Vorlagen kreieren lassen. Zum Schluss sei noch angemerkt, dass Marcel Hellkamp, der Autor
von <i>Bottle</i>, Deutscher und auch im deutschsprachigen
Python-Forum&nbsp;<a href="http://www.python-forum.de">[24]</a> aktiv ist, sodass man dort bei
Fragen zu <i>Bottle</i> oftmals schnell und kompetent Hilfe bekommt.

<div class="p"><!----></div>
    <table align="left" border="1"><tr><td width="0" align="center">

<div style="background: #D8F2FF;"><b>Kurz erläutert: Was ist WSGI?</b><br />
„WSGI“ steht für „Web Server Gateway Interface“ und definiert eine
einheitliche Schnittstelle für Webanwendungen, die in Python programmiert
werden. In der WSGI-Spezifikation wird festgelegt, wie der Webserver bzw.
der Applikationsserver mit der Webapplikation kommunizieren soll. Der
Standard ist im Python Enhancement
Proposal 333&nbsp;<a href="http://www.python.org/dev/peps/pep-0333/">[25]</a> und, mit Ergänzungen für
Python 3, 3333&nbsp;<a href="http://www.python.org/dev/peps/pep-3333/">[26]</a> definiert. Python selbst
enthält eine Referenzimplementierung im Modul
<b><tt style="font-size: 1.3em;">wsgiref</tt></b>&nbsp;<a href="http://docs.python.org/library/wsgiref.html">[27]</a>.

<div class="p"><!----></div>
    </div></td></tr></table><!--hbox-->
<br clear="all" /><br />
<h2>Interview</h2>

<div class="p"><!----></div>
Es folgt nun ein Interview mit dem Entwickler von <i>Bottle</i>, Marcel Hellkamp.

<div class="p"><!----></div>
<font color="#595959"><b>-&#62;</b></font><b>
Jochen Schnelle: Marcel, erzähl doch mal, mit welcher Motivation und welchen Zielen du die
Entwicklung von <i>Bottle</i> überhaupt begonnen hast.
</b>

<div class="p"><!----></div>
<font color="#FF630A"><b>&lt;-</b></font>
Marcel Hellkamp: Ich war damals auf der Suche nach einem einfachen Framework für
Wochenendprojekte oder kleinere Experimente. Etwas Übersichtliches, Schnelles
und Unkompliziertes, das man in ein paar Sekunden aufsetzen und ohne große
Abhängigkeiten installieren kann. Die üblichen Verdächtigen (Django, TurboGears,
Pylons) kamen dafür nicht in Frage und die Alternativen (web.py, Werkzeug,
CherryPy) konnten mich auch nicht wirklich überzeugen.

<div class="p"><!----></div>
Die Idee des „micro“ Frameworks ist nicht neu. Ich habe mich also von „Sinatra“
(einem Ruby-Framework) inspirieren lassen und einfach angefangen. Aus einem
Experiment zu Lernzwecken wurde dann sehr schnell ein waschechtes
Open-Source-Projekt.


<div class="p"><!----></div>
<font color="#595959"><b>-&#62;</b></font><b>
Hättest du damit gerechnet, dass <i>Bottle</i> in so kurzer Zeit recht populär und
beliebt wird bzw. dass es überhaupt für einen größeren Kreis von Nutzer
interessant ist?
</b>

<div class="p"><!----></div>
<font color="#FF630A"><b>&lt;-</b></font>
Nein, überhaupt nicht. Ich habe <i>Bottle</i> für eine sehr spezielle Zielgruppe
geschrieben (nämlich mich) und war überrascht über den großen Zuspruch.
Inzwischen gibt es mit Flask sogar noch ein weiteres Framework, das den gleichen
Ansatz verfolgt. Anscheinend habe ich damit einen Nerv getroffen.


<div class="p"><!----></div>
<font color="#595959"><b>-&#62;</b></font><b>
Von der <i>Bottle</i> Version 0.6 auf 0.8 haben sich einige Kleinigkeiten an der API
geändert – als wie stabil würdest du die API aktuell bezeichnen?
</b>

<div class="p"><!----></div>
<font color="#FF630A"><b>&lt;-</b></font>
Der Sprung von 0.6 auf 0.8 war etwas holprig, daher auch die Lücke in der
Versionierung (0.7 existiert nicht). Inzwischen versuche ich, die API mindestens
eine Version lang abwärtskompatibel zu halten und Bugfixes auch für ältere
Versionen bereit zu stellen. Sollte sich also zukünftig etwas ändern, hat man
viel Zeit, darauf zu reagieren.


<div class="p"><!----></div>
<font color="#595959"><b>-&#62;</b></font><b>
Gibt es noch Funktionen oder Features, die du in kommenden Versionen von <i>Bottle</i>
 unbedingt unterbringen möchtest?
</b>

<div class="p"><!----></div>
<font color="#FF630A"><b>&lt;-</b></font>
Für die kommende Version 0.9 bekommt <i>Bottle</i> eine Plug-in-Schnittstelle und eine
verbesserte Template-Engine spendiert. Nutzer von Google AppEngine können sich
außerdem über ein paar Performance-Optimierungen freuen. Ansonsten ist <i>Bottle</i>
weitgehend komplett. Es soll schließlich ein Micro-Framework bleiben.


<div class="p"><!----></div>
<font color="#595959"><b>-&#62;</b></font><b>
Danke für das Interview!
</b>

<div class="p"><!----></div>
    <font color="#595959"><font size="+1">Links</font></font><br />
        
[1] <a href="http://www.python.org/"><tt style="font-size: 1.3em;">http://www.python.org/</tt></a><br />

<div class="p"><!----></div>
[2] <a href="http://www.wsgi.org/"><tt style="font-size: 1.3em;">http://www.wsgi.org/</tt></a><br />

<div class="p"><!----></div>
[3] <a href="http://bottle.paws.de/"><tt style="font-size: 1.3em;">http://bottle.paws.de/</tt></a><br />

<div class="p"><!----></div>
[4] <a href="http://pypi.python.org/pypi/setuptools"><tt style="font-size: 1.3em;">http://pypi.python.org/pypi/setuptools</tt></a><br />

<div class="p"><!----></div>
[5] <a href="https://github.com/defnull/bottle"><tt style="font-size: 1.3em;">https://github.com/defnull/bottle</tt></a><br />

<div class="p"><!----></div>
[6] <a href="http://docs.python.org/library/2to3.html"><tt style="font-size: 1.3em;">http://docs.python.org/library/2to3.html</tt></a><br />

<div class="p"><!----></div>
[7] <a href="http://httpd.apache.org/"><tt style="font-size: 1.3em;">http://httpd.apache.org/</tt></a><br />

<div class="p"><!----></div>
[8] <a href="http://code.google.com/p/modwsgi/"><tt style="font-size: 1.3em;">http://code.google.com/p/modwsgi/</tt></a><br />

<div class="p"><!----></div>
[9] <a href="http://bottle.paws.de/docs/dev/tutorial.html#deployment"><tt style="font-size: 1.3em;">http://bottle.paws.de/docs/dev/tutorial.html#deployment</tt></a><br />

<div class="p"><!----></div>
[10] <a href="http://docs.python.org/library/wsgiref.html#module-wsgiref.simple_server"><tt style="font-size: 1.3em;">http://docs.python.org/library/wsgiref.html#module-wsgiref.simple_server</tt></a><br />

<div class="p"><!----></div>
[11] <a href="http://en.wikipedia.org/wiki/Python_syntax_and_semantics#Decorators"><tt style="font-size: 1.3em;">http://en.wikipedia.org/wiki/Python_syntax_and_semantics#Decorators</tt></a><br />

<div class="p"><!----></div>
[12] <a href="http://de.selfhtml.org/servercgi/server/httpstatuscodes.htm"><tt style="font-size: 1.3em;">http://de.selfhtml.org/servercgi/server/httpstatuscodes.htm</tt></a><br />
 [13] <a href="http://de.wikipedia.org/wiki/Internet_Media_Type"><tt style="font-size: 1.3em;">http://de.wikipedia.org/wiki/Internet_Media_Type</tt></a><br />

<div class="p"><!----></div>
[14] <a href="http://docs.python.org/library/mimetypes.html"><tt style="font-size: 1.3em;">http://docs.python.org/library/mimetypes.html</tt></a><br />

<div class="p"><!----></div>
[15] <a href="http://www.json.org/"><tt style="font-size: 1.3em;">http://www.json.org/</tt></a><br />

<div class="p"><!----></div>
[16] <a href="http://bottle.paws.de/docs/dev/stpl.html#simpletemplate-syntax"><tt style="font-size: 1.3em;">http://bottle.paws.de/docs/dev/stpl.html#simpletemplate-syntax</tt></a><br />

<div class="p"><!----></div>
[17] <a href="http://bottle.paws.de/docs/dev/tutorial.html#tutorial"><tt style="font-size: 1.3em;">http://bottle.paws.de/docs/dev/tutorial.html#tutorial</tt></a><br />

<div class="p"><!----></div>
[18] <a href="http://bottle.paws.de/docs/dev/api.html"><tt style="font-size: 1.3em;">http://bottle.paws.de/docs/dev/api.html</tt></a><br />

<div class="p"><!----></div>
[19] <a href="http://bottle.paws.de/docs/dev/tutorial_app.html"><tt style="font-size: 1.3em;">http://bottle.paws.de/docs/dev/tutorial_app.html</tt></a><br />

<div class="p"><!----></div>
[20] <a href="http://wiki.python-forum.de/Web-Frameworks"><tt style="font-size: 1.3em;">http://wiki.python-forum.de/Web-Frameworks</tt></a><br />

<div class="p"><!----></div>
[21] <a href="http://www.pocoo.org/projects/flask/#flask"><tt style="font-size: 1.3em;">http://www.pocoo.org/projects/flask/#flask</tt></a><br />

<div class="p"><!----></div>
[22] <a href="http://www.pocoo.org/projects/werkzeug/"><tt style="font-size: 1.3em;">http://www.pocoo.org/projects/werkzeug/</tt></a><br />

<div class="p"><!----></div>
[23] <a href="http://www.pocoo.org/projects/jinja2/#jinja2"><tt style="font-size: 1.3em;">http://www.pocoo.org/projects/jinja2/#jinja2</tt></a><br />

<div class="p"><!----></div>
[24] <a href="http://www.python-forum.de/"><tt style="font-size: 1.3em;">http://www.python-forum.de/</tt></a><br />

<div class="p"><!----></div>
[25] <a href="http://www.python.org/dev/peps/pep-0333/"><tt style="font-size: 1.3em;">http://www.python.org/dev/peps/pep-0333/</tt></a><br />

<div class="p"><!----></div>
[26] <a href="http://www.python.org/dev/peps/pep-3333/"><tt style="font-size: 1.3em;">http://www.python.org/dev/peps/pep-3333/</tt></a><br />

<div class="p"><!----></div>
[27] <a href="http://docs.python.org/library/wsgiref.html"><tt style="font-size: 1.3em;">http://docs.python.org/library/wsgiref.html</tt></a><br />

<div class="p"><!----></div>
            
<table border="1">
<tr><td colspan="1" align="center"><font size="+0"><b>Autoreninformation</b></font></td></tr>
<tr><td align="left"><b>Jochen Schnelle</b>
programmiert selber webbasierte Anwendungen für das
Firmen-Intranet. Diese nutzen vor allem die Routingmöglichkeiten von Bottle
sowie Simple Template für die Vorlagen.
</td></tr>
<tr><td align="left">    </td></tr></table>



<div class="p"><!----></div>
            <a href="http://www.freiesmagazin.de/comment/reply/214?edit[subject]=Bottle#comment-form"><i>Diesen Artikel kommentieren</i></a><br /><br />
        <a href="freiesMagazin-2011-02-bilder.html#index">Zum Index</a><br /><hr />

<div class="p"><!----></div>
<h1><font color="#595959"><a name="11_02_sketch">Sketch – 3-D-Grafikcode für LaTeX erstellen</a><a name="11_02_sketch">
</a></font></h1>von Stefan Apke        
<div class="p"><!----></div>
<b>D</b><b>as schlanke Konsolenprogramm <i>Sketch</i>&nbsp;<a href="http://www.frontiernet.net/~eugene.ressler/">[1]</a>
bedient sich einer kleinen Szenenbeschreibungssprache und kann mit
auf mathematisch-geometrischen Verfahren beruhenden Berechnungen 3-D-Szenen so
abbilden, dass ein Code generiert wird, der in LaTeX mit dem
Paket pstricks&nbsp;<a href="http://www.tug.org/PSTricks/main.cgi/">[2]</a>
oder mit dem Paket PGF&nbsp;<a href="http://sourceforge.net/projects/pgf/">[3]</a> und dem Frontend TikZ
genutzt werden kann.</b>

<div class="p"><!----></div>
Wer bei <i>Sketch</i> ausschließlich an Didi Hallervorden und andere
Konsorten denkt, liegt
gänzlich verkehrt, denn er denkt eindimensional. Wenn man sich aber der Mühe unterzieht,
mehrdimensional zu denken und dann womöglich – beruflich oder privat – eine
Umrisszeichnung (engl.: sketch) erstellen möchte oder eben muss, dann kann man
<i>Sketch</i> einsetzen. <i>Sketch</i> ist ein schlankes Programm, das, auf mathematisch basierter
Grundlage, die Erstellung von Illustrationen ohne jeglichen Schnickschnack
anbieten kann:

<div class="p"><!----></div>
„<em>We wanted to produce finely wrought, mathematically-based illustrations with
no extraneous detail.</em>“ (Eugene („Gene“) K. Ressler: „Sketch. Simple 3D
sketching“, 2010/08/09, S. 1.; Datei: sketch.pdf&nbsp;<a href="http://www.frontiernet.net/~eugene.ressler/sketch.pdf">[4]</a>)

<div class="p"><!----></div>
So können einfache 3-D-Szenen in statische Zeichnungen konvertiert
werden. Der Artikel und die Beispiele sollen einen Überblick darüber geben,
was <i>Sketch</i> alles liefern kann.

<div class="p"><!----></div>
    <img border="0" src="freiesMagazin-2011-02-bilder-Dateien/sketch-haus.png" /><br /><em>Mit <i>Sketch</i> erstelltes Bild. (Code siehe Handbuch&nbsp;<a href="http://www.frontiernet.net/~eugene.ressler/sketch.html#Overview">[5]</a>)</em><br />

<div class="p"><!----></div>
Interessant an dem Programm ist, dass es Code generiert, der entweder wie beim
Paket pstricks oder wie beim Paket PGF mit dem Frontend TikZ direkt im
LaTeX-Dokument nutzbar ist. <i>Sketch</i> besitzt eine kleine
Szenenbeschreibungssprache, die wie pstricks aufgebaut ist, sodass es dem
pstricks-Kundigen leicht fällt, sie zu erlernen. Für PGF mit dem Frontend TikZ
sind kleinere Anpassungen vorzunehmen.

<div class="p"><!----></div>
Die Pakete PGF (und TikZ ist als Frontend dessen Bestandteil) sind über die
Paketverwaltung z.&nbsp;B. unter Ubuntu installierbar – genauso wie
    
das Paket pstricks als
Bestandteil der jeweiligen LaTeX-Distribution verfügbar sein sollte.

<div class="p"><!----></div>

<h2>Perspektive</h2>

<div class="p"><!----></div>
Der Programmautor (Eugene K. Ressler) weist in seinem Handbuch
(„Sketch. Simple 3D sketching“, 2010/08/09, S.&nbsp;27, Datei: sketch.pdf
&nbsp;<a href="http://www.frontiernet.net/~eugene.ressler/sketch.pdf">[4]</a>)
darauf hin, dass bereits Albrecht Dürer die auf
mathematisch-geometrischen Verfahren beruhende Zentralperspektivdarstellung
kannte (und hierüber 1525 ein Buch schrieb, wie in der Wikipedia zu lesen
ist&nbsp;<a href="http://de.wikipedia.org/wiki/Perspektive#Geschichte">[6]</a>).

<div class="p"><!----></div>

<div class="p"><!----></div>

<div class="p"><!----></div>
Die Kenntnis der Perspektive ist jedoch um einige Jahrhunderte älter. So berichtet zum
Beispiel der Autor Al Seckel in seinem Buch „Unglaubliche optische Illusionen“ davon,
dass der griechische Parthenon (gebaut im 5. Jh. v. Chr.) eine der größten optischen Illusionen in sich
birgt, die sogenannte Gegenperspektive, mit der unserer Art, die Welt
wahrzunehmen, entgegengewirkt wird, indem

<div class="p"><!----></div>
„<em>… die Säulen nach hinten zu immer höher gebaut und die Abstände
zwischen ihnen vergrößert [werden], sodass sie von einem fixen Blickpunkt aus
(der gesteuert werden muss) scheinbar dieselbe Höhe und Entfernung zueinander
aufweisen.</em>“ (Al Seckel: „Unglaubliche optische Illusionen“, Tosa Verlag, 2005, S.&nbsp;202 f.)

<div class="p"><!----></div>
Mit der perspektivischen Darstellung sollte man sich ein wenig
auseinandersetzen, um Verständnis für Zeichnungen zu entwickeln, die sich
nicht ausschließlich durch ihre Windschiefe auszeichnen.

<div class="p"><!----></div>

<h2>Installation und Start mit pspicture</h2>

<div class="p"><!----></div>
Nach der Installation von <i>Sketch</i> (z.&nbsp;B. über die Paketverwaltung bei Ubuntu)
erzeugt man zunächst einen neuen Ordner und erstellt hierin mit einem
beliebigen Editor eine Datei z.&nbsp;B. mit dem Namen <b><tt style="font-size: 1.3em;">a.sk</tt></b>. Als deren Inhalt soll
nun als erstes, sehr einfaches Beispiel (es lehnt sich an ein ähnliches im
Handbuch an) ein unregelmäßiges
Tetraeder&nbsp;<a href="http://de.wikipedia.org/wiki/Tetraeder">[7]</a> geschaffen werden.

<div class="p"><!----></div>
Um nun zu sehen, wie sich das gute Stück bei Drehungen im Raum verhält, wird es
eingefärbt und gepierct, also von einer Stange durchbohrt. Dazu benötigt man
insgesamt vier Dreiecke und eine einfache Linie. Zunächst werden vier Punkte
definiert (etwa die, die man sehen würde, wenn man direkt über einer Pyramide
schweben würde); drei Eckpunkte und einen in der Mitte:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
def&nbsp;p1&nbsp;(0,0,1)&nbsp;def&nbsp;p2&nbsp;(1,0,0)
def&nbsp;p3&nbsp;(0,1,0)&nbsp;def&nbsp;p4&nbsp;(-.3,-.5,-.8)
</pre>

<div class="p"><!----></div>
Die in runden Klammern umschlossenen und kommaseparierten Zahlen beziehen sich
auf die Werte der x-, y- und z-Achse. Wer Probleme mit dem Koordinatensystem
hat, der möge sich bei Mathe-Online&nbsp;<a href="http://www.mathe-online.at/mathint/zeich/i.html">[8]</a>
informieren.

<div class="p"><!----></div>
Da <i>Sketch</i> keine festen Körper auf Anweisung des Anwenders hervorzaubern kann,
müssen Flächen erstellt werden, die dann wiederum zu Körpern
zusammenstellbar sind.

<div class="p"><!----></div>
Zunächst wird nun mit drei von den oben definierten Punkten ein einfaches
bläuliches Dreieck (<b><tt style="font-size: 1.3em;">polygon...</tt></b>) mit Name <b><tt style="font-size: 1.3em;">pierced_triangle</tt></b> erstellt (bzw. zunächst nur definiert) mitsamt einer roten Linie (<b><tt style="font-size: 1.3em;">line...</tt></b>), die das Dreieck
durchstößt, wobei die gesamte Definition in geschweifte Klammern gefasst
wird, da mehrere Anweisungen (Block) enthalten sind:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
def&nbsp;pierced_triangle&nbsp;{
&nbsp;&nbsp;polygon[fillcolor=blue!30](p1)(p2)(p3)
&nbsp;&nbsp;line[linecolor=red](-1,-1,-1)(1,1,1)
}
</pre>

<div class="p"><!----></div>
Wichtig ist, sich zu merken, dass – um die Ressourcen zu schonen – im
Normalfall lediglich die für den Betrachter sichtbaren Seiten des Polygons
gezeichnet werden, nicht die im Hintergrund verdeckt liegenden. Für ein im
Vordergrund befindliches polygonales Objekt  werden die
Eckpunkte im Gegenuhrzeigersinn angegeben, ansonsten wird es nicht sichtbar
sein. Mit der Zeile

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
polygon[fillcolor=blue!30](p1)(p3)(p2)
</pre>

<div class="p"><!----></div>
in der obigen Definition wäre das Dreieck nun erst einmal unsichtbar, es sei denn, man würde
es mit der Option <b><tt style="font-size: 1.3em;">[cull=false]</tt></b> (die man sich merken sollte)
wieder auf dem Bildschirm sichtbar machen.

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
polygon[cull=false,fillcolor=blue!30](p1)(p3)(p2)
</pre>

<div class="p"><!----></div>
Doch um die Zeichnung schließlich zu erzeugen, genügt nicht allein eine Definition. Sie
muss innerhalb der Datei auch noch referenziert werden. Dazu wird der Name in
geschweifte Klammern (ohne Leerzeichen) eingefasst:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
{pierced_triangle}
</pre>

<div class="p"><!----></div>
Nachdem nun in der Beispieldatei <b><tt style="font-size: 1.3em;">a.sk</tt></b> die vier Punkte definiert, das
aufgespießte Dreieck und
    
die Referenzierung eingefügt wurden, kann das
vorläufige Ergebnis betrachtet werden, indem im Terminal der folgende Befehl eingegeben
wird:

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
$&nbsp;sketch&nbsp;a.sk&nbsp;-o&nbsp;a.tex
</pre>

<div class="p"><!----></div>

<div class="p"><!----></div>
Wenn man die Datei <b><tt style="font-size: 1.3em;">a.tex</tt></b> öffnet, sieht man, dass tatsächlich eine
pspicture-Umgebung mit dem entsprechenden Inhalt erzeugt wurde. Die gesamte
Umgebung kann nun kopiert und in ein LaTeX-Dokument eingefügt werden, oder
aber als Datei per <b><tt style="font-size: 1.3em;">\input{a}</tt></b> in das LaTeX-Dokumente
integriert werden. Falls man aber
    
eine schnell sichtbare eigenständige Version benötigt, dann setzt man folgenden
Befehl in der Kommandozeile ab.

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
$&nbsp;sketch&nbsp;-Te&nbsp;a.sk&nbsp;-o&nbsp;a.tex
</pre>

<div class="p"><!----></div>

<div class="p"><!----></div>
Hierbei steht <b><tt style="font-size: 1.3em;">-T</tt></b> für die Produktion eines kompletten
LaTeX-Dokumentes und das angehängte <b><tt style="font-size: 1.3em;">e</tt></b> für das DIN-A4 Papierformat
(<b><tt style="font-size: 1.3em;">man sketch</tt></b> zeigt die Schnellhilfe an).

<div class="p"><!----></div>
Danach muss noch aus der LaTeX-Datei <b><tt style="font-size: 1.3em;">a.tex</tt></b> eine dvi- bzw. eine ps- und
pdf-Datei erstellt oder umgewandelt werden (also die normale Vorgehensweise
für einen LaTeX-Nutzer, der mittels der pspicture-Umgebung Zeichnungen
erstellen möchte).

<div class="p"><!----></div>

<h2>Variation für PGF/TikZ</h2>

<div class="p"><!----></div>
Nun ist es aber keineswegs so, dass man mit <i>Sketch</i> nur pspicture-Code erstellen
kann, der mit LaTeX nutzbar ist. Mit <i>Sketch</i> kann auch ein Markup-Äquivalent
für das LaTeX-Paket PGF mit dem Frontend TikZ erzeugt werden. Hierfür würde
die bislang erstellte Datei ein wenig anders aussehen (andere
Optionsbezeichnungen wie <b><tt style="font-size: 1.3em;">fill</tt></b> statt <b><tt style="font-size: 1.3em;">fillcolor</tt></b> und vor allem die Zeile mit
<b><tt style="font-size: 1.3em;">global</tt></b>):

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
def&nbsp;p1&nbsp;(0,0,1)&nbsp;def&nbsp;p2&nbsp;(1,0,0)
def&nbsp;p3&nbsp;(0,1,0)&nbsp;def&nbsp;p4&nbsp;(-.3,-.5,-.8)

def&nbsp;pierced_triangle&nbsp;{
polygon[fill=blue!30](p1)(p2)(p3)
line[draw=red](-1,-1,-1)(1,1,1)
}
{pierced_triangle}

global&nbsp;{&nbsp;language&nbsp;tikz&nbsp;}
</pre>

<div class="p"><!----></div>
Mit den nächsten beiden Kommandos kommt man nun dem oben erwähnten
Ziel näher. Durch

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
$&nbsp;sketch&nbsp;a.sk&nbsp;-o&nbsp;a.tex
</pre>

<div class="p"><!----></div>

<div class="p"><!----></div>
wird hier ebenfalls der singuläre Code erzeugt und mit dem folgenden
Kommando eine komplette LaTeX-Version.

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
$&nbsp;sketch&nbsp;-Te&nbsp;a.sk&nbsp;-o&nbsp;a.tex
</pre>

<div class="p"><!----></div>

<div class="p"><!----></div>

<h2>Eigene Dokumentvorlage</h2>

<div class="p"><!----></div>
Da die „betriebseigene“ Dokumentvorlage vielleicht nicht unbedingt die Billigung des
gemeinen Anwenders finden kann, gibt es die Möglichkeit, sich eine eigene
Dokumentvorlage zu erstellen und mit der Option <b><tt style="font-size: 1.3em;">-t</tt></b> Vorlagedatei einzubinden.
Das wäre zum Beispiel auf folgende Art und Weise möglich:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
\documentclass[a4paper,12pt]{scrartcl}
\usepackage[ngerman]{babel}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{textcomp}
\usepackage{lmodern}
\usepackage{xcolor}
\usepackage{tikz}
\usetikzlibrary{arrows,shapes,patterns,backgrounds}
\usetikzlibrary{decorations.pathmorphing}
\usepackage{amsmath,amsthm,amsfonts,amssymb}
\pagestyle{empty}
\begin{document}
%%SKETCH_OUTPUT%%
\end{document}
</pre>

<div class="p"><!----></div>
<i>Listing: <a href="http://www.freiesmagazin.de/mobil/2011-02-listings/sketch-template.tex">sketch-template.tex</a></i>

<div class="p"><!----></div>
An der Stelle, an der <b><tt style="font-size: 1.3em;">%%SKETCH_OUTPUT%%</tt></b> steht (und übrigens nicht, wie derzeit
in der man-page zu lesen ist: <b><tt style="font-size: 1.3em;">%SKETCH_OUTPUT%</tt></b>) wird dann der generierte Code
eingefügt.

<div class="p"><!----></div>
Wenn die Vorlagedatei <b><tt style="font-size: 1.3em;">vorlage.tex</tt></b> heißt, dann muss der Befehl für die
Beispieldatei <b><tt style="font-size: 1.3em;">a.sk</tt></b> also folgendermaßen lauten:

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
$&nbsp;sketch&nbsp;-Te&nbsp;-t&nbsp;vorlage.tex&nbsp;-o&nbsp;a.tex&nbsp;a.sk
</pre>

<div class="p"><!----></div>

<div class="p"><!----></div>

<h2>Das Beispiel komplettieren</h2>

<div class="p"><!----></div>
Aufmerksame Beobachter registrieren, dass bei der Erzeugung der Datei <b><tt style="font-size: 1.3em;">a.tex</tt></b>
eine Warnmeldung ausgegeben wird. Und bei dieser Warnmeldung wird
offensichtich,  dass der Punkt <b><tt style="font-size: 1.3em;">p4</tt></b> nirgendwo referenziert
worden ist. Bislang wurde der Punkt noch nicht verwendet. Das soll sich nun
ändern.

<div class="p"><!----></div>
Dazu werden  in die oben angegebene Definition <b><tt style="font-size: 1.3em;">def pierced_triangle</tt></b> jetzt noch drei
Zeilen eingefügt, die jeweils ein weiteres Dreieck erstellen (bei Verwendung von pspicture muss <b><tt style="font-size: 1.3em;">fillcolor</tt></b> statt <b><tt style="font-size: 1.3em;">fill</tt></b> eingesetzt werden):

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
%&nbsp;unten
polygon[fill=green!30](p1)(p4)(p2)
%&nbsp;links
polygon[fill=yellow!30](p1)(p3)(p4)
%&nbsp;Rueckseite
polygon[fill=lightgray](p3)(p2)(p4)
</pre>

<div class="p"><!----></div>
Damit ist das Ziel erreicht und das Tetraeder schlussendlich erstellt.

<div class="p"><!----></div>

<h2>Räumliches Vorstellungsvermögen</h2>

<div class="p"><!----></div>
Das Beeindruckende an einem Programm wie <i>Sketch</i> ist, dass, nachdem man sich der
Mühe unterzogen hat, eine Zeichnung zu erstellen („programmieren“), mit
minimalem Aufwand die gesamte Konstruktion nach Belieben verschoben, dupliziert
und geändert werden kann.

<div class="p"><!----></div>
    <img border="0" src="freiesMagazin-2011-02-bilder-Dateien/sketch-fragezeichen.png" /><br /><em>Tetraeder, jeweils 45° um die Abszisse gedreht.</em><br />

<div class="p"><!----></div>

<div class="p"><!----></div>
Und natürlich kann man bei den erzeugten Drehbewegungen im
x/y/z-Raum sehr schnell die Orientierung verlieren und bass erstaunt
sein, wie schön präzise (oder auch verwirrend) so ein computergeneriertes Ergebnis
sein kann. Die obige Abbildung zeigt die Drehbewegung des
eben erstellten Tetraeders in 45°-Schritten um die
    
Abszisse gedreht, mit dem
Ursprung (0,0,0) als Rotationszentrum.

<div class="p"><!----></div>
Bereits bei einer solch minimalistischen Konstruktion kommt man bei den selbst
veranlassten Drehbewegungen schnell ins Grübeln. Hier gilt es, sich die
Rechte-Hand-Regel&nbsp;<a href="http://de.wikipedia.org/wiki/Drei-Finger-Regel">[9]</a> vor Augen zu
führen, denn sie gilt bei <i>Sketch</i>.

<div class="p"><!----></div>
Wenn man die flache rechte Hand mit der
Innenseite vor sein Gesicht hält, der Daumen nach rechts weist und man nun
Zeige- und Mittelfinger untereinander und zum Daumen in eine 90°-Winkelung
bringt, sodass nun alle drei Finger in Richtung einer Koordinatenachse stehen,
dann bedeutet eine positive Drehung entlang der x-Achse ein Kippen der Hand in
Richtung des Betrachters. Eine 90° Drehung bewirkt, dass der Zeigefinger nun
auf das Gesicht und der Mittelfinger auf den Fußboden weist. Wenn man
nun noch einmal die Abbildung betrachtet, werden die Drehungen auch  verständlicher.

<div class="p"><!----></div>
Um dem eben gezeigten Beispiel ein solches weiteres Tetraeder anzufügen, das wie in
der Abbildung gedreht (<b><tt style="font-size: 1.3em;">rotate</tt></b>) und etwas versetzt (<b><tt style="font-size: 1.3em;">translate</tt></b>, 2,5 Einheiten
nach rechts und 2 Einheiten nach oben) erscheinen soll, wird dies (vor der
Zeile <b><tt style="font-size: 1.3em;">global...</tt></b>, wenn der erzeugte Code für PGF/TikZ nutzbar sein soll)
angehängt:

<div class="p"><!----></div>

<pre style="background: rgb(255, 255, 229); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
put&nbsp;{&nbsp;rotate(45,&nbsp;(0,0,0),&nbsp;[1,0,0])
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;then&nbsp;translate([2.5,2,0])&nbsp;}&nbsp;{pierced_triangle}
</pre>

<div class="p"><!----></div>

<h2>Empfehlenswerte Beispiele</h2>

<div class="p"><!----></div>
Das Handbuch zeigt darüber hinaus auch sehr gute Beispiele, die allerdings fast vollständig auf
pstricks ausgerichtet sind. Man sollte es deshalb auf keinen Fall versäumen, sich die
mitgelieferten Komplettbeispiele anzuschauen. Diese Beispiele können sich z.&nbsp;B. im Verzeichnis
<b><tt style="font-size: 1.3em;">/usr/share/doc/sketch-doc/examples</tt></b> befinden.

<div class="p"><!----></div>
An diesem Ort sind auch mehrere Beispiele insbesondere zu PGF/TikZ zu finden. Von Kjell Magne Fauske (seine Webseite ist
– auch einschlägig – empfehlenswert&nbsp;<a href="http://www.fauskes.net/nb/introduction-to-sketch/">[10]</a>)
stammen die schönen Beispiele <b><tt style="font-size: 1.3em;">km-denavit.sk</tt></b> und
<b><tt style="font-size: 1.3em;">km-puma.sk</tt></b> und von David Bremner das
interessante Beispiel <b><tt style="font-size: 1.3em;">cube.sk</tt></b>.

<div class="p"><!----></div>
Ein sehr beeindruckendes Beispiel stammt vom Programmautor selbst und ist in –
diesem nicht zuzurechnenden/anzulastenden (vgl. die Äußerung in der Datei
<b><tt style="font-size: 1.3em;">hand.sk</tt></b>: „<em>I am not responsible for …</em>“) – Abänderungen in der
nun folgenden Abbildung „Mit <i>Sketch</i> erstellte Hand” zu sehen.

<div class="p"><!----></div>
    <img border="0" src="freiesMagazin-2011-02-bilder-Dateien/sketch-eisenhand.png" /><br /><em>Mit <i>Sketch</i> erstellte Hand.</em><br />

<div class="p"><!----></div>

<h2>WYSIWYG</h2>

<div class="p"><!----></div>
<i>Sketch</i> ist darüberhinaus nicht nur für den direkten Gebrauch in LaTeX nutzbar, sondern – als Ergebnis der LaTeX-Anwendung – auch in
WYSIWYG-Manier&nbsp;<a href="http://de.wikipedia.org/wiki/WYSIWYG">[11]</a>
über die Nutzung des verlustfrei skalierbaren PDF-Formats.

<div class="p"><!----></div>
    Hier wurden die folgenden Komponenten genutzt:

<div class="p"><!----></div>

<ul>
<li> Die beiden Beispieldateien <b><tt style="font-size: 1.3em;">sphere.sk</tt></b> und <b><tt style="font-size: 1.3em;">km-ssbl.sk</tt></b> aus dem Verzeichnis
<b><tt style="font-size: 1.3em;">/usr/share/doc/sketch-doc/examples</tt></b> als Ideen-Grundlage für eine
<i>Sketch</i>-Datei.
<div class="p"><!----></div>
</li>

<li> Das offizielle GNU-Logo&nbsp;<a href="http://www.gnu.org/graphics/gnusvgart.html">[12]</a> von
Victor Siame (Free Art License&nbsp;<a href="http://artlibre.org/licence/lal/en">[13]</a>).
<div class="p"><!----></div>
</li>

<li> Das Programm Ipe (für die Nutzung vgl. den Artikel „Der
Grafikeditor Ipe“, <b><font color="#595959">freies</font></b><font color="#FF630A">Magazin</font> 01/2011&nbsp;<a href="http://www.freiesmagazin.de/freiesMagazin-2011-01">[14]</a>).

<div class="p"><!----></div>
</li>
</ul>

<div class="p"><!----></div>
Bevor mit Ipe  zur
WYSIWYG-Bearbeitung angesetzt werden kann, muss zuvor die SVG-Datei mit dem
GNU-Logo in ein für Ipe nutzbares Format gewandelt (hierfür die Datei
svgtoipe&nbsp;<a href="http://sourceforge.net/projects/ipe7/files/tools/">[15]</a> in den aktuellen
Ordner kopieren) werden:

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
$&nbsp;python&nbsp;./svgtoipe&nbsp;'official&nbsp;gnu.svg'
</pre>

<div class="p"><!----></div>

<div class="p"><!----></div>
Sobald die für <i>Sketch</i> notwendige Datei, z.&nbsp;B. <b><tt style="font-size: 1.3em;">a.sk</tt></b>, erstellt und passend
bearbeitet wurde, kann, nachdem mit

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
$&nbsp;sketch&nbsp;-Te&nbsp;a.sk&nbsp;-o&nbsp;a.tex
</pre>

<div class="p"><!----></div>

<div class="p"><!----></div>
eine TEX-Datei erstellt wurde und mit dieser wiederum eine PDF-Datei, jene nun
in ein für Ipe verwendbares Format konvertiert werden:

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
$&nbsp;pdftoipe&nbsp;a.pdf
</pre>

<div class="p"><!----></div>

<div class="p"><!----></div>
    <img border="0" src="freiesMagazin-2011-02-bilder-Dateien/sketch-gnu_mit_globus.png" /><br /><em>Mit <i>Sketch</i> erstellte PDF-Datei in WYSIWYG-Manier nutzen.</em><br />

<div class="p"><!----></div>
Der Rest ist zeichnerische Basisarbeit: Die für Ipe lesbaren Dateien hiermit
öffnen, das Benötigte markieren und kopieren. Dann das Kopierte idealerweise
über „<em>File&nbsp;-&#62;&nbsp;New Window</em>“ in ein neues Ipe-Fenster einfügen und abspeichern.
In der neuen Ipe-Datei können die eingefügten Teile nach Belieben skaliert,
gedreht, eingefärbt und – bei Bedarf – mit viel Gedöns ausgeschmückt
werden, wobei die Ausschmückungen entweder mit den Bordmitteln von Ipe oder
aber über eine der oben geschilderten oder anderweitige
Konvertiermöglichkeiten bezogen werden können.

<div class="p"><!----></div>

<h2>Fazit</h2>

<div class="p"><!----></div>
Der Einsatz des Programms <i>Sketch</i>, das grafisch nutzbaren LaTeX-Code zur
Erstellung von 3-D-Objekten erzeugen kann, nutzt vor allem denjenigen, die
bereits über LaTeX-Grundkenntnisse verfügen, oder gewillt sind sie sich
anzueignen. Notwendig sind jedoch nur die elementaren Kenntnisse des
LaTeX-Einsatzes zur Erzeugung von Dateien und die Umwandlung derselben, da
<i>Sketch</i> vollkommen eigenständig nutzbare LaTeX-Dateien erstellen kann. Aus
diesen wiederum lassen sich verlustfrei skalierbare PDF-Dateien erstellen, die
im (insbesondere – aber nicht nur – für Anfänger nützlichen) problemlos
handhabbaren WYSIWYG-Verfahren mit dem Programm Ipe nutzbringend einsetzbar
sind.

<div class="p"><!----></div>
Um sinnvoll 3-D-Grafiken mit <i>Sketch</i> erstellen zu können, sollte man das
Handbuch (derzeit brutto 42 Seiten) durcharbeiten und die mitgelieferten
Beispieldateien unbedingt zu Rate ziehen.

<div class="p"><!----></div>
Nicht nur für Didi Hallervorden&nbsp;&amp;&nbsp;Co. gilt: Das Erstellen von Sketchen ist
eine ernsthafte Angelegenheit – kleiner Sketch, viel Vorarbeit.

<div class="p"><!----></div>
        
<table border="1">
<tr><td colspan="1" align="center"><font size="+0"><b>Autoreninformation</b></font></td></tr>
<tr><td align="left"><b>Stefan Apke</b>
schätzt Sketche nicht nur von Didi
Hallervorden&nbsp;&amp;&nbsp;Co. Wer mit Sketch „Sketche“ erstellt, der kann
darüber durchaus herzlich lachen, denn manche der frühen Eigenwerke werden
„absurd im Raume stehen“ oder gar nicht richtig sichtbar sein.
</td></tr>
<tr><td align="left">    </td></tr></table>



<div class="p"><!----></div>
    <font color="#595959"><font size="+1">Links</font></font><br />
        
[1] <a href="http://www.frontiernet.net/~eugene.ressler/"><tt style="font-size: 1.3em;">http://www.frontiernet.net/~eugene.ressler/</tt></a><br />

<div class="p"><!----></div>
[2] <a href="http://www.tug.org/PSTricks/main.cgi/"><tt style="font-size: 1.3em;">http://www.tug.org/PSTricks/main.cgi/</tt></a><br />

<div class="p"><!----></div>
[3] <a href="http://sourceforge.net/projects/pgf/"><tt style="font-size: 1.3em;">http://sourceforge.net/projects/pgf/</tt></a><br />

<div class="p"><!----></div>
[4] <a href="http://www.frontiernet.net/~eugene.ressler/sketch.pdf"><tt style="font-size: 1.3em;">http://www.frontiernet.net/~eugene.ressler/sketch.pdf</tt></a><br />

<div class="p"><!----></div>
[5] <a href="http://www.frontiernet.net/~eugene.ressler/sketch.html#Overview"><tt style="font-size: 1.3em;">http://www.frontiernet.net/~eugene.ressler/sketch.html#Overview</tt></a><br />

<div class="p"><!----></div>
[6] <a href="http://de.wikipedia.org/wiki/Perspektive#Geschichte"><tt style="font-size: 1.3em;">http://de.wikipedia.org/wiki/Perspektive#Geschichte</tt></a><br />

<div class="p"><!----></div>
[7] <a href="http://de.wikipedia.org/wiki/Tetraeder"><tt style="font-size: 1.3em;">http://de.wikipedia.org/wiki/Tetraeder</tt></a><br />

<div class="p"><!----></div>
[8] <a href="http://www.mathe-online.at/mathint/zeich/i.html"><tt style="font-size: 1.3em;">http://www.mathe-online.at/mathint/zeich/i.html</tt></a><br />

<div class="p"><!----></div>
[9] <a href="http://de.wikipedia.org/wiki/Drei-Finger-Regel"><tt style="font-size: 1.3em;">http://de.wikipedia.org/wiki/Drei-Finger-Regel</tt></a><br />

<div class="p"><!----></div>
[10] <a href="http://www.fauskes.net/nb/introduction-to-sketch/"><tt style="font-size: 1.3em;">http://www.fauskes.net/nb/introduction-to-sketch/</tt></a><br />

<div class="p"><!----></div>
[11] <a href="http://de.wikipedia.org/wiki/WYSIWYG"><tt style="font-size: 1.3em;">http://de.wikipedia.org/wiki/WYSIWYG</tt></a><br />

<div class="p"><!----></div>
[12] <a href="http://www.gnu.org/graphics/gnusvgart.html"><tt style="font-size: 1.3em;">http://www.gnu.org/graphics/gnusvgart.html</tt></a><br />

<div class="p"><!----></div>
[13] <a href="http://artlibre.org/licence/lal/en"><tt style="font-size: 1.3em;">http://artlibre.org/licence/lal/en</tt></a><br />

<div class="p"><!----></div>
[14] <a href="http://www.freiesmagazin.de/freiesMagazin-2011-01"><tt style="font-size: 1.3em;">http://www.freiesmagazin.de/freiesMagazin-2011-01</tt></a><br />

<div class="p"><!----></div>
[15] <a href="http://sourceforge.net/projects/ipe7/files/tools/"><tt style="font-size: 1.3em;">http://sourceforge.net/projects/ipe7/files/tools/</tt></a><br />

<div class="p"><!----></div>
                <a href="http://www.freiesmagazin.de/comment/reply/214?edit[subject]=Sketch#comment-form"><i>Diesen Artikel kommentieren</i></a><br /><br />
        <a href="freiesMagazin-2011-02-bilder.html#index">Zum Index</a><br /><hr />

<div class="p"><!----></div>
<h1><font color="#595959"><a name="11_02_simutrans">Simutrans – Schnelles Geld zu Lande, zu Wasser und in der Luft</a><a name="11_02_simutrans">
</a></font></h1>von Michael Schwarz        
<div class="p"><!----></div>
<b>G</b><b>eld ausgeben ist nicht schwer, Geld verdienen dagegen 
sehr. Vom Tellerwäscher zum Multimillionär ist es nicht selten ein langer 
Weg und die Durchfallquote ist hoch. Wer in der Realität ungern mit harter 
Währung zockt, sollte alternativ in der Virtualität sein Glück versuchen. 
Eine nicht ganz ernstzunehmende Möglichkeit, aus dem Nichts ein florierendes 
Imperium zu erschaffen, ist <i>Simutrans</i>&nbsp;<a href="http://www.simutrans.com/index.html">[1]</a>.
Geld wird man aufgrund der freien Verfügbarkeit des Titels definitiv nicht 
verlieren und kleine Finanzgenies könnten an diesem Zeitvertreib Gefallen 
finden.</b>

<div class="p"><!----></div>

<h2>Kurzübersicht</h2>

<div class="p"><!----></div>
Man mag es ahnen, <i>Simutrans</i> ist eine
Wirtschaftssimulation&nbsp;<a href="http://de.wikipedia.org/wiki/Wirtschaftssimulation_(Spiel)">[2]</a>.
Mit einem gewissen Startkapital ausgestattet, beginnt man ein Spiel auf einer durch
Zufall generierten Karte. Die Situation sieht wie folgt aus: Überall
existieren kleine und große Städte sowie Industriegebäude, deren Bewohner und
Waren nur darauf warten, gewinnträchtig von A nach B transportiert zu werden.
In diese Bresche springt das Transportunternehmen des Spielers. Auf
verschiedensten Wegen ist es möglich, Städte und Fabriken miteinander zu
verbinden und somit ein Transportnetz aufzubauen. Für jede Tonne
transportierter Ware oder jeden transportierten Passagier gibt es Bares
direkt aufs Konto. Der Haken: Transportfahrzeuge kosten je nach Eigenart
Geld für jeden gefahrenen Kilometer. Generell verschlingt jeder Transportweg
einen gewissen Betrag an Instandhaltungskosten. Das gilt ebenso für die
Transporter selbst. Es heißt, die richtige Balance zu Gunsten des eigenen
Kontostands zu finden, sonst rutscht man sehr schnell in die roten Zahlen
und kann zukünftig bei Peter Zwegat&nbsp;<a href="http://de.wikipedia.org/wiki/Peter_Zwegat">[3]</a>
vorstellig werden. 
<div class="p"><!----></div>

<h2>Die Möglichkeiten</h2>

<div class="p"><!----></div>
Im Detail stehen dem aufstrebenden Transportguru unter anderem reguläre
Fahrzeuge aus dem Straßenverkehr wie Lastkraftwagen oder Busse zur Verfügung.
Reichen die Kapazitäten eines LKWs nicht mehr
aus, so ist es möglich, Personen- oder Güterzüge einzusetzen, um größere
Mengen von einer Haltestelle zur nächsten zu befördern. Liegt zwischen dem
Ausgangspunkt und dem Zielbahnhof eine große Wasserfläche (Seen, Flüsse,
Meere), kann darüber entweder eine Brücke gebaut werden oder man greift
gleich zu Schiffen, um das blaue Nass zu überwinden. Müssen große Mengen
Waren transportiert werden und es liegt eine enorme Strecke zwischen
Anfangs- und Zielpunkt, sollte ein Flugzeug jedes Hindernis überwinden und
auf dem schnellsten Weg von A nach B transportieren können. Diese letzte
Möglichkeit ist im Regelfall auch die teuerste Transportalternative und
sollte nur mit Bedacht und dem richtigen Polster im Portemonnaie eingesetzt
werden.

<div class="p"><!----></div>

<h3>Erinnerungen werden wach</h3>

<div class="p"><!----></div>
Stetige Leser von <b><font color="#595959">freies</font></b><font color="#FF630A">Magazin</font> dürften sich erinnern, dass es vor
einiger Zeit bereits einen Artikel zu einer Transportwirtschaftssimulation
gab. Das damals vorgestellte OpenTTD (<b><font color="#595959">freies</font></b><font color="#FF630A">Magazin</font> 07/2010&nbsp;<a href="http://www.freiesmagazin.de/freiesMagazin-2010-07/">[4]</a>) verfolgt das
gleiche Spielprinzip, beide Titel unterscheiden sich aber nicht nur grafisch
voneinander.

<div class="p"><!----></div>
Ein Mehrspielermodus für <i>Simutrans</i> befindet sich noch in der
Entwicklung und ist nur in der Entwicklerversion (engl.:
Nightly-build) enthalten. Subventionen wird man in <i>Simutrans</i>
auch nicht finden können, ebenso wenig wie die Veränderung der monatlich
produzierten Waren einer Fabrik. Industriezweige bleiben in <i>Simutrans</i>
erhalten während es in OpenTTD durchaus sein kann, dass diese Konkurs
anmelden oder anderweitig von der Bildfläche verschwinden. In <i>Simutrans</i> gibt
es keine Möglichkeit, sich Geld in Form von Krediten zu leihen, dafür kann
man dort auch mit roten Zahlen fleißig weiterbauen.

<div class="p"><!----></div>
Wen die dauernd defekten Fahrzeuge in OpenTTD gestört haben, der kann sich
freuen. Einmal angeschaffte Fahrzeuge bleiben in <i>Simutrans</i> intakt, benötigen
demnach keine Zwischenstopps zur Inspektion und gehen auch nicht kaputt oder
müssen wegen Überalterung ersetzt werden. Das Gleiche gilt auch für den
Ärger, den man mit Bürgermeistern hatte, die einem in OpenTTD schnell mal die
Baurechte entzogen. In <i>Simutrans</i> herrscht Neutralität gegenüber dem
Spieler. Soll heißen, dass niemand einem den Bau einer Strecke verbietet
oder an gewisse Bedingungen knüpft.

<div class="p"><!----></div>

<h2>Der erste und wichtigste Transport</h2>

<div class="p"><!----></div>
Bevor massenhaft Waren ihren Weg über digitale Schienen, Straßen und Meere
finden, muss das Spiel erst einmal auf den Computer transportiert werden.
<i>Simutrans</i> ist sehr benutzerfreundlich gehalten und benötigte in keiner
Testsituation besondere Anpassungen am System, um ausgeführt zu werden. Auf
der Homepage selbst werden SDL&nbsp;<a href="http://www.libsdl.org/">[5]</a> und
SDL_mixer&nbsp;<a href="http://www.libsdl.org/projects/SDL_mixer/">[6]</a> als Grundvoraussetzung
genannt. Diese Komponenten kommen meist automatisch mit der Distribution
oder lassen sich einfach über die Paketverwaltung nachinstallieren.

<div class="p"><!----></div>
Beziehbar ist <i>Simutrans</i> über dessen
Homepage&nbsp;<a href="http://www.simutrans.com/download.htm">[7]</a>. Ist diese aufgerufen, klickt man
auf „<em>Download</em>“ und anschließend auf den Punkt „<em>Simutrans Complete</em>“. Die Seite
verschiebt sich ein Stück nach unten. Nun wählt man in der erscheinenden
Auswahl (Windows, Linux, Haiku, Mac) den Punkt „<em>Linux</em>“. Eine Weiterleitung mit
Direktdownload zu SourceForge erfolgt. Auf diesem Weg erhält man immer die
jeweils aktuellste stabile Version des Spiels.

<div class="p"><!----></div>
Für den Artikel wurde die Version 102-2-2 des Komplettpaketes
benutzt&nbsp;<a href="http://sourceforge.net/projects/simutrans/files/Simutrans%20complete/102-2-2/simulinux-complete-102-2-2.zip/download">[8]</a>, welche
aber ggf. bald veraltet ist.
In die gleiche Falle könnten diejenigen tappen, die versuchen, <i>Simutrans</i> über
die distributionseigenen Quellen zu installieren. Aufgrund der Tatsache,
dass <i>Simutrans</i> extrem einfach heruntergeladen und ausführbar gemacht werden
kann, wird an dieser Stelle vom Bezug über die Distributionsquellen abgeraten.

<div class="p"><!----></div>
Ist die Datei <b><tt style="font-size: 1.3em;">simulinux-complete-102-2-2.zip</tt></b> mit ihren sage und schreibe 5,8
MB aus dem Internet heruntergeladen, so muss diese noch an einer beliebigen
Stelle entpackt werden. Ist dies geschehen, navigiert man in den soeben
entpackten Hauptordner <b><tt style="font-size: 1.3em;">Simutrans</tt></b> und führt, um das Spiel zu starten, die
Datei <b><tt style="font-size: 1.3em;">simutrans</tt></b> aus. Nun kann fleißig transportiert und Geld gescheffelt
werden.

<div class="p"><!----></div>
    
<h2>Eine praktische Schritt-für-Schritt-Einführung</h2>

<div class="p"><!----></div>
Ist <i>Simutrans</i> gestartet, sieht man eine Auswahl aller verfügbaren
Spielpakete, nachfolgend Grafiksets genannt. Dazu später mehr, zu Beginn
begnügt man sich mit dem Standard und klickt die einzig verfügbare
Schaltfläche „<em>Pak</em>“. Man landet im Hauptmenü des Spiels. Die Einstellungen im
    
Hauptmenü sind selbsterklärend und sollten zu 
Beginn bei ihren Werten
belassen werden. Einzig der Wert „<em>Anteil Kraftwerke (%)</em>“ sollte auf 60-80 angehoben
werden, um die Wahrscheinlichkeit für ein Ölkraftwerk zu erhöhen.
Das folgende Kurztutorial benötigt eines.

<div class="p"><!----></div>
Das Spiel ist grundlegend sehr anfängerfreundlich, kann jedoch später über
die Anpassung dieser Optionen auch anspruchsvoller gestaltet werden. Mit einem Klick auf
„<em>Starte Spiel</em>“ wird eine Karte generiert und das Spiel beginnt.

<div class="p"><!----></div>
Am einfachsten sind Transporte des Rohstoffs Öl von einem Bohrturm zu einem nahe gelegenen Ölkraftwerk. Das ist leicht zu realisieren und spült
in angenehmer Regelmäßigkeit Geld in die Kasse.

<div class="p"><!----></div>
In der oberen Leiste befinden sich verschiedene Schaltflächen, relativ
mittig eine mit der Bezeichnung „<em>Listenverwaltung</em>“ (fährt man mit der Maus
über die Knöpfe, erscheint der Text). Klickt man diese an und wählt anschließend
„<em>Fabrikliste</em>“ (neues Fenster, zweite Schaltfläche von rechts), öffnet sich ein
weiteres Fenster mit allen Industrien der Karte.

<div class="p"><!----></div>
<img border="0" src="freiesMagazin-2011-02-bilder-Dateien/simutrans_01_industrie_finden.png" /><br /><em>Über die Listenverwaltung sind die Fabriken leicht zu finden.</em><br />

<div class="p"><!----></div>

<div class="p"><!----></div>
Interessant sind die Einträge „<em>Pferdekopf-Ölpumpe</em>“ oder „<em>Ölfeld</em>“. Ist solch ein
Eintrag vorhanden, klickt man ihn an, und ein Statusfenster der Industrie
öffnet sich. Klickt man im Statusfenster auf das Bild oben rechts, zentriert
sich die Hauptkarte darauf.

<div class="p"><!----></div>
    

<img border="0" src="freiesMagazin-2011-02-bilder-Dateien/simutrans_02_pferdekopf_oelpumpe.png" /><br /><em>Angebot …</em><br />

<div class="p"><!----></div>
Da die Ölquelle entdeckt wurde, sollte sich noch ein Abnehmer dafür finden
lassen. Im Statusfenster der Ölquelle stehen unter „<em>Verbraucher</em>“ alle
Industrien nach Nähe sortiert, die das Öl entgegennehmen würden. Befindet
sich dort ein Punkt „<em>Ölkraftwerk</em>“, klickt man darauf, um dessen Statusfenster
ebenfalls zu öffnen. Mit Glück ist das Kraftwerk nahe und man kann zwischen
beiden Punkten beispielsweise eine Schiene verlegen.

<div class="p"><!----></div>
    <img border="0" src="freiesMagazin-2011-02-bilder-Dateien/simutrans_03_oelkraftwerk.png" /><br /><em>… und Nachfrage.</em><br />

<div class="p"><!----></div>
Zum Errichten einer Bahnlinie bewegt man die Maus auf den Punkt
„<em>Eisenbahnwerkzeuge</em>“ (obere Leiste, fünfter Punkt von links). Klickt man ihn
an, öffnet sich das Bahnwerkzeugmenü. Dort wählt man ganz links eine
günstige Schiene aus. Der Schienenbaumodus beginnt. Ein Klick auf eine freie
Stelle der Hauptkarte legt den Anfangspunkt der Bahnstrecke fest, ein
weiterer Klick auf eine andere Stelle deren Endpunkt, und damit ist die
Strecke gebaut. Mehr Kontrolle erhält man, wenn man die Maustaste nach dem ersten Klick
gedrückt hält. Die Bahnstrecke wird gebaut, indem die Maus mit gedrückter
Taste bewegt wird. Lässt man die Maustaste los, erscheint die Strecke.

<div class="p"><!----></div>

<img border="0" src="freiesMagazin-2011-02-bilder-Dateien/simutrans_04_bahnbau_3schritte.png" /><br /><em>In drei Schritten zum Ergebnis.</em><br />

<div class="p"><!----></div>
Man klickt nun direkt neben die Ölquelle, um den Bahnbau zu starten,
navigiert danach auf der Karte zum Ölkraftwerk und klickt direkt
daneben, um die Strecke zu errichten.

<div class="p"><!----></div>
Die Strecke steht, leider fehlen noch die Bahnhöfe, um Waren zu verladen. Im
Eisenbahnwerkzeugemenü wählt man daher „<em>Güterbahnhof</em>“ (neunte Schaltfläche von
rechts) und platziert jeweils auf dem Gleis neben der Ölquelle und dem
Ölkraftwerk einen Bahnhof. Nun hat der Zug eine Strecke von A nach B.

<div class="p"><!----></div>
    <img border="0" src="freiesMagazin-2011-02-bilder-Dateien/simutrans_05_gueterbahnhof.png" /><br /><em>Ein Güterbahnhof.</em><br />

<div class="p"><!----></div>
Apropos Zug: Um Züge zu bauen, bedarf es eines Bahndepots. Dieses ist ebenfalls im
Eisenbahnwerkzeugemenü auszuwählen und auf ein Endstück der bestehenden
Strecke zu bauen, indem man darauf klickt. Ist kein Endstück mehr frei,
verlängert man die Strecke um ein Bahnstück und errichtet dort das
Bahndepot.

<div class="p"><!----></div>

<img border="0" src="freiesMagazin-2011-02-bilder-Dateien/simutrans_06_bahnhofdepot.png" /><br /><em>Bausymbol Bahnhofsdepot.</em><br />

<div class="p"><!----></div>
Einmal auf das Bahndepot geklickt, öffnet sich das Bahndepotfenster. Hier
wählt man eine beliebige Lok (Reiter „<em>Loks</em>“) und einen Kesselwagen oder
Ölwaggon (Reiter „<em>Waggons</em>“) aus. Achtung, das Objekt der Wahl wird durch
einmaliges Anklicken bereits gekauft. Um lediglich Informationen über das
Fahrzeug zu erhalten, genügt es, den Mauszeiger darüber zu bewegen. Eine Lok
und ein Ölwaggon reichen zunächst aus. Im Fenster sollte nun eine kleine Lok
mit angehängtem Ölwaggon sichtbar sein. Als nächstes klickt man auf den
Button „<em>Fahrplan</em>“ (ein neues Fenster öffnet sich) und anschließend direkt auf
den Bahnhof neben der Ölquelle sowie den Bahnhof neben dem Ölkraftwerk. Beim
Punkt der Ölquelle
    
 sollte der Wert bei Mindestbeladung auf 100% 
stehen, um
kostspielige Leerfahrten zu vermeiden.

<div class="p"><!----></div>
<img border="0" src="freiesMagazin-2011-02-bilder-Dateien/simutrans_07_depot_letsgo.png" /><br /><em>Mit richtiger Route rollt der Rubel.</em><br />

<div class="p"><!----></div>
Ist der Fahrplan erstellt, schließt man das Fenster und klickt im
Statusfenster des Bahndepots auf „<em>Starten</em>“. Der Zug verlässt nun das Depot,
fährt die festgelegte Strecke ab und befördert Öl von der Ölquelle zum
Ölkraftwerk. Der erste Grundstein zum Transportimperium wurde gelegt.

<div class="p"><!----></div>
Eine Info zum Schluss: Das große Geschäft lässt sich mit Personenverkehr
machen. Wenn ein 
    
Passagier drei- oder viermal umsteigen muss, um sein Ziel zu
erreichen, klingelt die Kasse. Ein weiterer Grundsatz zum
Geldverdienen: je länger die Distanz zwischen Abfahrt- und Zielbahnhof, desto größer der
Profit. Das ist ebenso gültig für den Warenverkehr.

<div class="p"><!----></div>

<h2>Optik wechsle dich</h2>

<div class="p"><!----></div>
Für manches Auge ist das Gewand, in dem <i>Simutrans</i> daherkommt, ein großer, wenn
nicht sogar der Nachteil schlechthin des sonst eigentlich sehr guten Spiels.
In Zeiten von 360-Grad- und 3-D-Zoom-Ansichten wirkt die grobpixelige Aufmachung
eines <i>Simutrans</i> fast schon grotesk. Einen 3-D-FullHD-Patch gibt es bisher
nicht, jedoch die Möglichkeit das Äußere des Spiels, und mit ihm einige der
Spielelemente, über sogenannte Grafiksets (engl.: Paks oder Paksets)
anzupassen.

<div class="p"><!----></div>
So offeriert das Pak128 höher aufgelöste und dadurch hübschere Texturen für
das Spiel, schlägt aber auch mit dem sechsfachen Speicherbedarf zu Buche.
Das Standard-Grafikset (Pak64), welches bei der Grundinstallation
mitgeliefert wird, benötigt entpackt lediglich 10 MB, während Pak128 bereits
62 MB Festplattenspeicher für sich beansprucht. In Zeiten von
Terabyte-Festplatten sollte dies allerdings kein Problem darstellen.
Ebenfalls  nett anzusehen ist das Pak192.Comic, dessen komplette Optik
absichtlich in weniger realistischen Formen und Farben gehalten ist. Durch
die hochaufgelösten Grafiken ist ein sehr nahes Heranzoomen möglich, ohne
mit groben Pixeln konfrontiert zu werden. Wer möchte, kann <i>Simutrans</i> auch in
einer an deutsche Verhältnisse angepassten Version spielen. Auch Japan oder
Großbritannien stehen zur Verfügung. Darüber hinaus gibt auf der
<i>Simutrans</i>-Homepage&nbsp;<a href="http://www.simutrans.com/paksets.htm">[9]</a> noch  andere
Grafiksets zum Download.

<div class="p"><!----></div>
Die Installation eines Grafiksets ist meistens einfach. Wenn der <i>Simutrans</i>-Ordner
unter <b><tt style="font-size: 1.3em;">/home/username/simutrans</tt></b> abgelegt wurde, entpackt man das
heruntergeladene Archiv des Grafiksets nach <b><tt style="font-size: 1.3em;">/home/username</tt></b>. Die
Grafikset-Archive enthalten meist einen Ordner <b><tt style="font-size: 1.3em;">Simutrans</tt></b> und darunterliegend
den Ordner mit den Set-Dateien. Das bewirkt, dass im eigentlichen <b><tt style="font-size: 1.3em;">Simutrans</tt></b>-Ordner lediglich ein weiterer Ordner mit dem Namen des Grafiksets angelegt
wird. 

<div class="p"><!----></div>

<h2>Kleines Programm, großer Hunger</h2>

<div class="p"><!----></div>
<i>Simutrans</i> hat in seinem Auslieferungszustand einen beachtlichen Appetit an
Systemressourcen – gemessen am grafisch minmalistischen Gewand
des Programms jedenfalls. Wird der Arbeitsspeicher mit circa 100 MB nach dem
Start der Anwendung noch nahezu verschont, verursacht das Spiel an
einem Zweikern-System mit installiertem Pak128 eine permanente Auslastung
zwischen 30 und 50 Prozent auf einem Kern. Glücklicherweise kann man durch
etwas Feinjustierung den Hunger etwas zügeln, was <i>Simutrans</i> auch auf älteren
Geräten interessanter erscheinen lässt.

<div class="p"><!----></div>
Der Schlüssel zum Glück ist hierbei die Datei <b><tt style="font-size: 1.3em;">simuconf.tab</tt></b> unter
<b><tt style="font-size: 1.3em;">.../simutrans/config</tt></b>. Öffnet man diese Datei mit einem beliebigen
Texteditor, kann man per Hand einige Werte verändern, um das Spiel zu zähmen.

<div class="p"><!----></div>
Der Wert <b><tt style="font-size: 1.3em;">frames_per_second</tt></b> kann auf 12 oder 10 gesenkt werden. Dadurch wird
die Bildwiederholrate von ursprünglich 25 Bilder pro Sekunde auf den
eingetragenen Wert gesenkt. Das Spiel selbst läuft weiterhin flüssig, keine
Bange. Sollten doch gelegentliche Ruckler auftreten, sollte ein Wert von 15
ressourcensparende Abhilfe schaffen.

<div class="p"><!----></div>
Läuft das Spiel im Vollbildmodus, sperrt man das restliche System aus,
sodass sich der X-Server einzig um <i>Simutrans</i> kümmert. Das verringert zwar
nicht die Last, die <i>Simutrans</i> selbst verursacht, das Programm wird aber
flüssiger dargestellt. Der Wert <b><tt style="font-size: 1.3em;">fullscreen = 0</tt></b> sollte daher auf <b><tt style="font-size: 1.3em;">fullscreen = 1</tt></b>
verändert werden – falls gewünscht und nötig.

<div class="p"><!----></div>
Wird im Vollbildmodus eine geringere Auflösung erzwungen, werden weitere
kostbare Ressourcen auf älteren Systemen gespart. Die Werte <b><tt style="font-size: 1.3em;">display_width = 800</tt></b>
und <b><tt style="font-size: 1.3em;">display_height = 600</tt></b> sind dabei das Mindestmaß der Dinge
(niedrigere Werte führen zu fehlenden Menüpunkten am rechten Bildschirmrand).

<div class="p"><!----></div>
Möglich, aber auch das Spielverhalten verändernd, sind ebenso Anpassungen
der Werte <b><tt style="font-size: 1.3em;">max_hops</tt></b> und <b><tt style="font-size: 1.3em;">max_transfers</tt></b>. Beide Werte beeinflussen die
Routenfindung von Passagieren und Waren. Hier ist Fingerspitzengefühl bei
der Anpassung an das jeweilige

PC-System gefragt. Am Besten belässt man die
vorgegebenen Werte oder verringert diese nur minimal. Letzter Weg zur
Ressourcenschonung: Das Spielen mit einem optisch leichtverdaulichen
Grafikset (pak32.comic)

<div class="p"><!----></div>

<h2>Aufgepasst und hergehört</h2>

<div class="p"><!----></div>
Die Töne, welche <i>Simutrans</i> im Laufe des Spiels so von sich gibt, sind
allesamt Mittelmaß und nicht weiter besonders. Die musikalische Hinterlegung
ist komplett mit Midi-Dateien realisiert, das dafür aber sehr gut. Die
Melodien sind teils peppig und gar nicht mal so schlimm, wie man vielleicht
bei der Erwähnung von Midi erahnen möchte. Die Toneffekte werden leider
schnell eintönig, da es für jedes Vehikel nur einen oder zumindest wenige zu
geben scheint.

<div class="p"><!----></div>
Glücklicherweise ist es über die Spieloptionen möglich, sowohl die
Midi-Hintergrundmusik als auch die Toneffekte zu deaktivieren und
stattdessen im Hintergrund dem Web-Radio oder einer anderen Musikquelle zu
lauschen. – Ganz ehrlich? Musik und Ton machen nicht gerade den Reiz eines
<i>Simutrans</i> aus.

<div class="p"><!----></div>

<h2>Computergesteuerte Gegner</h2> 

<div class="p"><!----></div>
Steht die Frage im Raum, ob <i>Simutrans</i> auch das Spielen gegen den Computer
ermöglicht, fällt die Antwort zwiegespalten aus. Ja, <i>Simutrans</i> bietet die
Möglichkeit, einen computergesteuerten Kontrahenten mitwirtschaften zu
lassen. Nein, so wirklich funktioniert das nicht. In drei Testspielen wurde
jeweils eine Waren-KI und eine Personen-KI hinzugeschaltet, also 

eine
künstliche Intelligenz,  die die Waren wegschnappen sollte, und eine, die sich
über den Personenverkehr her macht. Zweitere funktionierte auch ganz
ordentlich, genauer gesagt zu ordentlich. Bereits bestehende
Personenverkehrsnetze  wurden durch weitere Bushaltestellen der KI
überlagert, sodass in einer mittleren Ortschaft 6 oder 7 Busse der KI durchschossen. Die
Haltestellen waren entsprechend leergefischt und die Geschichte somit weder
für den menschlichen Spieler noch für die KI rentabel.  Gut durchdachtes
Wirtschaften sieht anders aus. Etwas intelligenter, aber nicht besser, stellte
sich die Waren-KI an. Sie machte schlicht und ergreifend nichts, in keinem
der drei Spiele. Wo nichts investiert wird, geht auch kein Geld verloren. Somit
war der Waren-Kontrahent nicht mehr als ein digitaler Zuschauer. Schade.

<div class="p"><!----></div>

<h2>Fazit</h2>

<div class="p"><!----></div>
An dieser Stelle eine Warnung: Wer sowieso gerne Wirtschaftssimulationen
spielt, läuft Gefahr, <i>Simutrans</i>-süchtig zu werden. So ein Abend ist schnell
verzockt, wenn laufend ein Auge auf die Rentabilität von Zügen und Bussen
geworfen werden muss. Sehr schön umgesetzt ist bisher, dass Fabriken kein
Endprodukt produzieren, wenn nicht vorher die benötigten Rohstoffe vor Ort
sind. Wer also ein Chemiewerk dazu bewegen möchte, Druckerfarbe herzustellen,
wird nicht darum herumkommen, dieses Werk mit Öl zu beliefern. Fast schon
schade ist es, dass man die Produktivität einer Industrieanlage nicht durch
konstantes Anliefern von Personal erhöhen kann. Somit bleibt der finanzielle
Faktor der einzige, der einen dazu bewegt, Industrieanlagen an den
Nahpersonenverkehr anzubinden. Ähnliches gilt für Städte. Städte
wachsen, wenn man beginnt, Passagiere zu transportieren; die Wachstumsrate ist
allerdings überschaubar.

<div class="p"><!----></div>
Ein weiterer, zweischneidiger Kritikpunkt: Die Fahrzeuge sind unverwüstlich
und fahren, wenn der Spieler denn soviel Ausdauer hat, nach 100 Jahren immer
noch ihre Strecke wie am ersten Tag. Für manchen wird gerade das der Grund
sein, <i>Simutrans</i> OpenTTD vorzuziehen, schöner wäre es allerdings, gäbe es
eine zuschaltbare Option, um den Zahn der Zeit und den Verschleiß an den
Fahrzeugen nagen zu lassen. Somit hätte der Spieler selbst die Wahl zwischen
Vollsimulation und Realitätsnähe.

<div class="p"><!----></div>
Alles in allem ist <i>Simutrans</i> ein Spiel, das für Liebhaber des Genres
– und damit ähnlich wie OpenTTD – nie langweilig wird. Nach jedem Klick
auf „<em>Spiel Starten</em>“ wird  eine neue Karte mit neuen Städten und anderen
Industriezweigen erstellt.
Auch wenn die grundlegenden Aufgaben gleich bleiben, verändert sich doch die
Herangehensweise jedes Mal aufs Neue. Mehr Berge, mehr Seen und Bäche, und
wenn die Eintönigkeit wirklich mal zu sehr überwiegt, sorgt ein alternatives
Grafikset mit optischen und spielerischen Anpassungen für neuen Wind und
Umdenken. Richtig gemein wird es, wenn man im Titelmenü „<em>Mit Epoche ab Jahr</em>“
aktiviert und als Startjahr 1860 oder 1910 einträgt. Wer es wagt, hat
hoffentlich ein Faible für Pferdekutschen und Dampf- oder Segelschiffe.

<div class="p"><!----></div>
    <font color="#595959"><font size="+1">Links</font></font><br />
        
[1] <a href="http://www.simutrans.com/index.html"><tt style="font-size: 1.3em;">http://www.simutrans.com/index.html</tt></a><br />

<div class="p"><!----></div>
[2] <a href="http://de.wikipedia.org/wiki/Wirtschaftssimulation_(Spiel)"><tt style="font-size: 1.3em;">http://de.wikipedia.org/wiki/Wirtschaftssimulation_(Spiel)</tt></a><br />

<div class="p"><!----></div>
[3] <a href="http://de.wikipedia.org/wiki/Peter_Zwegat"><tt style="font-size: 1.3em;">http://de.wikipedia.org/wiki/Peter_Zwegat</tt></a><br />

<div class="p"><!----></div>
[4] <a href="http://www.freiesmagazin.de/freiesMagazin-2010-07/"><tt style="font-size: 1.3em;">http://www.freiesmagazin.de/freiesMagazin-2010-07/</tt></a><br />

<div class="p"><!----></div>
[5] <a href="http://www.libsdl.org/"><tt style="font-size: 1.3em;">http://www.libsdl.org/</tt></a><br />

<div class="p"><!----></div>
[6] <a href="http://www.libsdl.org/projects/SDL_mixer/"><tt style="font-size: 1.3em;">http://www.libsdl.org/projects/SDL_mixer/</tt></a><br />

<div class="p"><!----></div>
[7] <a href="http://www.simutrans.com/download.htm"><tt style="font-size: 1.3em;">http://www.simutrans.com/download.htm</tt></a><br />

<div class="p"><!----></div>
[8] <a href="http://sourceforge.net/projects/simutrans/files/Simutrans%20complete/102-2-2/simulinux-complete-102-2-2.zip/download"><tt style="font-size: 1.3em;">http://sourceforge.net/projects/simutrans/files/Simutrans%20complete/102-2-2/simulinux-complete-102-2-2.zip/download</tt></a><br />

<div class="p"><!----></div>
[9] <a href="http://www.simutrans.com/paksets.htm"><tt style="font-size: 1.3em;">http://www.simutrans.com/paksets.htm</tt></a><br />

<div class="p"><!----></div>
[10] <a href="http://www.simutrans.de/"><tt style="font-size: 1.3em;">http://www.simutrans.de/</tt></a><br />

<div class="p"><!----></div>
[11] <a href="http://simutrans-germany.com/wiki/wiki/tiki-index.php?page=de_Index"><tt style="font-size: 1.3em;">http://simutrans-germany.com/wiki/wiki/tiki-index.php?page=de_Index</tt></a><br />

<div class="p"><!----></div>
[12] <a href="http://de.wikipedia.org/wiki/Simutrans"><tt style="font-size: 1.3em;">http://de.wikipedia.org/wiki/Simutrans</tt></a><br />

<div class="p"><!----></div>
    
<div class="p"><!----></div>
        
<table border="1">
<tr><td colspan="1" align="center"><font size="+0"><b>Autoreninformation</b></font></td></tr>
<tr><td align="left"><b>Michael Schwarz</b>&nbsp;(<a href="http://www.holarse-linuxgaming.de/">Webseite</a>)
lässt es neben dem Beruf gerne etwas behutsamer
angehen und entspannt sich gerne bei 
Spielen wie <i>Simutrans</i>, in denen man etwas aus dem Nichts erschafft, nur um
dann zuzusehen, wie die Dinge langsam aber kontinuierlich ihren Lauf nehmen.
</td></tr>
<tr><td align="left">    </td></tr></table>



<div class="p"><!----></div>
            <a href="http://www.freiesmagazin.de/comment/reply/214?edit[subject]=Simutrans#comment-form"><i>Diesen Artikel kommentieren</i></a><br /><br />
        <a href="freiesMagazin-2011-02-bilder.html#index">Zum Index</a><br /><hr />

<div class="p"><!----></div>
            
<div class="p"><!----></div>


<div class="p"><!----></div>
<h1><font color="#595959"><a name="11_02_rezension-bash">Rezension: Bash – kurz&nbsp;&amp;&nbsp;gut</a><a name="11_02_rezension-bash">
</a></font></h1>von Dominik Wagenführ        
<div class="p"><!----></div>
<b>A</b><b>uch wenn Linux auf dem Desktop eine immer größere Verbreitung
findet und heutige, moderne Desktopumgebungen fast vollkommen mit
Mausschubserei auskommen, muss man ab und zu doch einmal die Konsole
um Hilfe bitten. Auf den meisten Systemen ist da die vorinstallierte
Bash das Mittel der Wahl. Das Buch „Bash – kurz&nbsp;&amp;&nbsp;gut“ von Karsten
Günther soll einen Überblick über diese Shell bieten.</b>

<div class="p"><!----></div>

<h2>Inhalt</h2>

<div class="p"><!----></div>
Das Buch „Bash – kurz&nbsp;&amp;&nbsp;gut“ von Karsten Günther liegt bereits in
der zweiten Auflage aus dem O'Reilly-Verlag vor. Da es erst Ende
2010 in den Handel gekommen ist, konnte sich der Autor auch mit
den neuen Funktionen der Bash 4.1 beschäftigen.

<div class="p"><!----></div>
Im Buch findet man alles was das Shell-Herz begehrt. So wird am
Anfang auf die verschiedenen Funktionen der Bash (interaktive Shell,
Login-Shell, POSIX-Shell etc.) und deren Optionen eingegangen sowie
auf die Kombination von Befehlen mittels <b><tt style="font-size: 1.3em;">||</tt></b> und <b><tt style="font-size: 1.3em;">&amp;&amp;</tt></b>. Natürlich werden
auch Pipes und Umleitungen erwähnt.

<div class="p"><!----></div>

<div class="p"><!----></div>
Einen großen Teil des Buches nehmen die verschiedenen
Ersetzungsmöglichkeiten der Bash in Anspruch. So geht Karsten
Günther auf die Expandierung von Klammern ein, ebenso auf die
Tilden- und Parametersetzung. Wichtig ist natürlich auch die
Dateinamenersetzung (Globbing).

<div class="p"><!----></div>
Wer mit der Bash interaktiv arbeitet (bei den meisten Nutzern der
Normalfall), der sollte sich mit dem zugehörigen Kapitel
beschäftigen, da hier auf die verschiedenen Eigenschaften von
Readline, der History und Alias-Konstrukten eingegangen wird.

<div class="p"><!----></div>
In zwei weiteren Kapiteln werden danach noch einige Details zu
Variablen und Hintergrundprozessen (Jobs) erläutert.

<div class="p"><!----></div>
Den zweiten großen Teil des Buches nimmt die Übersicht der
eingebauten Bash-Befehle ein, bei denen auch auf Kontrollstrukturen
und Schleifen eingegangen wird. Ein extra Kapitel zu Bashskripten
hat sich der Autor aber gespart, die Variablen bzw. Besonderheiten
des nicht-interaktiven Modus werden verteilt im Buch erklärt.

<div class="p"><!----></div>

<h2>Zielgruppe</h2>

<div class="p"><!----></div>
Die Zielgruppe sind definitiv Bash-erfahrene Anwender, die ein
Nachschlagewerk benötigen. Die Informationen im Buch sind dabei zu
einem großen Teil der Bash-Manpage und Bash-Reference entnommen (S.&nbsp;9),
daher findet man in dem Buch auch keine Geheimtipps. Als
Ratgeber für die Jackentasche ist das Buch aber gut geeignet.
Sinnvoll ist vor allem, dass die Besonderheiten der Bash 4.0 bzw.
4.1 extra erwähnt werden.

<div class="p"><!----></div>
Anfänger werden mit „Bash – kurz&nbsp;&amp;&nbsp;gut“ nicht viel anfangen können.
Auch wenn Befehle und Optionen der Bash erklärt werden, gibt es nur
an sehr wenigen Stellen konkrete Beispiele, um sich vorzustellen,
was eine Funktion wirklich bewirkt. So wird einem nach dem Lesen der
anderthalb Seiten zu arithmetischen Ausdrücken (S.&nbsp;50&nbsp;f) nicht
sofort klar, wie man in der Bash rechnen kann.

<div class="p"><!----></div>

<h2>Kritik</h2>

<div class="p"><!----></div>
Im Großen und Ganzen ist „Bash – kurz&nbsp;&amp;&nbsp;gut“ von Karsten Günther ein
gutes Nachschlagewerk für Bash-Anwender. Leider krankt das Buch aber
an einigen Stellen, die der eine oder andere als essentiell ansehen
könnte.

<div class="p"><!----></div>
So wird gleich auf den ersten Seiten des Buches erklärt, dass
anstelle der bekannten eckigen Klammern aus den Manpages für
optionale Argumente eine graue Schrift benutzt wird. Prinzipiell ist
das okay, nur leider hält sich der Autor nicht selbst an die
Konvention. So findet man im Buch Befehlsdefinitionen wie (S.&nbsp;93)

<div class="p"><!----></div>
<tt style="font-size: 1.3em;">alias <font color="#A5A5A5">-p <i>Name</i>[=<i>Befehl</i>] ...</font>
</tt>

<div class="p"><!----></div>
Wer Manpages kennt, kann sich darunter vielleicht noch etwas
vorstellen. Komplizierter wird es dann bei (S.&nbsp;125)

<div class="p"><!----></div>
<tt style="font-size: 1.3em;"><font color="#A5A5A5">time  [-p]] [!] <i>Befehlszeile</i> [ -  <i>Befehlszeile</i>...</font>
</tt>

<div class="p"><!----></div>
Ob man das wirklich so eingeben soll bzw. wo nun die eine öffnende
und die andere schließende eckige Klammer fehlt, wird nicht sofort
klar. Und wieso selbst der <b><tt style="font-size: 1.3em;">time</tt></b>-Befehl grau formatiert wurde, ist
auch nicht ersichtlich.

<div class="p"><!----></div>

<div class="p"><!----></div>
Solche kleinen Fehler ziehen sich leider etwas durchs Buch. Sie sind
nicht gravierend, können aber verwirren. So ist es auch ärgerlich,
dass beispielweise bei der <b><tt style="font-size: 1.3em;">alias</tt></b>-Beschreibung im Buch (siehe oben)
im erklärenden Text darunter nicht mehr von <i>Befehl</i>, sondern
plötzlich von <i>Definition</i> die Rede ist. Ebenfalls verwirrend ist an
einigen Stellen die Verwendung von spitzen Klammern bei Optionen
(z.&nbsp;B. <b><tt style="font-size: 1.3em;">&lt;-s&#62;</tt></b> auf S.&nbsp;104 bei <b><tt style="font-size: 1.3em;">enable</tt></b>), deren Bedeutung im Buch nicht
erklärt wird.

<div class="p"><!----></div>
Was man auch beachten sollte: Karsten Günther geht bei der
Beschreibung von Tastaturbefehlen immer von einer englischen
Tastatur aus. Das heißt, wenn von der Taste <i>„]“</i> die Rede ist, ist
auf einer deutschen Tastatur eigentlich <i>„AltGr“</i>&nbsp;+&nbsp;<i>„9“</i> gemeint.

<div class="p"><!----></div>
Wer über solche Fehler hinwegsehen kann, findet in dem preiswerten
Buch aber eine wirklich gute Zusammenfassung der Bash-Eigenschaften.

<div class="p"><!----></div>
        
<table border="1">
<tr><td colspan="2" align="center"><font size="+0"><b>Buchinformationen</b></font></td></tr>
<tr><td width="43"><b>Titel</b> </td><td width="237">Bash – kurz&nbsp;&amp;&nbsp;gut </td></tr>
<tr><td width="43"><b>Autor</b> </td><td width="237">Karsten Günther </td></tr>
<tr><td width="43"><b>Verlag</b> </td><td width="237">O'Reilly, 2010 </td></tr>
<tr><td width="43"><b>Umfang</b> </td><td width="237">152 Seiten </td></tr>
<tr><td width="43"><b>ISBN</b> </td><td width="237">978-3-89721-562-7 </td></tr>
<tr><td width="43"><b>Preis</b> </td><td width="237">9,90 Euro </td></tr>
<tr><td width="43">    </td></tr></table>



<div class="p"><!----></div>
<b>Redaktioneller Hinweis:</b> <i>Vielen Dank an den O'Reilly-Verlag für die
Bereitstellung des Rezensionsexemplars.</i>

<div class="p"><!----></div>
Und weil es ja schade wäre, wenn das Buch bei Dominik Wagenführ im
Bücherregal verstaubt, verlosen wir „Bash – kurz&nbsp;&amp;&nbsp;gut“ an die erste
Person, die uns sagen kann, welche neue Shell-Option für die
Dateinamenersetzung in der Bash 4.0 hinzugekommen ist und was diese
macht. Antworten können wie immer über den Kommentarlink am Ende des
Artikels oder per E-Mail an <img src="freiesMagazin-2011-02-bilder-Dateien/redaktionmail.png" alt="redaktion ETT freiesmagazin PUNKT de" height="17" width="168" align="top" /> eingesendet
werden.

<div class="p"><!----></div>
        
<table border="1">
<tr><td colspan="1" align="center"><font size="+0"><b>Autoreninformation</b></font></td></tr>
<tr><td align="left"><b>Dominik Wagenführ</b>&nbsp;(<a href="http://www.deesaster.org/blog/">Webseite</a>)
ist eigentlich Mausschubser, hat aber
auch keine Angst vor der Shell. Wie bei den meisten Nutzern kommt
dabei die Bash zum Einsatz.
</td></tr>
<tr><td align="left">    </td></tr></table>



<div class="p"><!----></div>
            <a href="http://www.freiesmagazin.de/comment/reply/214?edit[subject]=Rezension: Bash#comment-form"><i>Diesen Artikel kommentieren</i></a><br /><br />
        <a href="freiesMagazin-2011-02-bilder.html#index">Zum Index</a><br /><hr />

<div class="p"><!----></div>
<h1><font color="#595959"><a name="11_02_rootserver">Rezension: Root-Server einrichten und absichern</a><a name="11_02_rootserver">
</a></font></h1>von Hans-Joachim Baader        <b>R</b><b>oot-Server, also eigene Server mit Root-Zugang, sind nichts Neues,
aber sie werden immer leistungsfähiger und immer erschwinglicher.
Bücher, die sich speziell dem Thema Root-Server widmen, gibt es
bisher erst wenige. Das neu erschienene Buch „Root-Server einrichten
und absichern“&nbsp;<a href="http://rootpack.invis-server.org">[1]</a> von Stefan Schäfer könnte hier eine Lücke schließen,
zumindest für diejenigen, die sich nicht ausschließlich auf
zusammengesuchte Online-Anleitungen verlassen wollen.</b>

<div class="p"><!----></div>
<b>Redaktioneller Hinweis:</b> <i>Der Artikel „Root-Server einrichten und absichern“
erschien erstmals bei Pro-Linux&nbsp;<a href="http://www.pro-linux.de/artikel/2/1477/root-server-einrichten-und-absichern.html">[2]</a>.</i>

<div class="p"><!----></div>
Da das Buch die Praxis und nicht die Theorie darstellen will, kann
es logischerweise nicht jede Linux-Distribution behandeln. Der Autor
beschränkt sich pragmatisch auf openSUSE&nbsp;<a href="http://www.opensuse.org/">[3]</a>
und Debian&nbsp;<a href="http://www.debian.org/">[4]</a>, die sicher zu den häufigsten
Systemen auf Root-Servern zählen. Wünschenswert wäre vielleicht noch
CentOS&nbsp;<a href="http://centos.org/">[5]</a> gewesen, das wegen seiner langen
Support-Zeit auf Root-Servern gut einsetzbar ist und auch gerne
genutzt wird. Umgekehrt ist openSUSE wegen der kurzen Support-Zeit
wahrscheinlich keine gute Wahl auf einem Root-Server, aber es wird
häufig angeboten und daher ist es verständlich, dass der Autor es
einbezieht.

<div class="p"><!----></div>
Nach der kurzen Einleitung in Kapitel 1 geht es in Kapitel 2 gleich
richtig los. Das Kapitel beschreibt die Installation in verschiedenen
Varianten, mit (bevorzugt) und ohne RAID, jeweils für openSUSE und
Debian. Erfreulich ist die Empfehlung, LVM zu verwenden. Einen
nützlichen Trick verschweigt der Autor allerdings: Statt alle
Partitionen gleich zu Anfang maximal zu machen, kann man bei LVM mit
kleineren Partitionen beginnen und den nicht allokierten Rest in
Reserve halten. Kommt ein Dateisystem an seine Grenzen, können seine
Partition (logisches Volume) und sein Dateisystem problemlos
vergrößert werden, sogar im laufenden Betrieb. Ist jedoch keine
Reserve vorhanden, müsste man zuerst ein anderes Dateisystem
verkleinern, was nicht immer möglich ist (bei xfs gar nicht) und
viel Zeit kosten kann.

<div class="p"><!----></div>
Daneben beschreibt das zweite Kapitel grundlegende Dinge zur
Systemeinrichtung, darunter die Verwaltung von Diensten („Umgang mit
Daemonen“), Erzeugen und Verwalten von Zertifikaten,
Chroot-Umgebungen und Zeiteinstellungen. Das Kapitel belegt nahezu
ein Viertel des Textes (ohne Anhang). Die folgenden Kapitel
beschreiben die Einrichtung von spezifischen Diensten, wobei unter
den vorhandenen Alternativen genau eine konkret behandelt wird. Die
Software-Auswahl ist in allen Fällen vernünftig, auch wenn es z.&nbsp;B.
beim DNS-Server BIND einige vielleicht bessere Alternativen
gibt&nbsp;<a href="http://www.pro-linux.de/artikel/2/778/nameserver-mit-maradns.html">[6]</a>&nbsp;<a href="http://www.pro-linux.de/artikel/2/787/dns-entschlackt.html">[7]</a>.
Da die Konfiguration der einzelnen Dienste aber aufeinander
abgestimmt wurde, sollte man es sich gut überlegen, ob man einer
anderen Software den Vorzug gibt.

<div class="p"><!----></div>
Im recht kurzen Kapitel 3 geht es um SSH und FTP. Wer einen
FTP-Server benötigt, findet hier eine knappe Anleitung zur
Konfiguration von vsftpd. Das fast ebenso kurze Kapitel 4 gibt
eine kurze Einführung in den Aufbau einer Firewall mit iptables. Der
Autor konfiguriert die Firewall im Detail, sodass vom Server nach
außen alles durch die Firewall gehen kann, von außen aber nur die
Ports erreichbar sind, die erreichbar sein sollen. So ist man davor
geschützt, dass ein Dienst, den man nicht beachtet hat,
versehentlich von außen erreichbar und möglicherweise angreifbar
ist. Generell stellt der Autor Sicherheit über Bequemlichkeit und
alles andere; eine Maxime, die nur begrüßt werden kann.

<div class="p"><!----></div>
In Kapitel 5 wird die Einrichtung eines DNS-Servers sowie das
Aufsetzen von dynamischem DNS mit Hilfe dieses Servers beschrieben.
Ein DNS-Server wird nicht von jedem benötigt, aber wenn man ihn
einrichtet, kann er durch das Caching möglicherweise die
Namensauflösung beschleunigen. Kapitel 6 behandelt MySQL und
Apache mit PHP, was den LAMP-Server komplettiert. 68 Seiten
werden diesem Thema gewidmet, überwiegend für die mannigfaltigen
Möglichkeiten der Apache-Konfiguration und virtueller Hosts.

<div class="p"><!----></div>
Kapitel 7 ist mit 90 Seiten das umfangreichste Kapitel des Buchs.
Dieser Platz ist auch angemessen, da es hier um das komplexeste
Thema im Server-Bereich geht, die E-Mail. Der Autor warnt auch ganz
klar vor den möglichen rechtlichen Problemen, denen man sich mit
einem Mail-Server aussetzt. Diese Probleme erst gar nicht aufkommen
zu lassen, ist das Motto der hier beschriebenen Konfiguration, und
diverse Entwurfsentscheidungen werden davon geleitet. Ein
vollständiger SMTP-, POP3- und IMAP-Server mit Postfix,
SpamAssassin, Amavis und Dovecot ist das Ergebnis dieses
Teils, der Antispam- und Antiviren-Lösungen mit einbezieht. Auch
hier werden wie in den anderen Kapiteln alle Vorkehrungen getroffen,
eine beliebige Anzahl von Domains auf dem Server halten zu können.

<div class="p"><!----></div>
In Kapitel 8 werden als optionale Software die MySQL-Verwaltung mit
phpMyAdmin, Webserver-Statistiken mit Webalizer und ein
Webmailer mit Roundcubemail eingerichtet. Die Auswahl dieser
Programme ist sicher darin begründet, dass sie von vielen Benutzern
benötigt werden. Aus Platzgründen musste sich der Autor auf diese
drei Programme beschränken, die jedoch auch als Muster für die
Installation weiterer interessanter Software dienen können.

<div class="p"><!----></div>
Kapitel 9 schließlich behandelt die Datensicherung. Hier liegt der
Schwerpunkt auf der Tatsache, dass die Provider von Root-Servern
meist auch separate Backup-Server zur Verfügung stellen. Der Autor
unterscheidet zwischen verschiedenen Arten von Daten, die beim
Backup auch unterschiedlich behandelt werden sollten. Die Umsetzung
geschieht mit den Linux-Bordmitteln und einigen Shell-Skripten zur
Automatisierung. Der Autor hat nicht zu Unrecht eine gewisse
Vorliebe für afio, das allerdings nicht bei allen Distributionen zum
Lieferumfang gehört, da seine Lizenz nicht als vollständig frei
betrachtet wird. Die drei Anhänge „Linux-Grundlagen“,
„Kommandozeilenwerkzeuge“ und „Shell Scripting“ runden das Buch ab,
werden erfahrenen Nutzern aber nichts Neues bieten.

<div class="p"><!----></div>
Nur zwei mehr oder weniger bedeutende Auslassungen sind in dem Buch
auffällig. Da in Kapitel&nbsp;2 bereits einiges zur Systemeinrichtung
gesagt wurde, hätte auch das Einspielen von Updates beschrieben
werden sollen. Dies wird jedoch nicht erwähnt, dabei hätte ein
kurzer Abschnitt mit den beiden wesentlichen Kommandos bereits
genügt. Angesichts der selbst gewählten Maxime, Sicherheit über
alles zu stellen, kann dies als wichtiges Versäumnis erachtet
werden. Die automatisierte Überwachung des Servers und der Dienste
hätte ebenfalls eine Behandlung verdient gehabt. Spätestens wenn die
Funktionsfähigkeit des Servers kritisch wird, sollte ein Programm
wie Nagios oder eines der zahlreichen anderen Monitoring-Systeme zum
Einsatz kommen.

<div class="p"><!----></div>

<h2>Fazit</h2>

<div class="p"><!----></div>
„Root-Server einrichten und absichern“ ist ein praxisnahes, nahezu
vollständiges und wertvolles Handbuch für alle, die Root-Server
betreiben. Wer sich an die Beispielkonfigurationen hält, wird in der
Tat einen skalierbaren, erweiterbaren und sicheren Root-Server
erhalten. Die Beispiele im Buch sind konsequent darauf ausgelegt,
mehrere Domains auf dem Server zu betreiben, wodurch die
Skalierbarkeit gegeben ist.

Dadurch ist die Anleitung auch für
professionelle Anbieter von Web-Diensten, Domains etc. geeignet.
Aber auch wer anfänglich nur eine einzige Domain auf seinem
Root-Server betreibt, macht sicher nichts verkehrt, wenn er den
Beispielen folgt und so von Anfang an auf Erweiterungen vorbereitet
ist.

<div class="p"><!----></div>
Anfänglich war ich skeptisch, ob das Buch überhaupt Informationen
liefern könnte, die man in den üblichen Server-Büchern noch nicht
findet. Doch das Buch hat mich vollkommen überzeugt. Zwar ist die
gebotene Konfiguration für erfahrene Linux-Nutzer nichts Neues, aber
einige Details und einige Neuerungen werden vermutlich auch für jene
noch neu sein. Und für Anfänger, für die ja auch mit den Anhängen
noch ein wenig gesorgt wird, sollte das Buch als verlässliche
Anleitung gerade richtig kommen. Wäre der erwähnte Kniff zu LVM noch
enthalten, hätte ich das Buch als perfekt bezeichnet.

<div class="p"><!----></div>
Nicht ganz perfekt wurden allerdings einige der zahlreichen Skripte
und Konfigurationsbeispiele gesetzt. Hier haben sich einige
offensichtliche Fehler eingeschlichen wie z.&nbsp;B. TeX-Kommentare, die
abgedruckt wurden, falsche Zeilenumbrüche oder fehlende Zeilen. Da
die Skripte sowie weitere kleine Tools („rootpack“) aber von der
Webseite des Autors heruntergeladen werden können, vermögen sie den
guten Gesamteindruck nicht wesentlich zu trüben. Es schadet
aber nicht, die Errata zum Buch auf der Seite des Autors im Auge zu
behalten.

<div class="p"><!----></div>
        
<table border="1">
<tr><td colspan="2" align="center"><font size="+0"><b>Buchinformationen</b></font></td></tr>
<tr><td width="43"><b>Titel</b> </td><td width="237">Root-Server einrichten und absichern </td></tr>
<tr><td width="43"><b>Autor</b> </td><td width="237">Stefan Schäfer </td></tr>
<tr><td width="43"><b>Verlag</b> </td><td width="237">Open Source Press, 2010 </td></tr>
<tr><td width="43"><b>Umfang</b> </td><td width="237">439 Seiten </td></tr>
<tr><td width="43"><b>ISBN</b> </td><td width="237">978-3-937514-40-6 </td></tr>
<tr><td width="43"><b>Preis</b> </td><td width="237">39,90 Euro </td></tr>
<tr><td width="43">    </td></tr></table>



<div class="p"><!----></div>
    <font color="#595959"><font size="+1">Links</font></font><br />
        
[1] <a href="http://rootpack.invis-server.org"><tt style="font-size: 1.3em;">http://rootpack.invis-server.org</tt></a><br />

<div class="p"><!----></div>
[2] <a href="http://www.pro-linux.de/artikel/2/1477/root-server-einrichten-und-absichern.html"><tt style="font-size: 1.3em;">http://www.pro-linux.de/artikel/2/1477/root-server-einrichten-und-absichern.html</tt></a><br />

<div class="p"><!----></div>
[3] <a href="http://www.opensuse.org/"><tt style="font-size: 1.3em;">http://www.opensuse.org/</tt></a><br />

<div class="p"><!----></div>
[4] <a href="http://www.debian.org/"><tt style="font-size: 1.3em;">http://www.debian.org/</tt></a><br />

<div class="p"><!----></div>
[5] <a href="http://centos.org/"><tt style="font-size: 1.3em;">http://centos.org/</tt></a><br />

<div class="p"><!----></div>
[6] <a href="http://www.pro-linux.de/artikel/2/778/nameserver-mit-maradns.html"><tt style="font-size: 1.3em;">http://www.pro-linux.de/artikel/2/778/nameserver-mit-maradns.html</tt></a><br />

<div class="p"><!----></div>
[7] <a href="http://www.pro-linux.de/artikel/2/787/dns-entschlackt.html"><tt style="font-size: 1.3em;">http://www.pro-linux.de/artikel/2/787/dns-entschlackt.html</tt></a><br />

<div class="p"><!----></div>
            
<table border="1">
<tr><td colspan="1" align="center"><font size="+0"><b>Autoreninformation</b></font></td></tr>
<tr><td align="left"><b>Hans-Joachim Baader</b>&nbsp;(<a href="http://www.pro-linux.de">Webseite</a>)
befasst sich seit 1993 mit Linux. 1994 schloss
er sein Informatikstudium erfolgreich ab, machte die
Softwareentwicklung zum Beruf und ist einer der Betreiber
von Pro-Linux.de. 
</td></tr>
<tr><td align="left">    </td></tr></table>



<div class="p"><!----></div>
                    <a href="http://www.freiesmagazin.de/comment/reply/214?edit[subject]=Rezension: Root-Server einrichten#comment-form"><i>Diesen Artikel kommentieren</i></a><br /><br />
        <a href="freiesMagazin-2011-02-bilder.html#index">Zum Index</a><br /><hr />

<div class="p"><!----></div>
            

<div class="p"><!----></div>

<div class="p"><!----></div>
<h1><font color="#595959"><a name="11_02_wettbewerb3-ende">Dritter <b><font color="#595959">freies</font></b><font color="#FF630A">Magazin</font>-Programmierwettbewerb beendet</a><a name="11_02_wettbewerb3-ende">
</a></font></h1>         <b>A</b><b>m 13. Oktober 2010 startete der dritte Programmierwettbewerb von
<b><font color="#595959">freies</font></b><font color="#FF630A">Magazin</font>&nbsp;<a href="http://www.freiesmagazin.de/20101013-dritter-freiesmagazin-programmierwettbewerb-gestartet">[1]</a>. Bis zum 19. Dezember 2010 hatten die Teilnehmer Zeit, eine
KI zu programmieren, die in zwei verschiedenen Teams entweder wegläuft
oder die anderen Teilnehmer fängt. Am Ende gab es sechs Bots,
die gegeneinander antraten&nbsp;<a href="http://www.freiesmagazin.de/20101220-dritter-programmierwettbewerb-beendet">[2]</a>.</b>

<div class="p"><!----></div>

<h2>Die Aufgabe</h2>

<div class="p"><!----></div>
Die Aufgabe des dritten <b><font color="#595959">freies</font></b><font color="#FF630A">Magazin</font>-Programmierwettbewerbs ist
leicht erklärt&nbsp;<a href="http://www.freiesmagazin.de/dritter_programmierwettbewerb">[3]</a>:
Auf einem Spielfeld starten alle Bots der Teilnehmer im blauen Team.
Nach einer bestimmten Zeit wechselt ein blauer Spieler unter gewissen
Randbedingungen ins rote Team. Ab dann ist es seine Aufgabe, die blauen
Spieler zu fangen. Die blauen Spieler wiederum müssen weglaufen. Wer
im blauen Team gefangen wurde, wechselt ins rote Team und muss ab
sofort mitfangen.

<div class="p"><!----></div>
Als blauer Spieler gibt es Punkte für jede Runde, die man nicht gefangen
wurde. Zusätzlich gibt es als roter Spieler noch Punkte für jeden
blauen Mitspieler, den man gefangen hat. Die Berechnungsfunktionen für
die Punkte hängen dabei auch von der Anzahl der Spieler in den
jeweiligen gegnerischen Teams ab.

<div class="p"><!----></div>

<div class="p"><!----></div>
Die Kommunikation zwischen den Spielern und der Spiele-Engine fand
über ein Server-Client-Konzept statt. Der Server informierte alle
angemeldeten Clients über die Veränderungen am Spiel, also z.&nbsp;B.
welcher Mitspieler sich gerade an welcher Stelle auf dem Spielfeld
befindet. Die Engine wurde dazu unter der GNU Lesser General Public
License (LGPL)&nbsp;<a href="http://www.gnu.org/licenses/lgpl.html">[4]</a> veröffentlicht,
sodass jeder Teilnehmer seinen Bot bei sich testen konnte. Daneben
stand noch eine GUI zum Download bereit, mit der man schneller sehen
konnte, ob sich der eigene Bot vernünftig bewegt.

<div class="p"><!----></div>

<h2>Die Teilnehmer</h2>

<div class="p"><!----></div>
Am Wettbewerb haben insgesamt sechs Personen teilgenommen. Im Vergleich
zu den beiden Wettbewerben zuvor ist die Zahl eher enttäuschend, vor
allem, wenn man beachtet, dass der Wettbewerb zusätzlich auf Englisch
erklärt&nbsp;<a href="http://www.freiesmagazin.de/third_programming_contest">[5]</a> und
vor allem im Full Circle Magazine&nbsp;<a href="http://fullcirclemagazine.org/">[6]</a>
angekündigt
wurde. Aus dem englischsprachigen Lager gab es daneben auch
nur eine einzige Einsendung, was uns zeigt, dass wir in Zukunft keine
separate Übersetzung mehr anbieten werden. Der Aufwand dafür ist
einfach zu hoch. Wieso es nur so wenige Teilnehmer gab, soll in einer
extra Umfrage geklärt werden&nbsp;<a href="http://www.freiesmagazin.de/20110130-umfrage-teilnahme-dritter-programmierwettbewerb">[7]</a>.

<div class="p"><!----></div>

<div class="p"><!----></div>
Die Bots der sechs Teilnehmer sollen an dieser Stelle aber kurz
vorgestellt werden. Der Code zu den Programmen befindet sich im
Gesamt-Downloadarchiv&nbsp;<a href="http://www.freiesmagazin.de/ftp/2010/freiesMagazin-2010-10-contest-complete.tar.gz">[8]</a>.

<div class="p"><!----></div>

<h3>Harald Demel und Martin Keiblinger</h3>

<div class="p"><!----></div>
Die beiden Studenten der TU Wien haben für ihren Bot als Vorlage die
Beispiel-KI genommen, die dem Wettbewerbsdateien beilag. Diese nutzen
sie für die Server-Kommunikationen und Spieldatenverwaltung. Der Kern
der KI wurde aber mithilfe von ficl&nbsp;<a href="http://ficl.sourceforge.net/">[9]</a>
geschrieben. Als Lizenz steht der Bot wie die Beispiel-KI unter der
LGPL. Der ficl-Code, der mitgeliefert wird, steht unter einer
speziellen Lizenz&nbsp;<a href="http://ficl.sourceforge.net/license.html">[10]</a>.

<div class="p"><!----></div>
Zum Kompilieren muss ein C/C++-Compiler und Qt installiert und
zusätzlich der Engine-Code kompiliert worden sein. Danach reicht im
Verzeichnis <b><tt style="font-size: 1.3em;">participants/Demel_und_Keiblinger_Bot</tt></b> ein

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
$&nbsp;make&nbsp;qmake&nbsp;&amp;&amp;&nbsp;make
</pre>

<div class="p"><!----></div>
 
<div class="p"><!----></div>
Die Strategie des Bots ist im blauen Team recht simpel: Da die beiden
Entwickler früh festgestellt haben, dass der Bot gut fangen, aber
schlecht weglaufen kann (läuft in Sackgassen etc.), bleiben sie im
blauen Team einfach stehen und hoffen, dass sie baldmöglichst ins rote
Team wechseln. Dadurch, dass der Giftigkeitswert bei Nichtbewegung
proportional steigt, ist die Wahrscheinlichkeit recht hoch, dass
der Bot als Erstes ins rote Team wechselt und fangen darf.

<div class="p"><!----></div>
Für die Bewegung im roten Team wird für jede der neun möglichen
Bewegungen eine Bewertungsfunktion in Abhängigkeit von lokalen
Feldbewertungen und Zielentfernung in Schritten ausgeführt. Die lokale
Feldbewertung hängt vom zuletzt in der Nähe gesehenen blauen Spieler
ab. Die Bewegungsmöglichkeit mit der höchsten Punktzahl wird dann
gewählt.

<div class="p"><!----></div>

<h3>Kevin Kirsch</h3>

<div class="p"><!----></div>
Kevin Kirsch hat seinen Bot in Java geschrieben. Zum Übersetzen benötigt
man daher einen Java-Compiler, zum Ausführen reicht ein
Java-Interpreter. Kompiliert und gestartet wird der Bot im Verzeichnis
<b><tt style="font-size: 1.3em;">participants/Kevin_Kirsch_Bot</tt></b> mittels folgender Befehle:

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
$&nbsp;javac&nbsp;-sourcepath&nbsp;src/&nbsp;-d&nbsp;bin/&nbsp;src/de/starletp9/freiesMagazin/wettbewerb3/ConnectionManager.java
</pre>

<div class="p"><!----></div>
 
<div class="p"><!----></div>

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
$&nbsp;java&nbsp;-cp&nbsp;bin&nbsp;de.starletp9.freiesMagazin.wettbewerb3.ConnectionManager
</pre>

<div class="p"><!----></div>
 
<div class="p"><!----></div>
Man kann sich aber auch die Tipperei ersparen und die Skripte <b><tt style="font-size: 1.3em;">make_ai.sh</tt></b>
 und <b><tt style="font-size: 1.3em;">start_ai.sh</tt></b> im selben Ordner verwenden.

<div class="p"><!----></div>
Als Lizenz kommt die GNU General Public License
(GPL)&nbsp;<a href="http://www.gnu.org/licenses/gpl.html">[11]</a> zum Einsatz.

<div class="p"><!----></div>
Wenn der Bot in Team Blau ist, dann wertet er alle Felder mit
Spielern von Team Rot mit 0 Punkten. Je weiter ein Feld unter
Beachtung von Wänden von diesen Feldern entfernt ist, um so besser
wird es bewertet. Wenn der Bot in Team Rot ist, dann wertet er alle
Felder mit Spielern von Team Blau mit 2000 Punkten; je weiter ein
Feld unter Beachtung von Wänden von diesen Feldern entfernt ist, um
so schlechter wird es bewertet. Außerdem wird das Feld, auf dem der
Bot steht, und das Feld, auf dem der Bot im vorherigen Zug stand,
abgewertet, damit der Bot zum Beispiel nicht stehen bleibt.
Zu guter Letzt werden noch Wände und Spieler mit einer extrem
niedrigen Wertung versehen, damit der Bot nicht versucht,
durch Wände zu gehen. Am Ende bewegt sich der Bot auf das
Feld mit der höchsten Bewertung.

<div class="p"><!----></div>

<h3>Stefano Pirra</h3>

<div class="p"><!----></div>
Stefano Pirra ist der einzige aus einem nicht deutschsprachigen Land
stammende Teilnehmer 
    
und hat seinen Bot aus Italien eingesandt. Als
C#-Entwickler mit C/C++-Hintergrund hat er sich  die Beispiel-KI
vorgenommen und erweitert. Entsprechend steht der Code auch unter
der LGPL.

<div class="p"><!----></div>
Zum Kompilieren muss ein C++-Compiler und Qt installiert und zusätzlich
der Engine-Code kompiliert worden sein. Danach reicht im
Verzeichnis <b><tt style="font-size: 1.3em;">participants/Stefano_Pirra_Bot</tt></b> ein

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
$&nbsp;qmake&nbsp;&amp;&amp;&nbsp;make
</pre>

<div class="p"><!----></div>
 
<div class="p"><!----></div>
Die ausführbare Datei <b><tt style="font-size: 1.3em;">aipste</tt></b> ist dann der Bot.

<div class="p"><!----></div>
Für die Bewegung baut Stefano Pirra vom aktuellen Startpunkt aus
eine Bewertungskarte auf, bei der Abstand, Blickrichtung und eine
bestimmte Punktezahl, basierend auf dem Giftigkeitswert, dem Abstand
zur aktuellen Position und der Bewegungsfreiheit (Wände), gespeichert
werden. Danach sucht er die anderen Mitspieler und aktualisiert den Wert
der Felder um diesen herum, sodass er von diesen Feldern abgestoßen
bzw. angezogen wird. Am Schluss bewegt sich der Bot auf das
Feld mit der niedrigsten Punktzahl.

<div class="p"><!----></div>

<h3>Christoph Robbert</h3>

<div class="p"><!----></div>
Die zweite in Java geschriebene KI kommt von Christoph Robbert. Wer
den Bot selbst erstellen will, findet ein gepacktes Eclipse-Projekt
<b><tt style="font-size: 1.3em;">eclipse-project.zip</tt></b> im Ordner <b><tt style="font-size: 1.3em;">participants/Christoph_Robbert_Bot</tt></b>.
Dieses kann man über „<em>Datei&nbsp;-&#62;&nbsp;Import&nbsp;-&#62;&nbsp;Archive File</em>“ importieren
und dann per „<em>Datei&nbsp;-&#62;&nbsp;Export&nbsp;-&#62;&nbsp;Runnable jarFile</em>“ die JAR-Datei
erstellen. Als Lizenz kommt die GPLv3 zum Einsatz. Ansonsten kann
man auch einfach den fertigen Bot starten:

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
$&nbsp;java&nbsp;-jar&nbsp;bot.jar
</pre>

<div class="p"><!----></div>
 
<div class="p"><!----></div>
Als Taktik bewertet die KI jedes umliegende Feld und zieht zu dem
günstigsten. Im blauen Team wird dabei auf den Giftigkeitswert eines
Feldes sowie auf den Abstand zum nächsten roten Spieler geachtet.
Im roten Team enthält die Bewertung einfach den Abstand zum nächsten
blauen Spieler. Für die Blickrichtung dreht sich der Bot einfach immer
um 135 Grad.

<div class="p"><!----></div>
Zwei Auffälligkeiten haben sich bei den Testspielen und im Wettbewerb
gezeigt: Zum einen wird nicht erkannt, wenn ein Spieler vorab das
Spiel verlassen hat und ausgeschieden ist. Dann bewegt sich die KI
die ganze Zeit um dieses Feld herum, als wenn es sich um einen gegnerischen
Spieler handelte. Zum anderen wird in manchen Fällen versucht, mit dem
Kopf durch die Wand zu gehen. Das heißt, wenn ein blauer Spieler hinter
einer Wand steht, versucht die KI im roten Team den direkten Weg durch
die Wand und nicht außen herum.

<div class="p"><!----></div>
Daneben gab es hier bei einigen Testspielen (nicht im Wettbewerb)
folgende Fehlermeldungen:

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
Exception&nbsp;in&nbsp;thread&nbsp;"Thread-0"&nbsp;java.lang.OutOfMemoryError:&nbsp;Java&nbsp;heap&nbsp;space
	at&nbsp;java.util.Arrays.copyOf(Arrays.java:2894)
	at&nbsp;java.lang.AbstractStringBuilder.expandCapacity(AbstractStringBuilder.java:117)
	at&nbsp;java.lang.AbstractStringBuilder.append(AbstractStringBuilder.java:589)
	at&nbsp;java.lang.StringBuilder.append(StringBuilder.java:220)
	at&nbsp;Network.NetworkHandler.run(NetworkHandler.java:61)

Exception&nbsp;in&nbsp;thread&nbsp;"Thread-1"&nbsp;java.util.NoSuchElementException:&nbsp;No&nbsp;line&nbsp;found
	at&nbsp;java.util.Scanner.nextLine(Scanner.java:1533)
	at&nbsp;Ki.ki.run(ki.java:43)

Exception&nbsp;in&nbsp;thread&nbsp;"Thread-1"&nbsp;java.lang.IndexOutOfBoundsException:&nbsp;Index:&nbsp;0,&nbsp;Size:&nbsp;0
	at&nbsp;java.util.ArrayList.rangeCheck(ArrayList.java:571)
	at&nbsp;java.util.ArrayList.get(ArrayList.java:349)
	at&nbsp;Ki.ki.calcNextMove(ki.java:179)
	at&nbsp;Ki.ki.run(ki.java:48)

java.io.IOException:&nbsp;Read&nbsp;end&nbsp;dead
	at&nbsp;java.io.PipedInputStream.checkStateForReceive(PipedInputStream.java:263)
	at&nbsp;java.io.PipedInputStream.receive(PipedInputStream.java:227)
	at&nbsp;java.io.PipedOutputStream.write(PipedOutputStream.java:149)
	at&nbsp;sun.nio.cs.StreamEncoder.writeBytes(StreamEncoder.java:220)
	at&nbsp;sun.nio.cs.StreamEncoder.implFlushBuffer(StreamEncoder.java:290)
	at&nbsp;sun.nio.cs.StreamEncoder.implFlush(StreamEncoder.java:294)
	at&nbsp;sun.nio.cs.StreamEncoder.flush(StreamEncoder.java:140)
	at&nbsp;java.io.OutputStreamWriter.flush(OutputStreamWriter.java:229)
	at&nbsp;Network.NetworkHandler.run(NetworkHandler.java:68)
</pre>

<div class="p"><!----></div>

<h3>Martin Scharm</h3>

<div class="p"><!----></div>
Java scheint beliebter zu sein denn je, denn auch der Bot von
Martin Scharm ist in Java 
    
geschrieben. Als Lizenz hat er sich für die
GPLv3 entschieden. Den Bot selbst startet man (eine Java Runtime
Engine muss installiert sein) über

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
$&nbsp;java&nbsp;-jar&nbsp;fm-bot-binfalse.jar
</pre>

<div class="p"><!----></div>
 
<div class="p"><!----></div>
Für eine gute Rundumsicht schaut der Bot sich immer im Winkel von
135 Grad um, damit er alles sieht. Zusätzlich unterteilt er das
aktuelle Spielfeld mittels eines Teile-und-Herrsche-Algorithmus
rekursiv auf, um komplett Räume zu finden, in die er sich zurückziehen
kann.

<div class="p"><!----></div>
Für die Bewegungen nutzt Martin Scharm eine Distance-Map mit den
Abständen zu den Gegnern zusammen mit dem
Dijkstra-Algorithmus&nbsp;<a href="http://de.wikipedia.org/wiki/Dijkstra-Algorithmus">[12]</a>.
Im blauen Team versucht er natürlich viel Abstand zwischen sich und
den roten Spielern zu bringen. Sieht er keinen roten Spieler, sucht er
sich ein Versteck in einem der Räume. Im roten Team jagt er immer den
nächstgelegenen blauen Spieler. Ist kein Aufenthaltsort eines
blauen Spielers bekannt, läuft er zufällig durch die gespeicherten
Räume und versucht dabei auch noch einen möglichst langen Weg
zurückzulegen, um viel von der Umgebung zu sehen.

<div class="p"><!----></div>
Eine wesentlich ausführlichere Beschreibung findet man im
englischsprachigen Blog von Martin Scharm&nbsp;<a href="http://binfalse.de/">[13]</a>, in
dem er einige Taktiken des Bots vorstellt. 

<div class="p"><!----></div>
Einen Bug hat die KI leider noch, sodass es im Wettbewerb ab und zu
zu der folgenden Meldung kam:

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
Exception&nbsp;in&nbsp;thread&nbsp;"main"&nbsp;java.lang.ArrayIndexOutOfBoundsException:&nbsp;22
	at&nbsp;de.binfalse.martin.fmcontest.map.DMap.dirTo(DMap.java:192)
	at&nbsp;de.binfalse.martin.fmcontest.map.DMap.dirTo(DMap.java:217)
	at&nbsp;de.binfalse.martin.fmcontest.player.ItsMe.predator(ItsMe.java:125)
	at&nbsp;de.binfalse.martin.fmcontest.player.ItsMe.run(ItsMe.java:336)
	at&nbsp;de.binfalse.martin.fmcontest.Client.react(Client.java:123)
	at&nbsp;de.binfalse.martin.fmcontest.Client.processMsg(Client.java:81)
	at&nbsp;de.binfalse.martin.fmcontest.Client.listen(Client.java:95)
	at&nbsp;de.binfalse.martin.fmcontest.Client.main(Client.java:230)
</pre>

<div class="p"><!----></div>
In dem Fall fand wahrscheinlich ein Zugriff außerhalb der
Spielfeldgrenzen statt. Dies führte dann auch dazu, dass die KI sich
aus dem Wettbewerb verabschiedete und so keine Punkte für das jeweilige
Spiel erhalten konnte. Dies kam bei allen 2500 Spielen (siehe unten)
insgesamt aber nur 17 Mal vor.

<div class="p"><!----></div>

<h3>Michael Schulz</h3>

<div class="p"><!----></div>
Die KI von Michael Schulz nennt sich „Lewis“, ist als einzige
in Python geschrieben und wird ebenfalls als einzige unter der
Boost Software License&nbsp;<a href="http://www.boost.org/users/license.html">[14]</a>
veröffentlicht. Für die Verarbeitung der Laufwege nutzt sie die
networkx-Bibliothek&nbsp;<a href="http://networkx.lanl.gov/">[15]</a>. Das heißt, man sollte
sich vor der Ausführung des Bots die Bibliothek über

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
#&nbsp;easy_install&nbsp;networkx
</pre>

<div class="p"><!----></div>
herunterladen, wobei die Anwendung easy_install aus dem Paket
<b>python-setuptools</b> installiert sein muss.

<div class="p"><!----></div>
Im blauen Team flieht Lewis in entgegengesetzter Richtung zu einem
in den letzten fünf Runden gesehen roten Spieler. Als roter Spieler
dagegen
    
 läuft er an die Stelle, an der ein blauer Spieler stand.
Findet er keinen, schaut er ein bisschen in der Gegend umher. Ansonsten
sucht sich der Bot zufällig ein Ziel auf dem Spielfeld und schaut
dabei in Laufrichtung.

<div class="p"><!----></div>
Leider hat auch diese Bot-Implementierung (oder die networkx-Bibliothek)
einen kleinen Bug, sodass es ab und zu zur Meldung

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
Traceback&nbsp;(most&nbsp;recent&nbsp;call&nbsp;last):
&nbsp;&nbsp;File&nbsp;"lewis.py",&nbsp;line&nbsp;95,&nbsp;in&nbsp;&lt;module&#62;
&nbsp;&nbsp;&nbsp;&nbsp;test&nbsp;=&nbsp;lewis()
&nbsp;&nbsp;File&nbsp;"/home/dee/bin/freiesmagazin-contest3/participants/Michael_Schulz_Bot/father.py",&nbsp;line&nbsp;88,&nbsp;in&nbsp;__init__
&nbsp;&nbsp;&nbsp;&nbsp;self.moveBlue()
&nbsp;&nbsp;File&nbsp;"lewis.py",&nbsp;line&nbsp;70,&nbsp;in&nbsp;moveBlue
&nbsp;&nbsp;&nbsp;&nbsp;self.dir&nbsp;=&nbsp;self.view&nbsp;=&nbsp;self.map.moveFromTo(swapPos(self.pos),target)
&nbsp;&nbsp;File&nbsp;"/home/dee/bin/freiesmagazin-contest3/participants/Michael_Schulz_Bot/field.py",&nbsp;line&nbsp;161,&nbsp;in&nbsp;moveFromTo
&nbsp;&nbsp;&nbsp;&nbsp;nexttarget.x&nbsp;=&nbsp;int(result[1].split("_")[0])
TypeError:&nbsp;'bool'&nbsp;object&nbsp;is&nbsp;unsubscriptable
</pre>

<div class="p"><!----></div>
kam. Grund ist, dass in dem speziellen Fall die networkx-Bibliothek
beim Aufruf der Methode <b><tt style="font-size: 1.3em;">shortest_path()</tt></b> keinen String, sondern einen
Booleschen Wert zurückliefert, womit der Autor nicht gerechnet hatte.
Die weiteren Gründe dafür wurden aber nicht analysiert.

<div class="p"><!----></div>
Glücklicherweise trat der Fehler aber nicht im Wettbewerb auf, sondern
nur auf anderen Testkarten. Daher konnte der Bot mitspielen.

<div class="p"><!----></div>

<h3>Dominik Wagenführ</h3>

<div class="p"><!----></div>
Dominik Wagenführ, der Chefredakteur von <b><font color="#595959">freies</font></b><font color="#FF630A">Magazin</font> und Initiator des Wettbewerbs, hat spaßeshalber auch eine KI programmiert, diese aber
nur außer Konkurrenz teilnehmen lassen, um die anderen KIs etwas
zu testen.

<div class="p"><!----></div>
Die KI basiert auf der dummen Beispiel-KI, die mitgeliefert wurde,
und ist demzufolge in C++ mit Qt geschrieben. Im blauen Team versucht
der Bot, möglichst viel Abstand zwischen sich und den anderen Mitspieler
(auch blauen) zu 
    
bringen. Daneben wird versucht, nicht zu nahe an den
Wänden entlang zu laufen, um die Bewegungsfreiheit nicht einzuschränken.
Für die Bewegung testet er aber nur eines der neun möglichen
Felder, d.&nbsp;h. es gibt keine Langzeittaktik als blauer Spieler.
Im roten Team läuft der Bot zu dem nächstgelegenen blauen Spieler bzw.
dessen letzter bekannter Position. Findet er keinen blauen Spieler,
läuft die KI gezielt auf dem Spielfeld zu zufällig ausgewählten
Punkten, in der Hoffnung, doch noch einen blauen Spieler zu finden.
Für die Bewegungen wird ebenfalls, wie bei Martin Scharm, der
Dijkstra-Algorithmus benutzt.

<div class="p"><!----></div>
Der Code wird unter der LGPL veröffentlicht. Zum
Kompilieren muss ein C++-Compiler und Qt installiert und zusätzlich
der Engine-Code kompiliert worden sein. Danach reicht im
Verzeichnis <b><tt style="font-size: 1.3em;">participants/Dominik_Wagenfuehr_Bot</tt></b> ein

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
$&nbsp;cd&nbsp;libgraph
$&nbsp;qmake&nbsp;&amp;&amp;&nbsp;make
$&nbsp;cd&nbsp;..
$&nbsp;qmake&nbsp;&amp;&amp;&nbsp;make
</pre>

<div class="p"><!----></div>
 
<div class="p"><!----></div>
und die KI befindet sich in der ausführbaren Datei <b><tt style="font-size: 1.3em;">ai</tt></b>.

<div class="p"><!----></div>

<h2>Der Wettbewerb</h2>

<div class="p"><!----></div>

<h3>Start</h3>

<div class="p"><!----></div>
Wer den Wettbewerb selbst nachstellen will, muss natürlich zuerst
die Engine sowie alle KIs kompilieren. Danach kann er über
das Skript

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
$&nbsp;./start_contest2.sh&nbsp;contest1&nbsp;100&nbsp;5
</pre>

<div class="p"><!----></div>
 
<div class="p"><!----></div>
den Wettbewerb starten. Dabei wird die Karte <b><tt style="font-size: 1.3em;">maps/contest1.map</tt></b>
geladen und über fünf Iterationen hinweg 100 Spiele durchgeführt.
Die Spiele werden dabei automatisch im Ordner <b><tt style="font-size: 1.3em;">games</tt></b> abgelegt, die
Logfiles im Ordner <b><tt style="font-size: 1.3em;">logs</tt></b>.

<div class="p"><!----></div>
Wenn man nur eine einzelne Iteration durchlaufen will, kann man das
Skript

<div class="p"><!----></div>

<pre style="background: rgb(216, 216, 216); border:1px solid lightgray; padding: 3px; font-size: 1.25em;">
$&nbsp;./start_contest.sh&nbsp;contest1&nbsp;100&nbsp;1
</pre>

<div class="p"><!----></div>
 
<div class="p"><!----></div>
nutzen. Dabei werden auf der Karte <b><tt style="font-size: 1.3em;">maps/contest1.map</tt></b> 100 Spiele
durchgeführt. Die Punkteausgabe erfolgt dabei direkt auf der Konsole.
Die 100 Spiele werden aber wieder im Ordner <b><tt style="font-size: 1.3em;">games</tt></b> gespeichert. (Die
letzte Ziffer <b><tt style="font-size: 1.3em;">1</tt></b> ist nur für die Dateinamen der gespeicherten Spiele
notwendig.)

<div class="p"><!----></div>
    Vor allem das Anschauen der Spieledateien in der GUI offenbart sehr
oft, dass man es noch nicht wirklich mit KIs zu tun hat. ;)

<div class="p"><!----></div>
    
<h3>Karten</h3>

<div class="p"><!----></div>
Für den Wettbewerb wurden fünf verschiedene Karten erstellt, bei denen
versucht wurde, verschiedene Eigenschaften wie enge Passagen, offenen
Flächen, Räume, Gänge, Sackgassen etc. einzubauen. Man findet diese
im Ordner <b><tt style="font-size: 1.3em;">maps</tt></b> als <b><tt style="font-size: 1.3em;">contest1.map</tt></b> bis <b><tt style="font-size: 1.3em;">contest5.map</tt></b>. Daneben gibt
es noch ein paar weitere Testkarten, die aber nicht für den Wettbewerb
genutzt wurden.

<div class="p"><!----></div>
<img border="0" src="freiesMagazin-2011-02-bilder-Dateien/wettbewerb-map-contest3.png" /><br /><em>Diese Karte wurde von Pacman entliehen.</em><br />

<div class="p"><!----></div>
<img border="0" src="freiesMagazin-2011-02-bilder-Dateien/wettbewerb-map-contest4.png" /><br /><em>Verschachtelte Räume machen das Weglaufen schwer.</em><br />

<div class="p"><!----></div>
    
<h2>Die Gewinner</h2>

<div class="p"><!----></div>
Und nun ein kleiner Trommelwirbel, denn es folgen die Gewinner.
Alle Ergebnisse,
d.&nbsp;h. die Spieledateien (zum Nachspielen in der GUI) sowie die Logfiles
findet man gepackt 
auf der Webseite&nbsp;<a href="http://www.freiesmagazin.de/ftp/2010/freiesMagazin-2010-10-contest-results.tar.gz">[16]</a>.

<div class="p"><!----></div>
Für den Wettbewerb wurden auf den fünf Karten jeweils 5 mal 100
Spiele durchgeführt. Die Berechnungsdauer war dabei ca. 32 Stunden
für alle 2500 Spiele. Die folgende Tabelle enthält dabei nur die
Gesamtpunktzahl für diese 2500 Spiele. Die genaue Aufschlüsselung
aller Spieler samt Zwischenplatzierung findet man in der
ODS-Ergebnistabelle&nbsp;<a href="http://www.freiesmagazin.de/ftp/2010/freiesMagazin-2010-10-contest-results.ods">[17]</a>.

<div class="p"><!----></div>
            
<table border="1">
<tr><td colspan="3" align="center"><font size="+0"><b>Ergebnisse</b></font></td></tr>
<tr><td align="center"><b>Platz</b> </td><td align="left"><b>Teilnehmer</b> </td><td align="right"><b>Punkte aus 2500 Spielen</b> </td></tr>
<tr><td align="center">1. </td><td align="left">Demel/Keiblinger  </td><td align="right">232&nbsp;595,79 </td></tr>
<tr><td align="center">2. </td><td align="left">Scharm </td><td align="right">104&nbsp;412,12 </td></tr>
<tr><td align="center">3. </td><td align="left">Kirsch  </td><td align="right">98&nbsp;675,43 </td></tr>
<tr><td align="center">4. </td><td align="left">Pirra </td><td align="right">97&nbsp;129,97 </td></tr>
<tr><td align="center">5. </td><td align="left">Robbert </td><td align="right">75&nbsp;739,36 </td></tr>
<tr><td align="center">6. </td><td align="left">Schulz </td><td align="right">35&nbsp;854,39 </td></tr>
<tr><td align="center">    </td></tr></table>



<div class="p"><!----></div>
    Mit Abstand hat der Bot von <b>Harald Demel und Martin Keiblinger</b>
gewonnen. Dies liegt vor allem an der sehr guten Fangroutine, durch die
der Bot viele Punkte einheimsen konnte. Die beiden dürfen sich
also über einen Gutschein im Wert von 50 Euro freuen (der hoffentlich
gerecht geteilt wird).

<div class="p"><!----></div>
    Den zweiten Platz hält <b>Martin Scharm</b>, der sich durch seine
Raumaufteilung der Karte eine Vorteil im blauen Team verschaffen konnte.
Wäre der kleine Bug nicht gewesen, wäre die Punktzahl noch etwas
höher. Dieser Platz ist uns einen Gutschein im Wert von 30 Euro wert.

<div class="p"><!----></div>
    Auf dem dritten Platz befindet sich der Bot von <b>Kevin Kirsch</b>,
wodurch dieser den Gutschein im Wert von 20 Euro enthält. Da der
Abstand zum vierten Platz aber nur minimal ist und bei Spielen auf
den Karten <b><tt style="font-size: 1.3em;">contest1</tt></b> und <b><tt style="font-size: 1.3em;">contest2</tt></b> die Reihenfolge genau umgekehrt
aussieht, erhält <b>Stefano Pirra</b> noch ein Trostgutschein im Wert von
10&nbsp;Euro.

<div class="p"><!----></div>
    Wir gratulieren allen fünf Gewinnern und hoffen, dass die Teilnehmer,
die leer ausgegangen sind, dennoch Spaß am Wettbewerb hatten.

<div class="p"><!----></div>
    Wann es einen nächsten Wettbewerb geben und wie dieser aussehen wird,
ist noch nicht entschieden. Gerne können auch alle potentiellen
Interessenten Vorschläge für einen Wettbewerb über den Kommentarlink
am Ende des Artikels, per Kontaktformular&nbsp;<a href="http://www.freiesmagazin.de/kontakt">[18]</a>
oder per E-Mail an <img src="freiesMagazin-2011-02-bilder-Dateien/redaktionmail.png" alt="redaktion ETT freiesmagazin PUNKT de" height="17" width="168" align="top" /> einsenden. Auch Kritik,
Anregungen und Meinungen zum dritten Wettbewerb werden gerne
entgegengenommen.

<div class="p"><!----></div>
    <font color="#595959"><font size="+1">Links</font></font><br />
        
[1] <a href="http://www.freiesmagazin.de/20101013-dritter-freiesmagazin-programmierwettbewerb-gestartet"><tt style="font-size: 1.3em;">http://www.freiesmagazin.de/20101013-dritter-freiesmagazin-programmierwettbewerb-gestartet</tt></a><br />

<div class="p"><!----></div>
[2] <a href="http://www.freiesmagazin.de/20101220-dritter-programmierwettbewerb-beendet"><tt style="font-size: 1.3em;">http://www.freiesmagazin.de/20101220-dritter-programmierwettbewerb-beendet</tt></a><br />

<div class="p"><!----></div>
 [3] <a href="http://www.freiesmagazin.de/dritter_programmierwettbewerb"><tt style="font-size: 1.3em;">http://www.freiesmagazin.de/dritter_programmierwettbewerb</tt></a><br />

<div class="p"><!----></div>
[4] <a href="http://www.gnu.org/licenses/lgpl.html"><tt style="font-size: 1.3em;">http://www.gnu.org/licenses/lgpl.html</tt></a><br />

<div class="p"><!----></div>
[5] <a href="http://www.freiesmagazin.de/third_programming_contest"><tt style="font-size: 1.3em;">http://www.freiesmagazin.de/third_programming_contest</tt></a><br />

<div class="p"><!----></div>
[6] <a href="http://fullcirclemagazine.org/"><tt style="font-size: 1.3em;">http://fullcirclemagazine.org/</tt></a><br />

<div class="p"><!----></div>
[7] <a href="http://www.freiesmagazin.de/20110130-umfrage-teilnahme-dritter-programmierwettbewerb"><tt style="font-size: 1.3em;">http://www.freiesmagazin.de/20110130-umfrage-teilnahme-dritter-programmierwettbewerb</tt></a><br />

<div class="p"><!----></div>
 [8] <a href="http://www.freiesmagazin.de/ftp/2010/freiesMagazin-2010-10-contest-complete.tar.gz"><tt style="font-size: 1.3em;">http://www.freiesmagazin.de/ftp/2010/freiesMagazin-2010-10-contest-complete.tar.gz</tt></a><br />

<div class="p"><!----></div>
[9] <a href="http://ficl.sourceforge.net/"><tt style="font-size: 1.3em;">http://ficl.sourceforge.net/</tt></a><br />

<div class="p"><!----></div>
[10] <a href="http://ficl.sourceforge.net/license.html"><tt style="font-size: 1.3em;">http://ficl.sourceforge.net/license.html</tt></a><br />

<div class="p"><!----></div>
[11] <a href="http://www.gnu.org/licenses/gpl.html"><tt style="font-size: 1.3em;">http://www.gnu.org/licenses/gpl.html</tt></a><br />

<div class="p"><!----></div>
[12] <a href="http://de.wikipedia.org/wiki/Dijkstra-Algorithmus"><tt style="font-size: 1.3em;">http://de.wikipedia.org/wiki/Dijkstra-Algorithmus</tt></a><br />

<div class="p"><!----></div>
[13] <a href="http://binfalse.de/"><tt style="font-size: 1.3em;">http://binfalse.de/</tt></a><br />

<div class="p"><!----></div>
[14] <a href="http://www.boost.org/users/license.html"><tt style="font-size: 1.3em;">http://www.boost.org/users/license.html</tt></a><br />

<div class="p"><!----></div>
[15] <a href="http://networkx.lanl.gov/"><tt style="font-size: 1.3em;">http://networkx.lanl.gov/</tt></a><br />

<div class="p"><!----></div>
[16] <a href="http://www.freiesmagazin.de/ftp/2010/freiesMagazin-2010-10-contest-results.tar.gz"><tt style="font-size: 1.3em;">http://www.freiesmagazin.de/ftp/2010/freiesMagazin-2010-10-contest-results.tar.gz</tt></a><br />

<div class="p"><!----></div>
[17] <a href="http://www.freiesmagazin.de/ftp/2010/freiesMagazin-2010-10-contest-results.ods"><tt style="font-size: 1.3em;">http://www.freiesmagazin.de/ftp/2010/freiesMagazin-2010-10-contest-results.ods</tt></a><br />

<div class="p"><!----></div>
[18] <a href="http://www.freiesmagazin.de/kontakt"><tt style="font-size: 1.3em;">http://www.freiesmagazin.de/kontakt</tt></a><br />

<div class="p"><!----></div>
                <a href="http://www.freiesmagazin.de/comment/reply/214?edit[subject]=Dritter freiesMagazin-Programmierwettbewerb beendet#comment-form"><i>Diesen Artikel kommentieren</i></a><br /><br />

<div class="p"><!----></div>
        <a href="freiesMagazin-2011-02-bilder.html#index">Zum Index</a><br /><hr />

<div class="p"><!----></div>
<h1><font color="#595959"><a name="11_02_leserbriefe">Leserbriefe</a><a name="11_02_leserbriefe">
</a></font></h1>
            <b>Für Leserbriefe steht unsere E-Mailadresse
            <img src="freiesMagazin-2011-02-bilder-Dateien/redaktionmail.png" alt="redaktion ETT freiesmagazin PUNKT de" height="17" width="168" align="top" /> zur Verfügung - wir freuen uns über Lob,
            Kritik und Anregungen zum Magazin.</b>

<div class="p"><!----></div>
        An dieser Stelle möchten wir alle Leser ausdrücklich ermuntern,
        uns auch zu schreiben, was nicht so gut gefällt. Wir bekommen
        sehr viel Lob (was uns natürlich freut), aber vor allem durch
        Kritik und neue Ideen können wir uns verbessern.
    

<div class="p"><!----></div>

<h2>Leserbriefe und Anmerkungen</h2>

<div class="p"><!----></div>

<div class="p"><!----></div>

<div class="p"><!----></div>

<h3><b><font color="#595959">freies</font></b><font color="#FF630A">Magazin</font> am Kiosk</h3>

<div class="p"><!----></div>
            <font color="#595959"><b>-&#62;</b></font>
Kann ich diese Hefte auch in der Schweiz am Kiosk kaufen?
        <br /><b>Geri Intlekofer</b> 


<div class="p"><!----></div>
        <font color="#FF630A"><b>&lt;-</b></font>    <i>
Aus Kostengründen gibt es <b><font color="#595959">freies</font></b><font color="#FF630A">Magazin</font> nicht am Kiosk, sondern nur als
PDF-Download. Das Magazin zu drucken würde sehr viel Geld verschlingen
und der Markt ist leider nicht so groß, dass sich das Magazin mit einer
geringen Auflage wirklich am Kiosk gegen die anderen Linux-Magazine
durchsetzen würde.
        <br /><b><i>Dominik Wagenführ</i></b> 
</i>

<div class="p"><!----></div>

<h3>Programmieren mit Vala</h3>

<div class="p"><!----></div>
            <font color="#595959"><b>-&#62;</b></font>
Guter Artikel zu Vala. Ich hab es selbst vor einiger Zeit zu
schätzen gelernt. Der Vala-Maintainer heißt aber Jürg (ein in der
Schweiz verbreiteter Name), nicht Jörg.
        <br /><b>gb</b> &nbsp;(<a href="http://www.freiesmagazin.de/20110102-januarausgabe-erschienen#comment-1576">Kommentar</a>)


<div class="p"><!----></div>
        <font color="#FF630A"><b>&lt;-</b></font>    <i>
Danke für den Fehlerhinweis, den wir in der Ausgabe sofort korrigiert
haben, hier aber noch einmal gesondert darauf hinweisen wollen.
        <br /><b><i>Dominik Wagenführ</i></b> 
</i>

<div class="p"><!----></div>

<h3>Plasma erobert die Welt</h3>

<div class="p"><!----></div>
            <font color="#595959"><b>-&#62;</b></font>
Ich kämpfe nun schon eine ganze Weile mit KDE4 und bin mittlerweile
auf Trinity umgestiegen, da das ganze KDE4-Zeug sich nicht meinen
Wünschen anpassen lässt.

<div class="p"><!----></div>
Der Artikel zeigt dies sehr schön, denn der Benutzer kommt darin
überhaupt nicht vor, sondern nur, dass Plasma für andere Programme
von Vorteil ist.

<div class="p"><!----></div>
Hätte ich [nicht] Trinity – ein Fork von KDE 3.5x – gefunden, hätte ich wohl
KDE als Desktop verlassen, obwohl ich schon vor Versionen 1.0 mit
KDE gearbeitet habe. […]
        <br /><b>Rolf</b> &nbsp;(<a href="http://www.freiesmagazin.de/20110102-januarausgabe-erschienen#comment-1592">Kommentar</a>)


<div class="p"><!----></div>
            <font color="#595959"><b>-&#62;</b></font>
In der letzten Ausgabe wurde Plasma lang und breit erklärt, aber
leider nur aus der Sicht eines Entwicklers für andere Entwickler.

<div class="p"><!----></div>
Mir als Anwender erschließt sich das ganze Thema Plasma-Oberfläche
nicht. Was sind Aktivitäten? Wozu werden sie gebraucht? Wo kann ich
sie auflisten lassen? Was haben sie mit den altbekannten
Arbeitsflächen zu tun?

<div class="p"><!----></div>
Wenn ich mich in Userkreisen umhöre geht es vielen so. Mir erscheint
es manchmal so, dass die Entwicklung die User nicht mitgenommen hat.
Wenn ich lese, dass die Entwicklung des Plasma-Frameworks
abgeschlossen ist und ich immer noch nicht weiß, wie und warum man
mit dem neuen Tools arbeiten soll (Plasmoids, Apps, …), finde ich
das befremdlich. Hier scheint es mir an nutzerbezogenen Artikeln zu
fehlen.
        <br /><b>Bernd</b> 


<div class="p"><!----></div>
        <font color="#FF630A"><b>&lt;-</b></font>    <i>
Autor Martin Gräßlin schreibt dazu: Anwenderdokumentation zu
KDE–Plasma gibt es durchaus. Zum Beispiel in der Userbase&nbsp;<a href="http://userbase.kde.org/Plasma">[1]</a>,
welche eigentlich immer erster Anlaufpunkt für KDE-bezogene Themen
ist. Aber auch das deutschsprachige ubuntuusers-Wiki&nbsp;<a href="http://wiki.ubuntuusers.de/Plasma">[2]</a> bietet eine
ausführliche Dokumentation zu Plasma. Neue Konzepte wie die
Aktivitäten sind oftmals noch nicht berücksichtigt. Viele
Informationen zu diesen findet man im Blog der Hauptentwicklerin&nbsp;<a href="http://chani.wordpress.com/">[3]</a>.
        <br /><b><i>Dominik Wagenführ</i></b> 
</i>

<div class="p"><!----></div>
            <font color="#595959"><b>-&#62;</b></font>
Es ist mir ein riesiges Rätsel, wie man die zahlreichen
Codeschnittstellen (JavaScript, QML, u.&nbsp;v.&nbsp;a.&nbsp;m.), die einfache
Änderbarkeit des Aussehens und viele andere Aspekte unter einen Hut
bekommen hat. Kein Wunder, dass die Entwicklung so schwer war, dass
Plasma an einigen Stellen noch kahl oder unausgereift wirkt. Ich
hoffe, dass die Arbeit an der Ausgereiftheit rund um die KDE SC
aktiv bleibt. […]

<div class="p"><!----></div>
Eine Zwischenfrage: Die Debug-Informationen sind ja geradezu riesig
für KDE (mehrere GB). Verlangsamen diese auch KDE im normalen
Betrieb? (Gentoo: flag „debug“, Fedora: „-debug“-Pakete installieren)
        <br /><b>Gast</b> &nbsp;(<a href="http://www.freiesmagazin.de/20110102-januarausgabe-erschienen#comment-1575">Kommentar</a>)


<div class="p"><!----></div>
        <font color="#FF630A"><b>&lt;-</b></font>    <i>
Zu der Frage bzgl. Debugging-Symbolen in KDE wissen wir die Antwort
leider auch nicht. Ggf. hilft es, in einem KDE-Forum nachzufragen.
        <br /><b><i>Dominik Wagenführ</i></b> 
</i>

<div class="p"><!----></div>

<h3>Heimautomatisierung für Hardwarebastler</h3>

<div class="p"><!----></div>
            <font color="#595959"><b>-&#62;</b></font>
Mein Lob für diese Ausgabe (Januar 2011) […]. Begeistert bin ich von
der Hausautomatisierung. Mehr davon, bitte! Bisher habe ich zu
diesem Thema nur was im LinuxMagazin gefunden: „Ansteuerung einer
Wärmepumpe“ und „Samsung LCD/LED Fernseher mit Linux Firmware
bespielen“.

<div class="p"><!----></div>
Vielleicht findet sich jemand, um einmal über Arduino&nbsp;<a href="http://www.arduino.cc/">[4]</a>
und Fritz Prototyping&nbsp;<a href="http://fritzing.org/">[5]</a> zu schreiben,
aus Sicht eines Linuxanten, falls die Leser von <b><font color="#595959">freies</font></b><font color="#FF630A">Magazin</font> eine
ansprechende Menge an Zielgruppenanteil besitzen sollten …
        <br /><b>Steffen Bergner</b> 


<div class="p"><!----></div>
        <font color="#FF630A"><b>&lt;-</b></font>    <i>
Die Zielgruppe ist uns in der Hinsicht nicht so wichtig.
Wenn sich nur eine
Handvoll von Lesern findet, die den Artikel interessiert, reicht das
vollkommen aus.
Die Frage ist eher, ob sich ein Autor findet, der sich dem Thema
annimmt. Wir haben die beiden Themen sicherheitshalber auch auf
unsere Leserwunschliste&nbsp;<a href="http://www.freiesmagazin.de/artikelwuensche">[6]</a>
aufgenommen, sodass vielleicht später ein Autor darüber stolpert.
        <br /><b><i>Dominik Wagenführ</i></b> 
</i>

<div class="p"><!----></div>

<h3>Teile und herrsche – Internet-Sharing im Netzwerk</h3>

<div class="p"><!----></div>
            <font color="#595959"><b>-&#62;</b></font>
Wenn ich die vorgeschlagene Konfiguration richtig verstehe, wird der
„Router“-Rechner ab sofort in jedem Netzwerk DHCP-Server spielen,
an den man ihn über eth0 anschließt. Das dürfte bei mir morgen im
Büro ein großes Hallo geben&nbsp;– nur der zuständige Admin wird das
ziemlich unlustig finden.

<div class="p"><!----></div>
Bitte, wenn Ihr Leuten erklärt, wie man einen DHCP-Server installiert,
erklärt ihnen auch, welche Probleme wilde DHCP-Server in Netzwerken
verursachen und was sie dagegen tun können (etwa den automatischen
Start unterbinden).

<div class="p"><!----></div>
Das Problem ist, das dhcpd nach der Installation automatisch bei
jedem Systemstart mit startet – jedenfalls unter Ubuntu (unter SuSE
bräuchte es vielleicht noch eine Aktivierung in YAST). Und wie
vorgeschlagen konfiguriert, fängt dhcpd nun an, in jedem Netzwerk
über eth0 IP-Adressen zu verteilen – und das geht nun wirklich nicht.

<div class="p"><!----></div>
Mein Vorschlag: Hinweis nachreichen, wie man das sicher wieder
entschärft (wird wohl noch „klassisch“ über Init-Skripte gestartet;
also die Links in den <b><tt style="font-size: 1.3em;">/etc/rc?.d/</tt></b> von <b><tt style="font-size: 1.3em;">S</tt></b> auf <b><tt style="font-size: 1.3em;">K</tt></b>
setzen).
        <br /><b>Hans Stoffel</b> &nbsp;(<a href="http://www.freiesmagazin.de/20110102-januarausgabe-erschienen#comment-1584">Kommentar</a>)


<div class="p"><!----></div>
        <font color="#FF630A"><b>&lt;-</b></font>    <i>
Natürlich kann ein DHCP-Server bei unsachgemäßer Anwendung Probleme
verursachen. In unserem Fall haben wir aber ein alleinstehendes Netz
betrachtet, das für sich autark steht. Es ist weder beabsichtigt
noch angeraten, sich mit dieser Lösung in ein bestehendes Netzwerk
einzuhängen. Das hier gezeigten Szenario ist eine Insellösung.
        <br /><b><i>Oliver Johanndrees</i></b> 
</i>

<div class="p"><!----></div>
            <font color="#595959"><b>-&#62;</b></font>
Ich bin ein Linuxanfänger und kenne mich mit Netzwerken sehr wenig
aus. Deshalb fand ich auch den Artikel „Teile und herrsche –
Internet-Sharing im Netzwerk“ gut. Ich würde mich freuen,
wenn Ihr auch was über „Linux auf 'ner LAN“ bringen würdet:

<ul>
<li> Vergleich von NFS mit Samba
<div class="p"><!----></div>
</li>

<li> Wie sicher ist Samba? Samba kenne ich aus Windows -&#62; Unsicher für Linux?
<div class="p"><!----></div>
</li>

<li> Wie steht's mit den freigegebenen Dateien? Können andere über das Internet drauf zugreifen? (ungewollte Zugriffe vermeiden)
<div class="p"><!----></div>
</li>

<li> Falls man nur eine Datei an jemanden schicken will -&#62; Giver (vielleicht gibt es auch andere Progs). […]

<div class="p"><!----></div>
</li>
</ul>
        <br /><b>Gast</b> 


<div class="p"><!----></div>
        <font color="#FF630A"><b>&lt;-</b></font>    <i>
Auch das Thema haben wir auf unsere Leserwunschliste mit aufgenommen.
Eine Bitte an dieser Stelle aber an alle Leser: Wenn Sie uns einen
Leserbrief schicken, geben Sie eine valide E-Mailadresse an, ansonsten
können wir Ihnen nicht antworten.
        <br /><b><i>Dominik Wagenführ</i></b> 
</i>

<div class="p"><!----></div>
    <font color="#595959"><font size="+1">Links</font></font><br />
        
[1] <a href="http://userbase.kde.org/Plasma"><tt style="font-size: 1.3em;">http://userbase.kde.org/Plasma</tt></a><br />

<div class="p"><!----></div>
[2] <a href="http://wiki.ubuntuusers.de/Plasma"><tt style="font-size: 1.3em;">http://wiki.ubuntuusers.de/Plasma</tt></a><br />

<div class="p"><!----></div>
[3] <a href="http://chani.wordpress.com/"><tt style="font-size: 1.3em;">http://chani.wordpress.com/</tt></a><br />

<div class="p"><!----></div>
[4] <a href="http://www.arduino.cc/"><tt style="font-size: 1.3em;">http://www.arduino.cc/</tt></a><br />

<div class="p"><!----></div>
[5] <a href="http://fritzing.org/"><tt style="font-size: 1.3em;">http://fritzing.org/</tt></a><br />

<div class="p"><!----></div>
[6] <a href="http://www.freiesmagazin.de/artikelwuensche"><tt style="font-size: 1.3em;">http://www.freiesmagazin.de/artikelwuensche</tt></a><br />

<div class="p"><!----></div>
                Die Redaktion behält sich vor, Leserbriefe gegebenenfalls zu
        kürzen. Redaktionelle Ergänzungen finden sich in eckigen Klammern.
    

<div class="p"><!----></div>
        <a href="http://www.freiesmagazin.de/comment/reply/214?edit[subject]=Leserbriefe#comment-form"><i>Die Leserbriefe kommentieren</i></a><br /><br />
    <a href="freiesMagazin-2011-02-bilder.html#index">Zum Index</a><br /><hr />

<div class="p"><!----></div>
                            
<h1><font color="#595959"><a name="11_02_veranstaltungen">Veranstaltungskalender</a><a name="11_02_veranstaltungen">
</a></font></h1>

<div class="p"><!----></div>
        
<table border="1">
<tr><td colspan="5" align="center"><font size="+0"><b>Messen</b></font></td></tr>
<tr><td align="left"><b>Veranstaltung</b> </td><td width="0"><b>Ort</b> </td><td align="left"><b>Datum</b> </td><td width="0"><b>Eintritt</b> </td><td align="left"><b>Link</b> </td></tr>
<tr><td align="left">
5. LIT-OL </td><td width="0">Oldenburg </td><td align="left">12.02.2011 </td><td width="0">frei </td><td align="left"><a href="http://www.lit-ol.de/"><tt style="font-size: 1.3em;">http://www.lit-ol.de/</tt></a> </td></tr>
<tr><td align="left">CeBIT </td><td width="0">Hannover </td><td align="left">01.-05.03.2011 </td><td width="0">39 EUR </td><td align="left"><a href="http://www.cebit.de/"><tt style="font-size: 1.3em;">http://www.cebit.de/</tt></a> </td></tr>
<tr><td align="left">Chemnitzer Linux-Tage </td><td width="0">Chemnitz </td><td align="left">19.-20.03.2011 </td><td width="0">8 EUR </td><td align="left"><a href="http://chemnitzer.linux-tage.de/"><tt style="font-size: 1.3em;">http://chemnitzer.linux-tage.de/</tt></a> </td></tr>
<tr><td align="left">Augsburger Linux-Infotag </td><td width="0">Augsburg </td><td align="left">26.03.2011 </td><td width="0">frei </td><td align="left"><a href="http://www.luga.de/"><tt style="font-size: 1.3em;">http://www.luga.de/</tt></a> </td></tr>
<tr><td align="left">FOSSGIS </td><td width="0">Heidelberg </td><td align="left">05.-07.04.2011 </td><td width="0">- </td><td align="left"><a href="http://www.fossgis.de/konferenz/2011"><tt style="font-size: 1.3em;">http://www.fossgis.de/konferenz/2011</tt></a> </td></tr>
<tr><td align="left">Grazer Linuxtage </td><td width="0">Graz </td><td align="left">09.04.2011 </td><td width="0">frei </td><td align="left"><a href="http://linuxwochen.at/"><tt style="font-size: 1.3em;">http://linuxwochen.at/</tt></a> </td></tr>
<tr><td align="left">UnFUCK </td><td width="0">Furtwangen </td><td align="left">15.-17.05.2011 </td><td width="0">frei </td><td align="left"><a href="http://www.unfuck.eu/"><tt style="font-size: 1.3em;">http://www.unfuck.eu/</tt></a> </td></tr>
<tr><td align="left">Linuxwochen Wien </td><td width="0">Wien </td><td align="left">05.-07.05.2011 </td><td width="0">frei </td><td align="left"><a href="http://linuxwochen.at/"><tt style="font-size: 1.3em;">http://linuxwochen.at/</tt></a> </td></tr>
<tr><td align="left">LiWoLi 2011 </td><td width="0">Linz </td><td align="left">12.-14.05.2011 </td><td width="0">frei </td><td align="left"><a href="http://linuxwochen.at/"><tt style="font-size: 1.3em;">http://linuxwochen.at/</tt></a> </td></tr>
<tr><td align="left">        </td></tr></table>


    <font size=1">(Alle Angaben ohne Gewähr!)</font>

<div class="p"><!----></div>
    Sie kennen eine Linux-Messe, welche noch nicht auf der Liste zu
    finden ist? Dann schreiben Sie eine E-Mail mit den Informationen zu
    Datum und Ort an<img src="freiesMagazin-2011-02-bilder-Dateien/redaktionmail.png" alt="redaktion ETT freiesmagazin PUNKT de" height="17" width="168" align="top" />.


<div class="p"><!----></div>
<a href="freiesMagazin-2011-02-bilder.html#index">Zum Index</a><br /><hr />

<div class="p"><!----></div>
                            
<h1><font color="#595959"><a name="11_02_vorschau">Vorschau</a><a name="11_02_vorschau">
</a></font></h1>

<div class="p"><!----></div>
<b><font color="#595959">freies</font></b><font color="#FF630A">Magazin</font> erscheint immer am ersten Sonntag eines Monats. Die März-Ausgabe wird voraussichtlich am 6. März unter anderem mit folgenden Themen veröffentlicht:

<ul>
<li> Secret Maryo Chronicles – Pilzkönigreich war gestern
<div class="p"><!----></div>
</li>

<li> GIMP-Tutorial: Farben durch Graustufen hervorheben (Colorkey)

<div class="p"><!----></div>
</li>
</ul>
Es kann leider vorkommen, dass wir aus internen Gründen angekündigte Artikel verschieben müssen. Wir bitten dafür um Verständnis.<br />
<a href="freiesMagazin-2011-02-bilder.html#index">Zum Index</a><br /><hr />

<div class="p"><!----></div>
                                    
<h1><font color="#595959"><a name="11_02_konventionen">Konventionen</a><a name="11_02_konventionen">
</a></font></h1>

<div class="p"><!----></div>
    An einigen Stellen benutzen wir Sonderzeichen mit einer bestimmten
    Bedeutung. Diese sind hier zusammengefasst:<br />
        
<table>
<tr><td width="59"><b><tt style="font-size: 1.3em;">$</tt></b>:  </td><td align="left">Shell-Prompt </td></tr>
<tr><td width="59"><b><tt style="font-size: 1.3em;">#</tt></b>:  </td><td align="left">Prompt einer Root-Shell – Ubuntu-Nutzer können
                      hier auch einfach in einer normalen Shell ein
                      <b><tt style="font-size: 1.3em;">sudo</tt></b> vor die Befehle setzen.</td></tr>
<tr><td width="59"><b><tt style="font-size: 1.3em;">~</tt></b>: </td><td align="left">Abkürzung für das eigene Benutzerverzeichnis
                      <b><tt style="font-size: 1.3em;">/home/BENUTZERNAME</tt></b> </td></tr></table>
<br />
        <a href="freiesMagazin-2011-02-bilder.html#index">Zum Index</a><br /><hr />

<div class="p"><!----></div>

<div style="background: #FFFFFF;">
    
<table>
<tr><td colspan="3" align="left">                        
<h1><font color="#595959"><a name="11_02_impressum">Impressum <font size="+1">ISSN 1867-7991</font></a><a name="11_02_impressum">
</a></font></h1></td></tr>
<tr><td colspan="3" align="left"><b><font color="#595959">freies</font></b><font color="#FF630A">Magazin</font> erscheint als PDF und HTML einmal monatlich.</td></tr>
<tr><td colspan="3" align="left"> </td></tr>
<tr><td align="left"></td></tr>
<tr><td colspan="3" align="left"><font size="+0"><b>Kontakt</b></font></td></tr>
<tr><td align="left"></td><td align="left">E-Mail </td><td align="left"><img src="freiesMagazin-2011-02-bilder-Dateien/redaktionmail.png" alt="redaktion ETT freiesmagazin PUNKT de" height="17" width="168" align="top" /> </td></tr>
<tr><td align="left"></td><td align="left">Postanschrift </td><td align="left"><b><font color="#595959">freies</font></b><font color="#FF630A">Magazin</font> </td></tr>
<tr><td align="left"></td><td align="left"></td><td align="left">c/o Dominik Wagenführ </td></tr>
<tr><td align="left"></td><td align="left"></td><td align="left">Beethovenstr. 9/1 </td></tr>
<tr><td align="left"></td><td align="left"></td><td align="left">71277 Rutesheim </td></tr>
<tr><td align="left"></td><td align="left">Webpräsenz </td><td align="left"><a href="http://www.freiesmagazin.de/">http://www.freiesmagazin.de/</a> </td></tr>
<tr><td align="left"></td><td align="left"></td><td align="left"></td></tr>
<tr><td colspan="3" align="left"><font size="+0"><b>Autoren dieser Ausgabe</b></font></td></tr>
<tr><td align="left"></td><td align="left">Stefan Apke </td><td align="left"><a href="freiesMagazin-2011-02-bilder.html#11_02_sketch">Sketch – 3D-Grafikcode für LaTeX erstellen</a> </td></tr>
<tr><td align="left"></td><td align="left">Hans-Joachim Baader </td><td align="left"><a href="freiesMagazin-2011-02-bilder.html#11_02_rootserver">Rezension: Root-Server einrichten und absichern</a> </td></tr>
<tr><td align="left"></td><td align="left">Hauke Goos-Habermann </td><td align="left"><a href="freiesMagazin-2011-02-bilder.html#11_02_kvm-vbox">VirtualBox und KVM</a> </td></tr>
<tr><td align="left"></td><td align="left">Mirko Lindner </td><td align="left"><a href="freiesMagazin-2011-02-bilder.html#11_02_kernel-crash-analyse">Kernel-Crash-Analyse unter Linux</a> </td></tr>
<tr><td align="left"></td><td align="left">Mathias Menzer </td><td align="left"><a href="freiesMagazin-2011-02-bilder.html#11_02_kernel">Der Januar im Kernelrückblick</a> </td></tr>
<tr><td align="left"></td><td align="left">Daniel Nögel </td><td align="left"><a href="freiesMagazin-2011-02-bilder.html#11_02_python5">Python – Teil 5: In medias res</a> </td></tr>
<tr><td align="left"></td><td align="left">Jochen Schnelle </td><td align="left"><a href="freiesMagazin-2011-02-bilder.html#11_02_bottle">Bottle – Ein WSGI-Microframework für Python</a> </td></tr>
<tr><td align="left"></td><td align="left">Michael Schwarz </td><td align="left"><a href="freiesMagazin-2011-02-bilder.html#11_02_simutrans">Simutrans – Schnelles Geld zu Lande, zu Wasser und in der Luft</a> </td></tr>
<tr><td align="left"></td><td align="left">Dominik Wagenführ </td><td align="left"><a href="freiesMagazin-2011-02-bilder.html#11_02_rezension-bash">Rezension: Bash – kurz&nbsp;&amp;&nbsp;gut</a> </td></tr></table>


<div class="p"><!----></div>
    
<table>
<tr><td align="left"></td></tr>
<tr><td colspan="3" align="left">Erscheinungsdatum: 6. Februar 2011</td></tr>
<tr><td align="left"></td></tr>
<tr><td align="left"></td></tr>
<tr><td colspan="3" align="left"><font size="+0"><b>Redaktion</b></font></td></tr>
<tr><td align="left"></td><td align="left">Frank Brungräber </td><td align="left">Thorsten Schmidt </td></tr>
<tr><td align="left"></td><td colspan="2" align="left">Dominik Wagenführ (Verantwortlicher Redakteur) </td></tr>
<tr><td align="left"></td><td colspan="2" align="left"> </td></tr>
<tr><td colspan="3" align="left"><font size="+0"><b>Satz und Layout</b></font></td></tr>
<tr><td align="left"></td><td align="left">Ralf Damaschke </td><td align="left">Yannic Haupenthal </td></tr>
<tr><td align="left"></td><td align="left">Nico Maikowski </td><td align="left">Matthias Sitte </td></tr>
<tr><td align="left"></td><td colspan="2" align="left"> </td></tr>
<tr><td colspan="3" align="left"><font size="+0"><b>Korrektur</b></font></td></tr>
<tr><td align="left"></td><td align="left">Daniel Braun </td><td align="left">Stefan Fangmeier </td></tr>
<tr><td align="left"></td><td align="left">Mathias Menzer </td><td align="left">Karsten Schuldt </td></tr>
<tr><td align="left"></td><td align="left">Stephan Walter </td><td align="left"></td></tr>
<tr><td align="left"></td><td colspan="2" align="left"> </td></tr>
<tr><td colspan="3" align="left"><font size="+0"><b>Veranstaltungen</b></font></td></tr>
<tr><td align="left"></td><td colspan="2" align="left">Ronny Fischer </td></tr>
<tr><td align="left"></td><td colspan="2" align="left"> </td></tr>
<tr><td colspan="3" align="left"><font size="+0"><b>Logo-Design</b></font></td></tr>
<tr><td align="left"></td><td colspan="2" align="left">Arne Weinberg (<a href="http://www.gnu.org/copyleft/fdl.html">GNU FDL</a>) </td></tr>
<tr><td align="left">    </td></tr></table>


<div class="p"><!----></div>
    Dieses Magazin wurde mit LaTeX erstellt. Mit vollem Namen
    gekennzeichnete Beiträge geben nicht notwendigerweise die Meinung
    der Redaktion wieder. Wenn Sie <b><font color="#595959">freies</font></b><font color="#FF630A">Magazin</font> ausdrucken möchten, dann
    denken Sie bitte an die Umwelt und drucken Sie nur im Notfall. Die
    Bäume werden es Ihnen danken. ;-) <br />

<div class="p"><!----></div>
        Soweit nicht anders angegeben, stehen alle Artikel, Beiträge und Bilder in
    <b><font color="#595959">freies</font></b><font color="#FF630A">Magazin</font> unter der&nbsp;<a href="http://creativecommons.org/licenses/by-sa/3.0/deed.de">Creative-Commons-Lizenz CC-BY-SA 3.0 Unported</a>. Das Copyright liegt
    beim jeweiligen Autor. <b><font color="#595959">freies</font></b><font color="#FF630A">Magazin</font> unterliegt als Gesamtwerk ebenso
    der&nbsp;<a href="http://creativecommons.org/licenses/by-sa/3.0/deed.de">Creative-Commons-Lizenz CC-BY-SA 3.0 Unported</a> mit Ausnahme der
    Inhalte, die unter einer anderen Lizenz hierin veröffentlicht
    werden. Das Copyright liegt bei Dominik Wagenführ. Es wird erlaubt,
    das Werk/die Werke unter den Bestimmungen der Creative-Commons-Lizenz
    zu kopieren, zu verteilen und/oder zu modifizieren. Das <b><font color="#595959">freies</font></b><font color="#FF630A">Magazin</font>-Logo
    wurde von Arne Weinberg erstellt und unterliegt der
    <a href="http://www.gnu.org/copyleft/fdl.html">GFDL</a>.
    Die xkcd-Comics stehen separat unter der&nbsp;<a href="http://creativecommons.org/licenses/by-nc/2.5/">Creative-Commons-Lizenz CC-BY-NC 2.5 Generic</a>. Das Copyright liegt
    bei&nbsp;<a href="http://www.xkcd.com/">Randall Munroe</a>.<br />

<div class="p"><!----></div>
    <a href="freiesMagazin-2011-02-bilder.html#index">Zum Index</a><br /><hr />

<div class="p"><!----></div>
</div>
<br /><br /><hr /><small>File translated from
T<sub><font size=1">E</font></sub>X
by <a href="http://hutchinson.belmont.ma.us/tth/">
T<sub><font size=1">T</font></sub>H</a>,
version 3.89.<br />On  6 Feb 2011, 08:04.</small>
</div>
</body></html>
